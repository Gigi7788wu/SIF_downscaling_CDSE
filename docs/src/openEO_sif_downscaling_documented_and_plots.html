<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.8.26">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Daniel E. Pabon-Moreno et al.,">

<title>SIF Downscaling using OpenEO and the Copernicus Data Space Ecosystem (CDSE)</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
html { -webkit-text-size-adjust: 100%; }
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="https://cdn.jsdelivr.net/npm/jquery@3.5.1/dist/jquery.min.js" integrity="sha384-ZvpUoO/+PpLXR1lu4jmpXWu80pZlYUAfxl5NsBMWOEPSjUn/6Z/hRTt8+pR6L4N2" crossorigin="anonymous"></script><script src="../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../site_libs/clipboard/clipboard.min.js"></script>
<script src="../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../site_libs/quarto-search/fuse.min.js"></script>
<script src="../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../">
<script src="../site_libs/quarto-html/quarto.js" type="module"></script>
<script src="../site_libs/quarto-html/tabsets/tabsets.js" type="module"></script>
<script src="../site_libs/quarto-html/axe/axe-check.js" type="module"></script>
<script src="../site_libs/quarto-html/popper.min.js"></script>
<script src="../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../site_libs/quarto-html/anchor.min.js"></script>
<link href="../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../site_libs/quarto-html/quarto-syntax-highlighting-587c61ba64f3a5504c4d52d930310e48.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../site_libs/bootstrap/bootstrap-2750d9c6336c32320d899d5bfafce233.min.css" rel="stylesheet" append-hash="true" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>
<script src="https://cdn.jsdelivr.net/npm/requirejs@2.3.6/require.min.js" integrity="sha384-c9c+LnTbwQ3aujuU7ULEPVvgLs+Fn6fJUvIGTsuu1ZcCf11fiEubah0ttpca4ntM sha384-6V1/AdqZRWk1KAlWbKBlGhN7VG4iE/yAZcO6NZPMF8od0vukrvr0tg4qY6NSrItx" crossorigin="anonymous"></script>

<script type="application/javascript">define('jquery', [],function() {return window.jQuery;})</script>

  <script src="https://cdnjs.cloudflare.com/polyfill/v3/polyfill.min.js?features=es6"></script>
  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script>

<script type="text/javascript">
const typesetMath = (el) => {
  if (window.MathJax) {
    // MathJax Typeset
    window.MathJax.typeset([el]);
  } else if (window.katex) {
    // KaTeX Render
    var mathElements = el.getElementsByClassName("math");
    var macros = [];
    for (var i = 0; i < mathElements.length; i++) {
      var texText = mathElements[i].firstChild;
      if (mathElements[i].tagName == "SPAN" && texText && texText.data) {
        window.katex.render(texText.data, mathElements[i], {
          displayMode: mathElements[i].classList.contains('display'),
          throwOnError: false,
          macros: macros,
          fleqn: false
        });
      }
    }
  }
}
window.Quarto = {
  typesetMath
};
</script>

<link rel="stylesheet" href="styles.css">
</head>

<body class="floating quarto-light">

<div id="quarto-search-results"></div>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal quarto-sidebar-collapse-item sidebar-navigation floating overflow-auto">
    <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">Contents</h2>
   
  <ul class="collapse">
  <li><a href="#introduction" id="toc-introduction" class="nav-link active" data-scroll-target="#introduction">Introduction</a></li>
  <li><a href="#libraries" id="toc-libraries" class="nav-link" data-scroll-target="#libraries">Libraries</a></li>
  <li><a href="#area-of-interest-and-time-period" id="toc-area-of-interest-and-time-period" class="nav-link" data-scroll-target="#area-of-interest-and-time-period">Area of Interest and Time Period</a></li>
  <li><a href="#connecting-to-cdse-using-openeo" id="toc-connecting-to-cdse-using-openeo" class="nav-link" data-scroll-target="#connecting-to-cdse-using-openeo">Connecting to CDSE using openEO</a></li>
  <li><a href="#variables" id="toc-variables" class="nav-link" data-scroll-target="#variables">Variables</a></li>
  <li><a href="#reducing-the-time-dimension" id="toc-reducing-the-time-dimension" class="nav-link" data-scroll-target="#reducing-the-time-dimension">Reducing the time dimension</a></li>
  <li><a href="#inspecting-the-variables" id="toc-inspecting-the-variables" class="nav-link" data-scroll-target="#inspecting-the-variables">Inspecting the variables</a></li>
  <li><a href="#spatial-resampling-to-match-the-sif-resolution-product" id="toc-spatial-resampling-to-match-the-sif-resolution-product" class="nav-link" data-scroll-target="#spatial-resampling-to-match-the-sif-resolution-product">Spatial resampling to match the SIF resolution product</a></li>
  <li><a href="#sif-parameter-optimization-at-low-spatial-resolution" id="toc-sif-parameter-optimization-at-low-spatial-resolution" class="nav-link" data-scroll-target="#sif-parameter-optimization-at-low-spatial-resolution">SIF parameter optimization at low spatial resolution</a></li>
  <li><a href="#checking-parameter-optimization-results" id="toc-checking-parameter-optimization-results" class="nav-link" data-scroll-target="#checking-parameter-optimization-results">Checking parameter optimization results</a></li>
  <li><a href="#upsampling-the-parameters-cube" id="toc-upsampling-the-parameters-cube" class="nav-link" data-scroll-target="#upsampling-the-parameters-cube">Upsampling the parameters cube</a>
  <ul class="collapse">
  <li><a href="#resampling-olci-products-at-1-km" id="toc-resampling-olci-products-at-1-km" class="nav-link" data-scroll-target="#resampling-olci-products-at-1-km">Resampling OLCI products at 1 km</a></li>
  <li><a href="#downscaling-sif" id="toc-downscaling-sif" class="nav-link" data-scroll-target="#downscaling-sif">Downscaling SIF</a></li>
  <li><a href="#comparing-sif-products" id="toc-comparing-sif-products" class="nav-link" data-scroll-target="#comparing-sif-products">Comparing SIF products</a></li>
  </ul></li>
  </ul>
</nav>
</nav>
<div id="quarto-sidebar-glass" class="quarto-sidebar-collapse-item" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar zindex-bottom">
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">SIF Downscaling using OpenEO and the Copernicus Data Space Ecosystem (CDSE)</h1>
</div>



<div class="quarto-title-meta">

    <div>
    <div class="quarto-title-meta-heading">Author</div>
    <div class="quarto-title-meta-contents">
             <p>Daniel E. Pabon-Moreno et al., </p>
          </div>
  </div>
    
  
    
  </div>
  


</header>


<section id="introduction" class="level2">
<h2 class="anchored" data-anchor-id="introduction">Introduction</h2>
<p>In the following example we will Downscaled (Increase the spatial resolution) of Sun Induced Fluorescence product derived from Sentinel-5p TROPOMI sensor. A full workflow diagram is presented here: XXXXX</p>
</section>
<section id="libraries" class="level2">
<h2 class="anchored" data-anchor-id="libraries">Libraries</h2>
<p>We will need the following libraries to run dowscaling processor</p>
<div id="155fad82" class="cell" data-execution_count="1">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb1"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> openeo</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> rioxarray <span class="im">as</span> rio</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a><span class="co">"""</span></span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a><span class="co">Currently there is an issue with openEO back-end that doesnt allow us to upsample datacubes (For more details see [here](https://forum.dataspace.copernicus.eu/t/how-to-spatial-upsampling-when-using-resample-cube-spatial/4358/6)). For this reason we will need some other libraries to process the parameters cube locally, perform a spatial upsample, create a stac catalog and publish the file and catalog on github.</span></span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a><span class="co">This is needed to create a STAC item for the upsampled parameters:</span></span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a><span class="co">"""</span></span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> pystac</span>
<span id="cb1-9"><a href="#cb1-9" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> pystac.extensions.projection <span class="im">import</span> ProjectionExtension</span>
<span id="cb1-10"><a href="#cb1-10" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> pystac.extensions.eo <span class="im">import</span> EOExtension</span>
<span id="cb1-11"><a href="#cb1-11" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> datetime <span class="im">import</span> datetime</span>
<span id="cb1-12"><a href="#cb1-12" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> shapely.geometry <span class="im">import</span> box, mapping</span>
<span id="cb1-13"><a href="#cb1-13" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> json</span>
<span id="cb1-14"><a href="#cb1-14" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> subprocess</span>
<span id="cb1-15"><a href="#cb1-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-16"><a href="#cb1-16" aria-hidden="true" tabindex="-1"></a><span class="co"># For data visualization</span></span>
<span id="cb1-17"><a href="#cb1-17" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> xarray <span class="im">as</span> xr</span>
<span id="cb1-18"><a href="#cb1-18" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> matplotlib.pyplot <span class="im">as</span> plt</span>
<span id="cb1-19"><a href="#cb1-19" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> xesmf <span class="im">as</span> xe</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
</section>
<section id="area-of-interest-and-time-period" class="level2">
<h2 class="anchored" data-anchor-id="area-of-interest-and-time-period">Area of Interest and Time Period</h2>
<p>Before going into the details of the datasets we need to define an area of interest and time period of our analysis. For this example we will focus in the north part of Germany in the period between 2018-06-20 and 2018-06-30.</p>
<div id="b91246f4" class="cell" data-execution_count="2">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb2"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a>spatial_extent_prototype <span class="op">=</span> {</span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a>    <span class="st">"west"</span>: <span class="op">-</span><span class="fl">6.921387</span>,</span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a>    <span class="st">"east"</span>: <span class="op">-</span><span class="fl">1.889648</span>,</span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a>    <span class="st">"south"</span>: <span class="fl">37.230328</span>,</span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a>    <span class="st">"north"</span>: <span class="fl">40.229218</span>,</span>
<span id="cb2-6"><a href="#cb2-6" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb2-7"><a href="#cb2-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-8"><a href="#cb2-8" aria-hidden="true" tabindex="-1"></a>temporal_extent_prototype <span class="op">=</span> [<span class="st">"2023-06-23"</span>, <span class="st">"2023-06-30"</span>]</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<div id="1da8a050" class="cell" data-execution_count="3">
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="openEO_sif_downscaling_documented_and_plots_files/figure-html/cell-4-output-1.png" width="1430" height="757" class="figure-img"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="connecting-to-cdse-using-openeo" class="level2">
<h2 class="anchored" data-anchor-id="connecting-to-cdse-using-openeo">Connecting to CDSE using openEO</h2>
<p>To connect to the openEO insfrastructure in the CDSE we need to create a connection:</p>
<div id="0359adbe" class="cell" data-execution_count="4">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb3"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a>connection <span class="op">=</span> openeo.<span class="ex">connect</span>(</span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a>    <span class="st">"https://openeofed.dataspace.copernicus.eu/"</span></span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a>).authenticate_oidc()</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>Authenticated using refresh token.</code></pre>
</div>
</div>
<p>This will open a tab in the web-browser where the user needs to authenticate using the CDSE credentials. For more details on openEO in CDSE please see: <a href="https://dataspace.copernicus.eu/analyse/openeo">https://dataspace.copernicus.eu/analyse/openeo</a></p>
<p>Then we can see the data collections that are available:</p>
<div id="0a7bee00" class="cell" data-execution_count="5">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb5"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a>connection.list_collections()</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<div class="scrolling">
<div id="7927ef1e" class="cell" data-execution_count="6">
<div class="cell-output cell-output-display" data-execution_count="5">

    <script>
    if (!window.customElements || !window.customElements.get('openeo-collections')) {
        var el = document.createElement('script');
        el.src = "https://cdn.jsdelivr.net/npm/@openeo/vue-components@2/assets/openeo.min.js";
        document.head.appendChild(el);

        var font = document.createElement('font');
        font.as = "font";
        font.type = "font/woff2";
        font.crossOrigin = true;
        font.href = "https://use.fontawesome.com/releases/v5.13.0/webfonts/fa-solid-900.woff2"
        document.head.appendChild(font);
    }
    </script>
    <openeo-collections>
        <script type="application/json">{"missing": [], "federation": {"cdse": {"description": "This openEO service runs on the [Copernicus Data Space Ecosystem](https://dataspace.copernicus.eu/)\nand offers data access and processing on full archives of Copernicus data, such as the Sentinels.", "last_status_check": "2025-12-09T15:00:54Z", "status": "online", "title": "Copernicus Data Space Ecosystem openEO API", "url": "https://openeo.dataspace.copernicus.eu/openeo/1.1/"}, "terrascope": {"description": "OpenEO API to the Terrascope/VITO Remote Sensing product catalog and processing services (using GeoPySpark driver).", "last_status_check": "2025-12-09T15:00:54Z", "status": "online", "title": "VITO Remote Sensing openEO API", "url": "https://openeo-cdse.vito.be/openeo/1.1/"}}, "mapOptions": {}, "collections": [{"description": "Sentinel 3 imagery captured by OLCI sensor", "extent": {"spatial": {"bbox": [[-180.0, -85.0, 180.0, 85.0]]}, "temporal": {"interval": [["2016-04-17T11:33:13Z", null]]}}, "id": "SENTINEL3_OLCI_L1B", "license": "proprietary", "links": [{"href": "https://sh.dataspace.copernicus.eu/api/v1/catalog/1.0.0/collections/sentinel-3-olci/queryables", "rel": "http://www.opengis.net/def/rel/ogc/1.0/queryables", "type": "application/schema+json"}, {"href": "https://sh.dataspace.copernicus.eu/api/v1/catalog/1.0.0/collections/sentinel-3-olci/items", "rel": "items", "type": "application/geo+json"}, {"href": "https://openeofed.dataspace.copernicus.eu/openeo/1.2/collections", "rel": "root"}, {"href": "https://openeofed.dataspace.copernicus.eu/openeo/1.2/collections", "rel": "parent"}, {"href": "https://openeofed.dataspace.copernicus.eu/openeo/1.2/collections/SENTINEL3_OLCI_L1B", "rel": "self"}], "providers": [], "stac_extensions": ["https://stac-extensions.github.io/scientific/v1.0.0/schema.json", "https://stac-extensions.github.io/sat/v1.0.0/schema.json", "https://stac-extensions.github.io/eo/v1.0.0/schema.json"], "stac_version": "1.0.0", "title": "Sentinel 3 OLCI"}, {"description": "Sentinel 3 imagery captured by SLSTR sensor", "extent": {"spatial": {"bbox": [[-180.0, -85.0, 180.0, 85.0]]}, "temporal": {"interval": [["2016-04-17T11:33:13Z", null]]}}, "id": "SENTINEL3_SLSTR", "license": "proprietary", "links": [{"href": "https://sh.dataspace.copernicus.eu/api/v1/catalog/1.0.0/collections/sentinel-3-slstr/queryables", "rel": "http://www.opengis.net/def/rel/ogc/1.0/queryables", "type": "application/schema+json"}, {"href": "https://sh.dataspace.copernicus.eu/api/v1/catalog/1.0.0/collections/sentinel-3-slstr/items", "rel": "items", "type": "application/geo+json"}, {"href": "https://openeofed.dataspace.copernicus.eu/openeo/1.2/collections", "rel": "root"}, {"href": "https://openeofed.dataspace.copernicus.eu/openeo/1.2/collections", "rel": "parent"}, {"href": "https://openeofed.dataspace.copernicus.eu/openeo/1.2/collections/SENTINEL3_SLSTR", "rel": "self"}], "providers": [], "stac_extensions": ["https://stac-extensions.github.io/scientific/v1.0.0/schema.json", "https://stac-extensions.github.io/sat/v1.0.0/schema.json", "https://stac-extensions.github.io/eo/v1.0.0/schema.json"], "stac_version": "1.0.0", "title": "Sentinel 3 SLSTR"}, {"description": "Sentinel 5 Precursor imagery captured by TROPOMI sensor.\n\nThis dataset only supports loading one band at a time.", "extent": {"spatial": {"bbox": [[-180.0, -85.0, 180.0, 85.0]]}, "temporal": {"interval": [["2018-04-30T00:18:50Z", null]]}}, "id": "SENTINEL_5P_L2", "license": "proprietary", "links": [{"href": "https://sh.dataspace.copernicus.eu/api/v1/catalog/1.0.0/collections/sentinel-5p-l2/queryables", "rel": "http://www.opengis.net/def/rel/ogc/1.0/queryables", "type": "application/schema+json"}, {"href": "https://sh.dataspace.copernicus.eu/api/v1/catalog/1.0.0/collections/sentinel-5p-l2/items", "rel": "items", "type": "application/geo+json"}, {"href": "https://openeofed.dataspace.copernicus.eu/openeo/1.2/collections", "rel": "root"}, {"href": "https://openeofed.dataspace.copernicus.eu/openeo/1.2/collections", "rel": "parent"}, {"href": "https://openeofed.dataspace.copernicus.eu/openeo/1.2/collections/SENTINEL_5P_L2", "rel": "self"}], "providers": [], "stac_extensions": ["https://stac-extensions.github.io/scientific/v1.0.0/schema.json", "https://stac-extensions.github.io/sat/v1.0.0/schema.json", "https://docs.sentinel-hub.com/api/latest/stac/s5p/v1.0.0/schema.json"], "stac_version": "1.0.0", "title": "Sentinel 5 Precursor"}, {"description": "[EXPERIMENTAL] Copernicus High Resolution Land Vegetation Phenology and Productivity parameters at 10m on yearly basis from 2017 onwards for EU countries. This collection contains parameters of the first detected growing season.", "extent": {"spatial": {"bbox": [[-62.0760771, -21.7894746, 56.138312, 72.0995811]]}, "temporal": {"interval": [["2017-01-01T00:00:00Z", "2024-12-31T23:59:59Z"]]}}, "id": "COPERNICUS_VEGETATION_PHENOLOGY_PRODUCTIVITY_10M_SEASON1", "keywords": ["PPI", "index", "land", "vegetation", "plant", "phenology", "productivity", "growing season", "sentinel"], "license": "proprietary", "links": [{"href": "https://stac.openeo.vito.be/collections/copernicus_r_utm-wgs84_10_m_hrvpp-vpp_p_2017-now_v01/aggregate", "rel": "aggregate", "type": "application/json"}, {"href": "https://stac.openeo.vito.be/collections/copernicus_r_utm-wgs84_10_m_hrvpp-vpp_p_2017-now_v01/aggregations", "rel": "aggregations", "type": "application/json"}, {"href": "https://stac.openeo.vito.be/collections/copernicus_r_utm-wgs84_10_m_hrvpp-vpp_p_2017-now_v01/items", "rel": "items", "type": "application/geo+json"}, {"href": "https://stac.openeo.vito.be/collections/copernicus_r_utm-wgs84_10_m_hrvpp-vpp_p_2017-now_v01/queryables", "rel": "queryables", "type": "application/json"}, {"href": "https://openeofed.dataspace.copernicus.eu/openeo/1.2/collections", "rel": "root"}, {"href": "https://openeofed.dataspace.copernicus.eu/openeo/1.2/collections", "rel": "parent"}, {"href": "https://openeofed.dataspace.copernicus.eu/openeo/1.2/collections/COPERNICUS_VEGETATION_PHENOLOGY_PRODUCTIVITY_10M_SEASON1", "rel": "self"}], "providers": [{"name": "VITO", "roles": ["licensor", "producer", "processor"], "url": "https://www.vito.be/"}], "stac_extensions": ["https://stac-extensions.github.io/item-assets/v1.0.0/schema.json", "https://stac-extensions.github.io/raster/v1.1.0/schema.json", "https://stac-extensions.github.io/eo/v1.1.0/schema.json"], "stac_version": "1.0.0", "title": "Vegetation Phenology and Productivity parameters, yearly, UTM projection"}, {"description": "[EXPERIMENTAL] Copernicus High Resolution Land Vegetation Phenology and Productivity parameters at 10m on yearly basis from 2017 onwards for EU countries. This collection contains parameters for season 2.", "extent": {"spatial": {"bbox": [[-62.0760771, -21.7894746, 56.138312, 72.0995811]]}, "temporal": {"interval": [["2017-01-01T00:00:00Z", "2024-12-31T23:59:59Z"]]}}, "id": "COPERNICUS_VEGETATION_PHENOLOGY_PRODUCTIVITY_10M_SEASON2", "keywords": ["PPI", "index", "land", "vegetation", "plant", "phenology", "productivity", "growing season", "sentinel"], "license": "proprietary", "links": [{"href": "https://stac.openeo.vito.be/collections/copernicus_r_utm-wgs84_10_m_hrvpp-vpp_p_2017-now_v01/aggregate", "rel": "aggregate", "type": "application/json"}, {"href": "https://stac.openeo.vito.be/collections/copernicus_r_utm-wgs84_10_m_hrvpp-vpp_p_2017-now_v01/aggregations", "rel": "aggregations", "type": "application/json"}, {"href": "https://stac.openeo.vito.be/collections/copernicus_r_utm-wgs84_10_m_hrvpp-vpp_p_2017-now_v01/items", "rel": "items", "type": "application/geo+json"}, {"href": "https://stac.openeo.vito.be/collections/copernicus_r_utm-wgs84_10_m_hrvpp-vpp_p_2017-now_v01/queryables", "rel": "queryables", "type": "application/json"}, {"href": "https://openeofed.dataspace.copernicus.eu/openeo/1.2/collections", "rel": "root"}, {"href": "https://openeofed.dataspace.copernicus.eu/openeo/1.2/collections", "rel": "parent"}, {"href": "https://openeofed.dataspace.copernicus.eu/openeo/1.2/collections/COPERNICUS_VEGETATION_PHENOLOGY_PRODUCTIVITY_10M_SEASON2", "rel": "self"}], "providers": [{"name": "VITO", "roles": ["licensor", "producer", "processor"], "url": "https://www.vito.be/"}], "stac_extensions": ["https://stac-extensions.github.io/item-assets/v1.0.0/schema.json", "https://stac-extensions.github.io/raster/v1.1.0/schema.json", "https://stac-extensions.github.io/eo/v1.1.0/schema.json"], "stac_version": "1.0.0", "title": "Vegetation Phenology and Productivity parameters, yearly, UTM projection"}, {"description": "WorldCover provides global land cover products for 2021 at 10 m resolution, developed and validated in near-real time based on Sentinel-1 and Sentinel-2 data. ", "extent": {"spatial": {"bbox": [[-180.0, -60.0, 180.0, 84.0]]}, "temporal": {"interval": [["2021-01-01T00:00:00Z", "2021-12-31T23:59:59Z"]]}}, "id": "ESA_WORLDCOVER_10M_2021_V2", "keywords": ["VITO", "COPERNICUS", "ESA", "Land Cover", "Sentinel-1", "Sentinel-2", "Environment", "WorldCover"], "license": "CC-BY-4.0", "links": [{"href": "https://esa-worldcover.org/", "rel": "alternate", "title": "Product website"}, {"href": "https://services.terrascope.be/catalogue/description?collection=urn:eop:VITO:ESA_WorldCover_10m_2021_V2", "rel": "alternate", "title": "EO OpenSearch catalog"}, {"href": "https://viewer.esa-worldcover.org/worldcover", "rel": "alternate", "title": "Product Viewer"}, {"href": "https://services.terrascope.be/wmts/v2", "rel": "wmts", "wmts:layer": "WORLDCOVER_2021_MAP"}, {"href": "https://openeofed.dataspace.copernicus.eu/openeo/1.2/collections", "rel": "root"}, {"href": "https://openeofed.dataspace.copernicus.eu/openeo/1.2/collections", "rel": "parent"}, {"href": "https://openeofed.dataspace.copernicus.eu/openeo/1.2/collections/ESA_WORLDCOVER_10M_2021_V2", "rel": "self"}], "providers": [{"name": "VITO", "roles": ["producer"], "url": "https://remotesensing.vito.be/"}, {"name": "ESA", "roles": ["licensor"], "url": "https://esa.int/"}], "stac_extensions": ["https://stac-extensions.github.io/raster/v1.1.0/schema.json", "https://stac-extensions.github.io/eo/v1.1.0/schema.json"], "stac_version": "1.1.0", "title": "Global landcover at 10m resolution for 2021."}, {"description": "SENTINEL-2 is a wide-swath, high-resolution, multi-spectral imaging mission, supporting Copernicus Land Monitoring studies, including the monitoring of vegetation, soil and water cover, as well as observation of inland waterways and coastal areas. The SENTINEL-2 Multispectral Instrument (MSI) samples 13 spectral bands: four bands at 10 metres, six bands at 20 metres and three bands at 60 metres spatial resolution.", "extent": {"spatial": {"bbox": [[-180, -56, 180, 83]]}, "temporal": {"interval": [["2015-07-04T00:00:00Z", null]]}}, "id": "SENTINEL2_L1C", "keywords": ["COPERNICUS", "ESA", "Orthoimagery", "Sentinel-2", "MSI", "Level-2A", "Radiometry", "Plant Resource", "TOC"], "license": "proprietary", "links": [{"href": "https://sentinels.copernicus.eu/documents/247904/690755/Sentinel_Data_Legal_Notice", "rel": "license", "type": "application/pdf"}, {"href": "https://documentation.dataspace.copernicus.eu/Data/SentinelMissions/Sentinel2.html#sentinel-2-level-1c-top-of-atmosphere-toa", "rel": "alternate", "title": "Copernicus dataspace documentation", "type": "application/html"}, {"href": "https://dataspace.copernicus.eu/browser/?zoom=11&lat=45.36638&lng=12.49832&themeId=DEFAULT-THEME&visualizationUrl=https%3A%2F%2Fsh.dataspace.copernicus.eu%2Fogc%2Fwms%2Fa1343b61-3f53-4c92-b65c-0b432b3e7af6&datasetId=S2_L1C_CDAS&fromTime=2023-05-05T00%3A00%3A00.000Z&toTime=2023-05-05T23%3A59%3A59.999Z&layerId=1_TRUE_COLOR&demSource3D=%22MAPZEN%22&cloudCoverage=10", "rel": "browser", "title": "CDSE Data-Browser"}, {"href": "https://sentinel.esa.int/web/sentinel/user-guides/sentinel-2-msi/product-types/level-1c", "rel": "about", "title": "User guide"}, {"href": "https://catalogue.dataspace.copernicus.eu/resto/api/collections/Sentinel2/search.json?cloudCover=[0,10]&productType=S2MSI1C&startDate=2022-06-11&completionDate=2022-06-22&maxRecords=10", "rel": "opensearch"}, {"href": "https://services.sentinel-hub.com/ogc/wmts/ef291c3e-77fd-43f2-a885-dced9ac1e6a7", "rel": "wmts", "title": "Web Map Tile Service", "wmts:dimensions": {"warnings": true}, "wmts:layer": "TRUE-COLOR"}, {"href": "https://openeofed.dataspace.copernicus.eu/openeo/1.2/collections", "rel": "root"}, {"href": "https://openeofed.dataspace.copernicus.eu/openeo/1.2/collections", "rel": "parent"}, {"href": "https://openeofed.dataspace.copernicus.eu/openeo/1.2/collections/SENTINEL2_L1C", "rel": "self"}], "providers": [{"name": "ESA", "roles": ["producer"], "url": "https://esa.int/"}, {"name": "CDSE", "roles": ["processor", "host"], "url": "https://dataspace.copernicus.eu/"}], "stac_extensions": ["https://stac-extensions.github.io/datacube/v2.2.0/schema.json", "https://stac-extensions.github.io/eo/v1.1.0/schema.json"], "stac_version": "0.9.0", "title": "Sentinel-2 L1C"}, {"description": "SENTINEL-2 is a wide-swath, high-resolution, multi-spectral imaging mission, supporting Copernicus Land Monitoring studies, including the monitoring of vegetation, soil and water cover, as well as observation of inland waterways and coastal areas. The SENTINEL-2 Multispectral Instrument (MSI) samples 13 spectral bands: four bands at 10 metres, six bands at 20 metres and three bands at 60 metres spatial resolution.\n The level 2A data is atmospherically corrected using Sen2Cor.", "extent": {"spatial": {"bbox": [[-180, -56, 180, 83]]}, "temporal": {"interval": [["2015-07-04T00:00:00Z", null]]}}, "id": "SENTINEL2_L2A", "keywords": ["COPERNICUS", "ESA", "Orthoimagery", "Sentinel-2", "MSI", "Level-2A", "Radiometry", "Plant Resource", "TOC"], "license": "proprietary", "links": [{"href": "https://sentinels.copernicus.eu/documents/247904/690755/Sentinel_Data_Legal_Notice", "rel": "license", "type": "application/pdf"}, {"href": "https://documentation.dataspace.copernicus.eu/Data/SentinelMissions/Sentinel2.html#sentinel-2-level-2a-top-of-canopy-toc", "rel": "alternate", "type": "application/html"}, {"href": "https://dataspace.copernicus.eu/browser/?zoom=11&lat=45.36638&lng=12.49832&themeId=DEFAULT-THEME&visualizationUrl=https%3A%2F%2Fsh.dataspace.copernicus.eu%2Fogc%2Fwms%2F28b654e7-8912-4e59-9e58-85b58d768b3a&datasetId=S2_L2A_CDAS&fromTime=2023-02-07T00%3A00%3A00.000Z&toTime=2023-02-07T23%3A59%3A59.999Z&layerId=1_TRUE_COLOR&demSource3D=%22MAPZEN%22&cloudCoverage=10", "rel": "browser", "title": "CDSE Data-Browser"}, {"href": "https://catalogue.dataspace.copernicus.eu/resto/api/collections/Sentinel2/search.json?cloudCover=[0,10]&productType=S2MSI2A&startDate=2022-06-11&completionDate=2022-06-22&maxRecords=10", "rel": "opensearch", "title": "Opensearch product query"}, {"href": "https://sentinels.copernicus.eu/web/sentinel/user-guides/sentinel-2-msi/product-types/level-2a", "rel": "about", "title": "User guide"}, {"href": "https://services.sentinel-hub.com/ogc/wmts/7d34803f-511c-4caf-9438-6d72f32c8174", "rel": "wmts", "title": "Web Map Tile Service", "wmts:dimensions": {"warnings": true}, "wmts:layer": "TRUE-COLOR"}, {"href": "https://openeofed.dataspace.copernicus.eu/openeo/1.2/collections", "rel": "root"}, {"href": "https://openeofed.dataspace.copernicus.eu/openeo/1.2/collections", "rel": "parent"}, {"href": "https://openeofed.dataspace.copernicus.eu/openeo/1.2/collections/SENTINEL2_L2A", "rel": "self"}], "providers": [{"name": "ESA", "roles": ["producer"], "url": "https://esa.int/"}, {"name": "CDSE", "roles": ["processor", "host"], "url": "https://dataspace.copernicus.eu/"}], "stac_extensions": ["https://stac-extensions.github.io/datacube/v2.2.0/schema.json", "https://stac-extensions.github.io/eo/v1.1.0/schema.json"], "stac_version": "0.9.0", "title": "Sentinel-2 L2A"}, {"description": "The Sentinel-1 mission provides data from a dual-polarization C-band Synthetic Aperture Radar (SAR) instrument. This collection includes the S1 Ground Range Detected (GRD) scenes, processed to a calibrated, ortho-corrected product. This collection is compatible with \"sar_backscatter\" and \"ard_normalized_radar_backscatter\" processes.", "extent": {"spatial": {"bbox": [[-180, -85, 180, 85]]}, "temporal": {"interval": [["2014-10-03T00:00:00Z", null]]}}, "id": "SENTINEL1_GRD", "keywords": ["raster", "systematic", "satellite imagery", "SAR", "radar", "backscattering", "polarization", "Copernicus", "maritime monitoring", "land monitoring", "disaster response", "open data"], "license": "free", "links": [{"href": "https://sentinel.esa.int/web/sentinel/technical-guides/sentinel-1-sar/products-algorithms/level-1-algorithms/ground-range-detected", "rel": "about", "title": "User guide"}, {"href": "https://catalogue.dataspace.copernicus.eu/resto/api/collections/Sentinel1/search.json?&filter=producttype:GRD", "rel": "opensearch", "title": "OpenSearch product query link"}, {"href": "https://services.sentinel-hub.com/ogc/wmts/113184fa-263a-4bd8-a2d3-0c00fbcef8b5", "rel": "wmts", "wmts:dimensions": {"warnings": true}, "wmts:layer": "SAR-URBAN"}, {"href": "https://sentinels.copernicus.eu/documents/247904/690755/Sentinel_Data_Legal_Notice", "rel": "license", "type": "application/pdf"}, {"href": "https://openeofed.dataspace.copernicus.eu/openeo/1.2/collections", "rel": "root"}, {"href": "https://openeofed.dataspace.copernicus.eu/openeo/1.2/collections", "rel": "parent"}, {"href": "https://openeofed.dataspace.copernicus.eu/openeo/1.2/collections/SENTINEL1_GRD", "rel": "self"}], "providers": [], "stac_extensions": ["https://stac-extensions.github.io/datacube/v2.2.0/schema.json", "https://stac-extensions.github.io/eo/v1.1.0/schema.json"], "stac_version": "0.9.0", "title": "Sentinel-1 SAR GRD: C-band Synthetic Aperture Radar Ground Range Detected."}, {"description": "Copernicus Global 30 meter Digital Elevation Model dataset.", "extent": {"spatial": {"bbox": [[-180, -90, 180, 90]]}, "temporal": {"interval": [["2010-12-12T00:00:00Z", null]]}}, "id": "COPERNICUS_30", "license": "proprietary", "links": [{"href": "https://doi.org/10.5270/ESA-c5d3d65", "rel": "cite-as"}, {"href": "https://spacedata.copernicus.eu/documents/20123/121286/CSCDA_ESA_Mission-specific+Annex_31_Oct_22.pdf/fb109818-56ad-bbee-053c-d972aed25ce6?t=1674741175657", "rel": "license", "type": "application/pdf"}, {"href": "https://services.terrascope.be/wmts/v2", "rel": "wmts", "wmts:layer": "COP_DEM_GLO_30M_COG"}, {"href": "https://openeofed.dataspace.copernicus.eu/openeo/1.2/collections", "rel": "root"}, {"href": "https://openeofed.dataspace.copernicus.eu/openeo/1.2/collections", "rel": "parent"}, {"href": "https://openeofed.dataspace.copernicus.eu/openeo/1.2/collections/COPERNICUS_30", "rel": "self"}], "providers": [], "stac_extensions": ["https://stac-extensions.github.io/datacube/v2.2.0/schema.json", "https://stac-extensions.github.io/eo/v1.1.0/schema.json"], "stac_version": "0.9.0", "title": "Copernicus Global 30 meter Digital Elevation Model dataset."}, {"description": "Landsat-8 OLI/TIRS L2SP refers to the Level-2 Surface Reflectance product acquired by the Operational Land Imager (OLI) and Thermal Infrared Sensor (TIRS) instrument on board Landsat 8 satellite. This product is derived from the Landsat-8 OLI/TIRS L1T or L1TP product and is generated using atmospheric correction algorithms to remove atmospheric effects and convert the top-of-atmosphere reflectance to surface reflectance values.\n\n This is Landsat 8 Collection 2 European Coverage, so does not correspond to the full Landsat archive.", "extent": {"spatial": {"bbox": [[-20, -35, 35, 75]]}, "temporal": {"interval": [["2015-01-01T00:00:00Z", null]]}}, "id": "LANDSAT8_L2", "license": "proprietary", "links": [{"href": "https://d9-wret.s3.us-west-2.amazonaws.com/assets/palladium/production/s3fs-public/atoms/files/Landsat_Data_Policy.pdf", "rel": "license", "type": "application/pdf"}, {"href": "https://catalogue.dataspace.copernicus.eu/resto/api/collections/Landsat8/search.json?productType=L2SP", "rel": "opensearch", "title": "CDSE OpenSearch product query link"}, {"href": "https://documentation.dataspace.copernicus.eu/Data/Landsat8.html#landsat-8-olitirs_l2sp", "rel": "alternate", "title": "CDSE documentation page", "type": "application/html"}, {"href": "https://earth.esa.int/eogateway/catalog/landsat-8-collection-2-european-coverage", "rel": "about", "title": "User guide", "type": "application/html"}, {"href": "https://openeofed.dataspace.copernicus.eu/openeo/1.2/collections", "rel": "root"}, {"href": "https://openeofed.dataspace.copernicus.eu/openeo/1.2/collections", "rel": "parent"}, {"href": "https://openeofed.dataspace.copernicus.eu/openeo/1.2/collections/LANDSAT8_L2", "rel": "self"}], "providers": [{"name": "U.S. Geological Survey (USGS) Earth Resources Observation and Science (EROS) Center", "roles": ["producer", "processor"], "url": "https://eros.usgs.gov/"}, {"name": "CDSE", "roles": ["host"], "url": "https://dataspace.copernicus.eu/"}], "stac_extensions": ["https://stac-extensions.github.io/datacube/v2.2.0/schema.json", "https://stac-extensions.github.io/eo/v1.1.0/schema.json"], "stac_version": "0.9.0", "title": "Landsat 8 level 2 ARD, European Coverage"}, {"description": "[Experimental] Sentinel-3  SYNERGY products are created from a combination of OLCI and SLSTR Level-1B products (including both\nnadir and oblique views). The SYNERGY swath is then corresponding to the common area between OLCI\nand SLSTR swaths, restricted to the daylight part of the SENTINEL-3 orbit (i.e., where the sun zenith angle\nat satellite ground track is lower than 80\u00b0).\n ", "extent": {"spatial": {"bbox": [[-180, -90, 180, 90]]}, "temporal": {"interval": [["2016-04-17T11:33:13Z", null]]}}, "id": "SENTINEL3_SYN_L2_SYN", "keywords": ["COPERNICUS", "ESA", "Sentinel-3", "SYN"], "license": "proprietary", "links": [{"href": "https://sentinels.copernicus.eu/documents/247904/690755/Sentinel_Data_Legal_Notice", "rel": "license", "type": "application/pdf"}, {"href": "https://documentation.dataspace.copernicus.eu/Data/SentinelMissions/Sentinel3.html#sentinel-3-syn-level-2", "rel": "alternate", "title": "Data space collection documentation", "type": "application/html"}, {"href": "https://sentinels.copernicus.eu/web/sentinel/user-guides/sentinel-3-synergy/product-types/level-2-syn", "rel": "about", "title": "User guide"}, {"href": "https://catalogue.dataspace.copernicus.eu/resto/api/collections/Sentinel3/search.json?productType=SY_2_SYN___", "rel": "opensearch", "title": "Catalog API"}, {"href": "https://openeofed.dataspace.copernicus.eu/openeo/1.2/collections", "rel": "root"}, {"href": "https://openeofed.dataspace.copernicus.eu/openeo/1.2/collections", "rel": "parent"}, {"href": "https://openeofed.dataspace.copernicus.eu/openeo/1.2/collections/SENTINEL3_SYN_L2_SYN", "rel": "self"}], "providers": [{"name": "ESA", "roles": ["producer"], "url": "https://esa.int/"}, {"name": "CDSE", "roles": ["processor", "host"], "url": "https://dataspace.copernicus.eu/"}], "stac_extensions": ["https://stac-extensions.github.io/datacube/v2.2.0/schema.json", "https://stac-extensions.github.io/eo/v1.1.0/schema.json"], "stac_version": "0.9.0", "title": "Daily global Sentinel-3 Synergy products at 300m resolution combining OCLI and SLSTR bands."}, {"description": "*Experimental* Daily global Sentinel-3 land surface temperature at 1km resolution. Land surface temperature is defined as the effective radiometric temperature of the Earth's surface \"skin\" in the instrument field of view. Here, \"skin\" is referring to the top surface in bare soil conditions and to the effective emitting temperature of vegetation \"canopies\" as determined from a view of the top of a canopy.\n This product is derived from the SLSTR (Sea and Land Surface Temperature Radiometer) instrument on board the Sentinel-3 satellite.\n\n Multiple observations may be available per day, we recommend temporal aggregation to create daily composites. ", "extent": {"spatial": {"bbox": [[-180, -90, 180, 90]]}, "temporal": {"interval": [["2016-04-17T11:33:13Z", null]]}}, "id": "SENTINEL3_SLSTR_L2_LST", "keywords": ["COPERNICUS", "ESA", "Sentinel-3", "SLSTR"], "license": "proprietary", "links": [{"href": "https://sentinels.copernicus.eu/documents/247904/690755/Sentinel_Data_Legal_Notice", "rel": "license", "type": "application/pdf"}, {"href": "https://documentation.dataspace.copernicus.eu/Data/SentinelMissions/Sentinel3.html#sentinel-3-slstr-level-2", "rel": "alternate", "title": "Data space collection documentation", "type": "application/html"}, {"href": "https://sentiwiki.copernicus.eu/web/slstr-products#S3-SLSTR-Products-L2-LST-Products", "rel": "about", "title": "User guide"}, {"href": "https://catalogue.dataspace.copernicus.eu/resto/api/collections/Sentinel3/search.json?productType=SL_2_LST___", "rel": "opensearch", "title": "Catalog API"}, {"href": "https://sentiwiki.copernicus.eu/__attachments/1672112/S3IPF.PDS.005.2%20-%20Sentinel%203%20SLSTR%20Product%20Data%20Format%20Specification%20Level%202%20Land%202020%20-%202.9.pdf", "rel": "about", "title": "Handbook", "type": "application/pdf"}, {"href": "https://github.com/Open-EO/openeo-community-examples/blob/main/python/Heatwave/HeatwaveNL.ipynb", "rel": "example", "title": "Heatwave example"}, {"href": "https://openeofed.dataspace.copernicus.eu/openeo/1.2/collections", "rel": "root"}, {"href": "https://openeofed.dataspace.copernicus.eu/openeo/1.2/collections", "rel": "parent"}, {"href": "https://openeofed.dataspace.copernicus.eu/openeo/1.2/collections/SENTINEL3_SLSTR_L2_LST", "rel": "self"}], "providers": [{"name": "ESA", "roles": ["producer"], "url": "https://esa.int/"}, {"name": "CDSE", "roles": ["processor", "host"], "url": "https://dataspace.copernicus.eu/"}], "stac_extensions": ["https://stac-extensions.github.io/datacube/v2.2.0/schema.json", "https://stac-extensions.github.io/eo/v1.1.0/schema.json"], "stac_version": "0.9.0", "title": "Daily global Sentinel-3 Land surface temperature at 1km resolution"}, {"description": "[EXPERIMENTAL] Vegetation Indices (VI) at 10m resolution.", "extent": {"spatial": {"bbox": [[0, 0, 0, 0]]}, "temporal": {"interval": [[null, null]]}}, "id": "COPERNICUS_VEGETATION_INDICES", "license": "proprietary", "links": [{"href": "https://openeofed.dataspace.copernicus.eu/openeo/1.2/collections", "rel": "root"}, {"href": "https://openeofed.dataspace.copernicus.eu/openeo/1.2/collections", "rel": "parent"}, {"href": "https://openeofed.dataspace.copernicus.eu/openeo/1.2/collections/COPERNICUS_VEGETATION_INDICES", "rel": "self"}], "stac_extensions": ["https://stac-extensions.github.io/datacube/v2.2.0/schema.json", "https://stac-extensions.github.io/eo/v1.1.0/schema.json"], "stac_version": "0.9.0"}, {"description": "[EXPERIMENTAL] Sentinel-1 monthly mosaics are generated from monthly stacks of Sentinel-1 GRD data by calculating the weighted sum of the terrain corrected backscatter observations. Two different Sentinel-1 mosaics are being produced for each month: IW mosaic and DH mosaic.", "extent": {"spatial": {"bbox": [[-180, -90, 180, 90]]}, "temporal": {"interval": [["2023-01-01T00:00:00Z", "2023-12-01T00:00:00Z"]]}}, "id": "SENTINEL1_GLOBAL_MOSAICS", "keywords": ["raster", "systematic", "satellite imagery", "SAR", "radar", "backscattering", "polarization", "Copernicus", "maritime monitoring", "land monitoring", "disaster response", "open data"], "license": "proprietary", "links": [{"href": "https://sentinels.copernicus.eu/documents/247904/690755/Sentinel_Data_Legal_Notice", "rel": "license", "type": "application/pdf"}, {"href": "https://documentation.dataspace.copernicus.eu/Data/SentinelMissions/Sentinel1.html#sentinel-1-level-3-monthly-mosaics", "rel": "alternate", "title": "Data space collection documentation", "type": "application/html"}, {"href": "https://catalogue.dataspace.copernicus.eu/resto/api/collections/GLOBAL-MOSAICS/search.json?platform=SENTINEL-1", "rel": "opensearch", "title": "Catalog API"}, {"href": "https://openeofed.dataspace.copernicus.eu/openeo/1.2/collections", "rel": "root"}, {"href": "https://openeofed.dataspace.copernicus.eu/openeo/1.2/collections", "rel": "parent"}, {"href": "https://openeofed.dataspace.copernicus.eu/openeo/1.2/collections/SENTINEL1_GLOBAL_MOSAICS", "rel": "self"}], "providers": [{"name": "CDSE", "roles": ["host"], "url": "https://dataspace.copernicus.eu/"}], "stac_extensions": ["https://stac-extensions.github.io/datacube/v2.2.0/schema.json", "https://stac-extensions.github.io/eo/v1.1.0/schema.json"], "stac_version": "0.9.0", "title": "Sentinel 1 Monthly Mosaics"}, {"description": "This collection provides Sentinel-3 OLCI Level-2 Land Full Resolution products containing data on global vegetation, chlorophyll, and water vapor.", "extent": {"spatial": {"bbox": [[-180, -90, 180, 90]]}, "temporal": {"interval": [["2016-04-25T11:33:47Z", null]]}}, "id": "SENTINEL3_OLCI_L2_LAND", "keywords": ["Sentinel", "Copernicus", "ESA", "Satellite", "Global", "Land", "Biomass"], "license": "proprietary", "links": [{"href": "https://catalogue.dataspace.copernicus.eu/resto/api/collections/Sentinel3/search.json?status=ONLINE&dataset=ESA-DATASET&productType=OL_2_LFR___&maxRecords=10", "rel": "opensearch", "title": "Product catalog query", "type": "application/json"}, {"href": "https://sentiwiki.copernicus.eu/web/olci-products#OLCIProducts-L2LandProductsS3-OLCI-Products-L2-Land", "rel": "about", "title": "Sentinel-3 Land Wiki", "type": "text/html"}, {"href": "https://sentinel.esa.int/documents/247904/690755/Sentinel_Data_Legal_Notice", "rel": "license", "title": "Legal notice on the use of Copernicus Sentinel Data and Service Information", "type": "application/pdf"}, {"href": "https://openeofed.dataspace.copernicus.eu/openeo/1.2/collections", "rel": "root"}, {"href": "https://openeofed.dataspace.copernicus.eu/openeo/1.2/collections", "rel": "parent"}, {"href": "https://openeofed.dataspace.copernicus.eu/openeo/1.2/collections/SENTINEL3_OLCI_L2_LAND", "rel": "self"}], "providers": [{"name": "ESA", "roles": ["producer", "licensor"], "url": "https://sentinel.esa.int/web/sentinel/missions/sentinel-3"}, {"name": "CDSE", "roles": ["processor", "host"], "url": "https://dataspace.copernicus.eu/"}], "stac_extensions": ["https://stac-extensions.github.io/datacube/v2.2.0/schema.json", "https://stac-extensions.github.io/eo/v1.1.0/schema.json"], "stac_version": "0.9.0", "title": "Sentinel-3 OLCI Land Full Resolution (NRT)"}, {"description": "OLCI Level 2 Marine products provide spectral information on the colour of the oceans (water reflectances). These radiometric products are used to estimate geophysical parameters e.g. estimates of phytoplankton biomass through determining the Chlorophyll-a (Chl) concentration. In coastal areas, they also allow monitoring of the sediment load via the Total Suspended Matter (TSM) product. Full resolution products are at a nominal 300m resolution.", "extent": {"spatial": {"bbox": [[-180, -90, 180, 90]]}, "temporal": {"interval": [["2017-11-01T00:07:01Z", null]]}}, "id": "SENTINEL3_OLCI_L2_WATER", "keywords": ["Sentinel", "Copernicus", "ESA", "Satellite", "Global", "Water", "Ocean"], "license": "proprietary", "links": [{"href": "https://user.eumetsat.int/s3/eup-strapi-media/Product_Data_Format_Specification_OLCI_Level_2_Marine_c156a327d1.pdf", "rel": "about", "title": "Product Data Format Specification OLCI Level 2 Marine", "type": "application/pdf"}, {"href": "http://doi.org/10.15770/EUM_SEC_CLM_0061", "rel": "cite-as", "title": "EUMETSAT for Copernicus (2022): OLCI Level 2 Ocean Colour Full Resolution (version BC003) - Sentinel-3 - Reprocessed, European Organisation for the Exploitation of Meteorological Satellites, DOI: 10.15770/EUM_SEC_CLM_0061.", "type": "text/html"}, {"href": "https://catalogue.dataspace.copernicus.eu/resto/api/collections/Sentinel3/search.json?status=ONLINE&dataset=ESA-DATASET&productType=OL_2_WFR___&maxRecords=10", "rel": "opensearch", "title": "Product catalog query", "type": "application/json"}, {"href": "https://sentiwiki.copernicus.eu/web/olci-products#OLCIProducts-L2WaterProductsS3-OLCI-Products-L2-Water", "rel": "about", "title": "Sentinel-3 Water Wiki", "type": "text/html"}, {"href": "https://sentinel.esa.int/documents/247904/690755/Sentinel_Data_Legal_Notice", "rel": "license", "title": "Legal notice on the use of Copernicus Sentinel Data and Service Information", "type": "application/pdf"}, {"href": "https://openeofed.dataspace.copernicus.eu/openeo/1.2/collections", "rel": "root"}, {"href": "https://openeofed.dataspace.copernicus.eu/openeo/1.2/collections", "rel": "parent"}, {"href": "https://openeofed.dataspace.copernicus.eu/openeo/1.2/collections/SENTINEL3_OLCI_L2_WATER", "rel": "self"}], "providers": [{"name": "ESA", "roles": ["producer", "licensor"], "url": "https://sentinel.esa.int/web/sentinel/missions/sentinel-3"}, {"name": "CDSE", "roles": ["processor", "host"], "url": "https://dataspace.copernicus.eu/"}], "stac_extensions": ["https://stac-extensions.github.io/datacube/v2.2.0/schema.json", "https://stac-extensions.github.io/eo/v1.1.0/schema.json"], "stac_version": "0.9.0", "title": "Sentinel-3 OLCI Water Full Resolution (NRT)"}, {"description": "This Collection provides the Sentinel-3 Synergy Level-2 Aerosol Optical Depth product, which is a downstream development of the Sentinel-2 Level-1 OLCI FR and SLSTR Radiances and Brightness Temperatures products. The dataset provides both retrieved and diagnostic global aerosol parameters at super-pixel (4.5 km x 4.5 km) resolution for all regions over land and ocean free of snow/ice cover, excluding high cloud fraction data.", "extent": {"spatial": {"bbox": [[-180, -90, 180, 90]]}, "temporal": {"interval": [["2020-04-16T19:36:28Z", null]]}}, "id": "SENTINEL3_SYN_L2_AOD", "keywords": ["Sentinel", "Copernicus", "ESA", "Satellite", "Global", "Atmosphere"], "license": "proprietary", "links": [{"href": "https://catalogue.dataspace.copernicus.eu/resto/api/collections/Sentinel3/search.json?status=ONLINE&dataset=ESA-DATASET&productType=SY_2_AOD___&maxRecords=10", "rel": "opensearch", "title": "Product catalog query", "type": "application/json"}, {"href": "https://sentiwiki.copernicus.eu/web/synergy-products#SYNERGYProducts-L2AODProductsS3-Synergy-Products-L2-AOD-Products", "rel": "about", "title": "Sentinel-3 AOD Wiki", "type": "text/html"}, {"href": "https://sentinel.esa.int/documents/247904/690755/Sentinel_Data_Legal_Notice", "rel": "license", "title": "Legal notice on the use of Copernicus Sentinel Data and Service Information", "type": "application/pdf"}, {"href": "https://openeofed.dataspace.copernicus.eu/openeo/1.2/collections", "rel": "root"}, {"href": "https://openeofed.dataspace.copernicus.eu/openeo/1.2/collections", "rel": "parent"}, {"href": "https://openeofed.dataspace.copernicus.eu/openeo/1.2/collections/SENTINEL3_SYN_L2_AOD", "rel": "self"}], "providers": [{"name": "ESA", "roles": ["producer", "licensor"], "url": "https://sentinel.esa.int/web/sentinel/missions/sentinel-3"}, {"name": "CDSE", "roles": ["processor", "host"], "url": "https://dataspace.copernicus.eu/"}], "stac_extensions": ["https://stac-extensions.github.io/datacube/v2.2.0/schema.json", "https://stac-extensions.github.io/eo/v1.1.0/schema.json"], "stac_version": "0.9.0", "title": "Sentinel-3 SYNERGY Aerosol Optical Depth"}, {"description": "The WorldCereal active cropland products provide binary maps for all growing seasons as defined by the WorldCereal global crop calendars, showing where active cropland has been detected. Seasonal active cropland is defined by the WorldCereal system as actively cultivated cropland during a specific growing season. In order for a pixel to be labeled as active during a particular growing season, a full crop growth cycle (sowing, growing, senescence and harvesting) needs to take place within the designated time period. Note that this active marker is not crop-type specific and only consider specific seasonality. This also means in practice that any crop grown (slightly) outside the predefined growing seasons will not be flagged as active cropland in any of the seasons covered by these products. The WorldCereal active cropland products were generated within the respective annual temporary crops mask.", "extent": {"spatial": {"bbox": [[-180.0, -90.0, 180.0, 90.0]]}, "temporal": {"interval": [["2020-01-01T00:00:00Z", "2021-12-31T00:00:00Z"]]}}, "id": "ESA_WORLDCEREAL_ACTIVECROPLAND", "keywords": ["VITO", "COPERNICUS", "ESA", "WorldCereal", "Sentinel-2", "Environment", "Cropland", "Agriculture"], "license": "CC-BY-4.0", "links": [{"href": "https://services.terrascope.be/collectioncatalogue/srv/eng/catalog.search#/metadata/urn:eop:VITO:ESA_WORLDCEREAL_ACTIVECROPLAND_V1", "rel": "alternate", "title": "Collection Catalogue Entry"}, {"href": "https://esa-worldcereal.org/en", "rel": "alternate", "title": "Online Information Website"}, {"href": "https://services.terrascope.be/catalogue/catalogue/description.geojson?collection=urn:eop:VITO:ESA_WORLDCEREAL_ACTIVECROPLAND_V1", "rel": "alternate", "title": "OpenSearch entry point"}, {"href": "https://openeofed.dataspace.copernicus.eu/openeo/1.2/collections", "rel": "root"}, {"href": "https://openeofed.dataspace.copernicus.eu/openeo/1.2/collections", "rel": "parent"}, {"href": "https://openeofed.dataspace.copernicus.eu/openeo/1.2/collections/ESA_WORLDCEREAL_ACTIVECROPLAND", "rel": "self"}], "providers": [{"name": "ESA", "roles": ["licensor"], "url": "https://esa-worldcereal.org"}, {"description": "VITO remote sensing lead the consortium that produced the WorldCereal product on behalf of ESA. VITO also hosts the resulting archive.", "name": "VITO", "processing:level": "L4", "processing:software": {"WorldCereal": "1.0"}, "roles": ["producer", "host"]}], "stac_extensions": ["https://stac-extensions.github.io/datacube/v2.2.0/schema.json", "https://stac-extensions.github.io/eo/v1.1.0/schema.json"], "stac_version": "0.9.0", "title": "ESA WorldCereal active cropland"}, {"description": "WorldCereal irrigation, globally, at 10m resolution in specific seasons throughout the year. \n\n##Seasons\n\n The date of observations in this collection is the end date of the season. This start date varies depending on the agro-ecological zone. WorldCereal defines these seasons:\n * wintercereals\n* maize main \n* maize second\n ", "extent": {"spatial": {"bbox": [[-180.0, -90.0, 180.0, 90.0]]}, "temporal": {"interval": [["2020-01-01T00:00:00Z", "2021-12-31T00:00:00Z"]]}}, "id": "ESA_WORLDCEREAL_IRRIGATION", "keywords": ["VITO", "COPERNICUS", "ESA", "WorldCereal", "LANSDAT-8", "TIR", "Sentinel-2", "Environment", "Irrigation"], "license": "CC-BY-4.0", "links": [{"href": "https://esa-worldcereal.org", "rel": "alternate", "title": "Product web page."}, {"href": "https://openeofed.dataspace.copernicus.eu/openeo/1.2/collections", "rel": "root"}, {"href": "https://openeofed.dataspace.copernicus.eu/openeo/1.2/collections", "rel": "parent"}, {"href": "https://openeofed.dataspace.copernicus.eu/openeo/1.2/collections/ESA_WORLDCEREAL_IRRIGATION", "rel": "self"}], "providers": [{"name": "ESA", "roles": ["licensor"], "url": "https://esa-worldcereal.org"}, {"description": "VITO remote sensing lead the consortium that produced the WorldCereal product on behalf of ESA. VITO also hosts the resulting archive.", "name": "VITO", "processing:level": "L4", "processing:software": {"WorldCereal": "1.0"}, "roles": ["producer", "host"]}], "stac_extensions": ["https://stac-extensions.github.io/datacube/v2.2.0/schema.json", "https://stac-extensions.github.io/eo/v1.1.0/schema.json"], "stac_version": "0.9.0", "title": "ESA WorldCereal irrigation"}, {"description": "Pixel-based, binary classification product at 10m spatial resolution distinguishing annual cropland from all other types of land cover. Annual cropland is defined according to the JECAM 2018 definition, in short: A piece of land that is sowed/planted and harvestable at least once within the 12 months after the sowing/planting date. The annual cropland produces an herbaceous cover which should reach a coverage of 30% and can be combined with some tree or woody vegetation not exceeding a coverage of 20%.Exception 1: Sugarcane and cassava, although perennial crops, are explicitly included.Exception 2: Frequently harvested, annual and/or perennial fodder crops such as grasslands and alfalfa are explicitly excluded.Exception 3: Greenhouse crops are excluded. This product is generated within one month after the end of the main growing season and looks back one year in time.", "extent": {"spatial": {"bbox": [[-180.00446428571428, -59.9955357, 179.9955357, 80.0044643]]}, "temporal": {"interval": [["2020-09-12T00:00:00Z", "2021-12-20T00:00:00Z"]]}}, "id": "ESA_WORLDCEREAL_TEMPORARYCROPS", "keywords": ["VITO", "COPERNICUS", "ESA", "WorldCereal", "Sentinel-1", "Sentinel-2", "Environment", "Cropland", "Agriculture"], "license": "CC-BY-4.0", "links": [{"href": "https://esa-worldcereal.org", "rel": "alternate", "title": "Product web page."}, {"href": "https://openeofed.dataspace.copernicus.eu/openeo/1.2/collections", "rel": "root"}, {"href": "https://openeofed.dataspace.copernicus.eu/openeo/1.2/collections", "rel": "parent"}, {"href": "https://openeofed.dataspace.copernicus.eu/openeo/1.2/collections/ESA_WORLDCEREAL_TEMPORARYCROPS", "rel": "self"}], "providers": [{"name": "ESA", "roles": ["licensor"], "url": "https://esa-worldcereal.org"}, {"description": "VITO remote sensing lead the consortium that produced the WorldCereal product on behalf of ESA. VITO also hosts the resulting archive.", "name": "VITO", "processing:level": "L4", "processing:software": {"WorldCereal": "1.0"}, "roles": ["producer", "host"]}], "stac_extensions": ["https://stac-extensions.github.io/datacube/v2.2.0/schema.json", "https://stac-extensions.github.io/eo/v1.1.0/schema.json"], "stac_version": "0.9.0", "title": "ESA WorldCereal temporary crops"}, {"description": "WorldCereal winter cereals, globally, at 10m resolution in specific seasons throughout the year. \n\n##Seasons\n\n The date of observations in this collection is the end date of the season. This start date varies depending on the agro-ecological zone. WorldCereal defines these seasons:\n * wintercereals\n* maize main \n* maize second\n ", "extent": {"spatial": {"bbox": [[-180.00446428571428, -59.9955357, 179.9955357, 80.0044643]]}, "temporal": {"interval": [["2020-09-12T00:00:00Z", "2021-12-20T00:00:00Z"]]}}, "id": "ESA_WORLDCEREAL_WINTERCEREALS", "keywords": ["VITO", "COPERNICUS", "ESA", "WorldCereal", "Sentinel-1", "Sentinel-2", "Environment", "Wintercereals", "Agriculture"], "license": "CC-BY-4.0", "links": [{"href": "https://esa-worldcereal.org", "rel": "alternate", "title": "Product web page."}, {"href": "https://openeofed.dataspace.copernicus.eu/openeo/1.2/collections", "rel": "root"}, {"href": "https://openeofed.dataspace.copernicus.eu/openeo/1.2/collections", "rel": "parent"}, {"href": "https://openeofed.dataspace.copernicus.eu/openeo/1.2/collections/ESA_WORLDCEREAL_WINTERCEREALS", "rel": "self"}], "providers": [{"name": "ESA", "roles": ["licensor"], "url": "https://esa-worldcereal.org"}, {"description": "VITO remote sensing lead the consortium that produced the WorldCereal product on behalf of ESA. VITO also hosts the resulting archive.", "name": "VITO", "processing:level": "L4", "processing:software": {"WorldCereal": "1.0"}, "roles": ["producer", "host"]}], "stac_extensions": ["https://stac-extensions.github.io/datacube/v2.2.0/schema.json", "https://stac-extensions.github.io/eo/v1.1.0/schema.json"], "stac_version": "0.9.0", "title": "ESA WorldCereal winter cereals"}, {"description": "WorldCereal maize, globally, at 10m resolution in specific seasons throughout the year. \n\n ##Seasons\n\n The date of observations in this collection is the end date of the season. This start date varies depending on the agro-ecological zone. WorldCereal defines these seasons:\n * wintercereals\n* maize main \n* maize second\n ", "extent": {"spatial": {"bbox": [[-180.00446428571428, -59.9955357, 179.9955357, 80.0044643]]}, "temporal": {"interval": [["2020-09-12T00:00:00Z", "2021-12-20T00:00:00Z"]]}}, "id": "ESA_WORLDCEREAL_MAIZE", "keywords": ["VITO", "COPERNICUS", "ESA", "WorldCereal", "Sentinel-1", "Sentinel-2", "Environment", "Maize", "Agriculture"], "license": "CC-BY-4.0", "links": [{"href": "https://esa-worldcereal.org", "rel": "alternate", "title": "Product web page."}, {"href": "https://openeofed.dataspace.copernicus.eu/openeo/1.2/collections", "rel": "root"}, {"href": "https://openeofed.dataspace.copernicus.eu/openeo/1.2/collections", "rel": "parent"}, {"href": "https://openeofed.dataspace.copernicus.eu/openeo/1.2/collections/ESA_WORLDCEREAL_MAIZE", "rel": "self"}], "providers": [{"name": "ESA", "roles": ["licensor"], "url": "https://esa-worldcereal.org"}, {"description": "VITO remote sensing lead the consortium that produced the WorldCereal product on behalf of ESA. VITO also hosts the resulting archive.", "name": "VITO", "processing:level": "L4", "processing:software": {"WorldCereal": "1.0"}, "roles": ["producer", "host"]}], "stac_extensions": ["https://stac-extensions.github.io/datacube/v2.2.0/schema.json", "https://stac-extensions.github.io/eo/v1.1.0/schema.json"], "stac_version": "0.9.0", "title": "ESA WorldCereal maize"}, {"description": "WorldCereal spring cereals, globally, at 10m resolution in specific seasons throughout the year. \n\n##Seasons\n\n The date of observations in this collection is the end date of the season. This start date varies depending on the agro-ecological zone. WorldCereal defines these seasons:\n * wintercereals\n* maize main \n* maize second\n ", "extent": {"spatial": {"bbox": [[-180.00446428571428, -59.9955357, 179.9955357, 80.0044643]]}, "temporal": {"interval": [["2020-09-12T00:00:00Z", "2021-12-20T00:00:00Z"]]}}, "id": "ESA_WORLDCEREAL_SPRINGCEREALS", "keywords": ["VITO", "COPERNICUS", "ESA", "WorldCereal", "Sentinel-1", "Sentinel-2", "Environment", "Springcereals", "Agriculture"], "license": "CC-BY-4.0", "links": [{"href": "https://esa-worldcereal.org", "rel": "alternate", "title": "Product web page."}, {"href": "https://openeofed.dataspace.copernicus.eu/openeo/1.2/collections", "rel": "root"}, {"href": "https://openeofed.dataspace.copernicus.eu/openeo/1.2/collections", "rel": "parent"}, {"href": "https://openeofed.dataspace.copernicus.eu/openeo/1.2/collections/ESA_WORLDCEREAL_SPRINGCEREALS", "rel": "self"}], "providers": [{"name": "ESA", "roles": ["licensor"], "url": "https://esa-worldcereal.org"}, {"description": "VITO remote sensing lead the consortium that produced the WorldCereal product on behalf of ESA. VITO also hosts the resulting archive.", "name": "VITO", "processing:level": "L4", "processing:software": {"WorldCereal": "1.0"}, "roles": ["producer", "host"]}], "stac_extensions": ["https://stac-extensions.github.io/datacube/v2.2.0/schema.json", "https://stac-extensions.github.io/eo/v1.1.0/schema.json"], "stac_version": "0.9.0", "title": "ESA WorldCereal spring cereals"}, {"description": "Global GDMP (Gross Dry Matter Productivity) at 300m resolution, 10-daily.", "extent": {"spatial": {"bbox": [[-180.0014880952381, -59.9985119, 179.9985119, 80.00148809523809]]}, "temporal": {"interval": [["2014-01-01T00:00:00Z", null]]}}, "id": "CGLS_GDMP300_V1_GLOBAL", "keywords": ["VITO", "Copernicus", "Orthoimagery", "PROBA-V", "SENTINEL-3", "OLCI", "Level-3", "Radiometry", "Plant Resource", "Productivity", "global", "10-daily"], "license": "free", "links": [{"href": "https://land.copernicus.eu/global/products/dmp", "rel": "alternate", "title": "Product web page."}, {"href": "https://openeofed.dataspace.copernicus.eu/openeo/1.2/collections", "rel": "root"}, {"href": "https://openeofed.dataspace.copernicus.eu/openeo/1.2/collections", "rel": "parent"}, {"href": "https://openeofed.dataspace.copernicus.eu/openeo/1.2/collections/CGLS_GDMP300_V1_GLOBAL", "rel": "self"}], "stac_extensions": ["https://stac-extensions.github.io/datacube/v2.2.0/schema.json", "https://stac-extensions.github.io/eo/v1.1.0/schema.json"], "stac_version": "0.9.0", "title": "Copernicus Global Land GDMP (Gross Dry Matter Productivity) product V1, 300m resolution, 10-daily"}, {"description": "Global GDMP (Gross dry matter productivity) at 1km resolution, 10-daily. ", "extent": {"spatial": {"bbox": [[-180.00446428571428, -59.9955357, 179.9955357, 80.0044643]]}, "temporal": {"interval": [["1998-04-01T00:00:00Z", "2020-07-01T00:00:00Z"]]}}, "id": "CGLS_GDMP_V2_GLOBAL", "keywords": ["VITO", "Copernicus", "Orthoimagery", "SPOT", "VEGETATION", "PROBA-V", "Level-3", "Radiometry", "Plant Resource", "Productivity", "global", "10-daily"], "license": "free", "links": [{"href": "https://land.copernicus.eu/global/products/dmp", "rel": "alternate", "title": "Product web page."}, {"href": "https://openeofed.dataspace.copernicus.eu/openeo/1.2/collections", "rel": "root"}, {"href": "https://openeofed.dataspace.copernicus.eu/openeo/1.2/collections", "rel": "parent"}, {"href": "https://openeofed.dataspace.copernicus.eu/openeo/1.2/collections/CGLS_GDMP_V2_GLOBAL", "rel": "self"}], "stac_extensions": ["https://stac-extensions.github.io/datacube/v2.2.0/schema.json", "https://stac-extensions.github.io/eo/v1.1.0/schema.json"], "stac_version": "0.9.0", "title": "Copernicus Global Land GDMP (Gross dry matter productivity) product V2, 1km resolution, 10-daily"}, {"description": "Global LAI at 300m resolution, 10-daily. The Leaf Area Index is defined as half the total area of green elements of the canopy per unit horizontal ground area. The satellite-derived value corresponds to the total green LAI of all the canopy layers, including the understory which may represent a very significant contribution, particularly for forests. Practically, the LAI quantifies the thickness of the vegetation cover.", "extent": {"spatial": {"bbox": [[-180.0014880952381, -59.9985119, 179.9985119, 80.00148809523809]]}, "temporal": {"interval": [["2014-01-10T00:00:00Z", null]]}}, "id": "CGLS_LAI300_V1_GLOBAL", "keywords": ["VITO", "Copernicus", "Orthoimagery", "PROBA-V", "SENTINEL-3", "OLCI", "Level-3", "Radiometry", "Plant Resource", "Leaf area", "global", "10-daily"], "license": "free", "links": [{"href": "https://land.copernicus.eu/global/products/lai", "rel": "alternate", "title": "Product web page."}, {"href": "https://openeofed.dataspace.copernicus.eu/openeo/1.2/collections", "rel": "root"}, {"href": "https://openeofed.dataspace.copernicus.eu/openeo/1.2/collections", "rel": "parent"}, {"href": "https://openeofed.dataspace.copernicus.eu/openeo/1.2/collections/CGLS_LAI300_V1_GLOBAL", "rel": "self"}], "stac_extensions": ["https://stac-extensions.github.io/datacube/v2.2.0/schema.json", "https://stac-extensions.github.io/eo/v1.1.0/schema.json"], "stac_version": "0.9.0", "title": "Copernicus Global Land LAI product V1, 300m resolution, 10-daily"}, {"description": "Global FCOVER at 300m resolution, 10-daily. ", "extent": {"spatial": {"bbox": [[-180.0014880952381, -59.9985119, 179.9985119, 80.00148809523809]]}, "temporal": {"interval": [["2014-01-01T00:00:00Z", null]]}}, "id": "CGLS_FCOVER300_V1_GLOBAL", "keywords": ["VITO", "Copernicus", "Orthoimagery", "PROBA-V", "SENTINEL-3", "OLCI", "Level-3", "Radiometry", "Plant Resource", "Green cover", "global", "10-daily"], "license": "free", "links": [{"href": "https://land.copernicus.eu/global/products/fcover", "rel": "alternate", "title": "Product web page."}, {"href": "https://openeofed.dataspace.copernicus.eu/openeo/1.2/collections", "rel": "root"}, {"href": "https://openeofed.dataspace.copernicus.eu/openeo/1.2/collections", "rel": "parent"}, {"href": "https://openeofed.dataspace.copernicus.eu/openeo/1.2/collections/CGLS_FCOVER300_V1_GLOBAL", "rel": "self"}], "stac_extensions": ["https://stac-extensions.github.io/datacube/v2.2.0/schema.json", "https://stac-extensions.github.io/eo/v1.1.0/schema.json"], "stac_version": "0.9.0", "title": "Copernicus Global Land FCOVER product V1, 300m resolution, 10-daily"}, {"description": "Global FAPAR at 300m resolution, 10-daily. The FAPAR quantifies the fraction of the solar radiation absorbed by live leaves for the photosynthesis activity. Then, it refers only to the green and alive elements of the canopy. The FAPAR depends on the canopy structure, vegetation element optical properties, atmospheric conditions, and angular configuration. To overcome this latter dependency, a daily integrated FAPAR value is assessed.\n\nFAPAR is recognized as an Essential Climate Variable (ECV) by the Global Climate Observing System (GCOS).", "extent": {"spatial": {"bbox": [[-180.0014880952381, -59.9985119, 179.9985119, 80.00148809523809]]}, "temporal": {"interval": [["2014-01-01T00:00:00Z", null]]}}, "id": "CGLS_FAPAR300_V1_GLOBAL", "keywords": ["VITO", "Copernicus", "Orthoimagery", "PROBA-V", "SENTINEL-3", "OLCI", "Level-3", "Radiometry", "Plant Resource", "Photosynthesis", "Radiation", "global", "10-daily"], "license": "free", "links": [{"href": "https://land.copernicus.eu/global/products/fapar", "rel": "alternate", "title": "Product web page."}, {"href": "https://openeofed.dataspace.copernicus.eu/openeo/1.2/collections", "rel": "root"}, {"href": "https://openeofed.dataspace.copernicus.eu/openeo/1.2/collections", "rel": "parent"}, {"href": "https://openeofed.dataspace.copernicus.eu/openeo/1.2/collections/CGLS_FAPAR300_V1_GLOBAL", "rel": "self"}], "stac_extensions": ["https://stac-extensions.github.io/datacube/v2.2.0/schema.json", "https://stac-extensions.github.io/eo/v1.1.0/schema.json"], "stac_version": "0.9.0", "title": "Copernicus Global Land fAPAR product V1, 300m resolution, 10-daily"}, {"description": "Global NDVI at 300m resolution, 10-daily. The Normalized Difference Vegetation Index (NDVI) is an indicator of the greenness of the biomes. As such, it is closely linked to the FAPAR. The CGLS Collection 300m NDVI V2 product is based on data from the Sentinel-3A and -3B OLCI sensor.", "extent": {"spatial": {"bbox": [[-180.0014880952381, -59.9985119, 179.9985119, 80.00148809523809]]}, "temporal": {"interval": [["2020-07-01T00:00:00Z", null]]}}, "id": "CGLS_NDVI300_V2_GLOBAL", "keywords": ["VITO", "Copernicus", "Orthoimagery", "SENTINEL-3", "OLCI", "Level-3", "Radiometry", "Plant Resource", "NDVI", "global", "10-daily"], "license": "free", "links": [{"href": "https://land.copernicus.eu/global/products/ndvi", "rel": "alternate", "title": "Product web page."}, {"href": "https://openeofed.dataspace.copernicus.eu/openeo/1.2/collections", "rel": "root"}, {"href": "https://openeofed.dataspace.copernicus.eu/openeo/1.2/collections", "rel": "parent"}, {"href": "https://openeofed.dataspace.copernicus.eu/openeo/1.2/collections/CGLS_NDVI300_V2_GLOBAL", "rel": "self"}], "stac_extensions": ["https://stac-extensions.github.io/datacube/v2.2.0/schema.json", "https://stac-extensions.github.io/eo/v1.1.0/schema.json"], "stac_version": "0.9.0", "title": "Copernicus Global Land NDVI product V2, 300m resolution, 10-daily"}, {"description": "The Sentinel-3, Level 2 Synergy VG1 products (SY_2_VG1) contain 1 km VEGETATION-like TOC reflectances and NDVI. The '1 km VEGETATION-like product' label means that measurements are provided on a regular latitude-longitude grid, with an equatorial sampling distance of approximately 1 km (1\u00b0 / 112). The NDVI is provided, derived from surface reflectances in B2 and B3.", "extent": {"spatial": {"bbox": [[-180.0, -56.0, 180.0, 75]]}, "temporal": {"interval": [["2020-07-01T00:00:00Z", null]]}}, "id": "SENTINEL3_SYNERGY_VG1", "keywords": ["VITO", "Orthoimagery", "plant resource", "TOC", "SYN", "OLCI", "SLSTR", "radiometry", "sentinel", "Sentinel-3", "ESA", "VGT-S1 like"], "license": "proprietary", "links": [{"href": "https://services.terrascope.be/collectioncatalogue/srv/eng/catalog.search#/metadata/urn:eop:VITO:TERRASCOPE_S3_SY_2_VG1_V1", "rel": "alternate", "title": "Collection Catalogue Entry"}, {"href": "https://docs.terrascope.be/#/DataProducts/Sentinel-3/ProductsOverview", "rel": "alternate", "title": "Online User Documentation"}, {"href": "https://services.terrascope.be/catalogue/catalogue/description.geojson?collection=urn:eop:VITO:TERRASCOPE_S3_SY_2_VG1_V1", "rel": "alternate", "title": "OpenSearch entry point"}, {"href": "https://openeofed.dataspace.copernicus.eu/openeo/1.2/collections", "rel": "root"}, {"href": "https://openeofed.dataspace.copernicus.eu/openeo/1.2/collections", "rel": "parent"}, {"href": "https://openeofed.dataspace.copernicus.eu/openeo/1.2/collections/SENTINEL3_SYNERGY_VG1", "rel": "self"}], "stac_extensions": ["https://stac-extensions.github.io/datacube/v2.2.0/schema.json", "https://stac-extensions.github.io/eo/v1.1.0/schema.json"], "stac_version": "0.9.0", "title": "Sentinel-3 Level 2 Synergy 1 km VEGETATION-Like daily synthesis TOC reflectance and NDVI  - V1"}, {"description": "The Sentinel-3, Level 2 Synergy V10 products (SY_2_V10) contain 1 km VEGETATION-like TOC reflectances and NDVI. The '1 km VEGETATION-like product' label means that measurements are provided on a regular latitude-longitude grid, with an equatorial sampling distance of approximately 1 km (1\u00b0 / 112). The NDVI is provided, derived from surface reflectances in B2 and B3.", "extent": {"spatial": {"bbox": [[-180.0, -56.0, 180.0, 75]]}, "temporal": {"interval": [["2020-07-01T00:00:00Z", null]]}}, "id": "SENTINEL3_SYNERGY_VG10", "keywords": ["VITO", "Orthoimagery", "plant resource", "TOC", "SYN", "OLCI", "SLSTR", "radiometry", "sentinel", "Sentinel-3", "ESA", "VGT-S10 like"], "license": "proprietary", "links": [{"href": "https://services.terrascope.be/collectioncatalogue/srv/eng/catalog.search#/metadata/urn:eop:VITO:TERRASCOPE_S3_SY_2_V10_V1", "rel": "alternate", "title": "Collection Catalogue Entry"}, {"href": "https://docs.terrascope.be/#/DataProducts/Sentinel-3/ProductsOverview", "rel": "alternate", "title": "Online User Documentation"}, {"href": "https://services.terrascope.be/catalogue/catalogue/description.geojson?collection=urn:eop:VITO:TERRASCOPE_S3_SY_2_V10_V1", "rel": "alternate", "title": "OpenSearch entry point"}, {"href": "https://openeofed.dataspace.copernicus.eu/openeo/1.2/collections", "rel": "root"}, {"href": "https://openeofed.dataspace.copernicus.eu/openeo/1.2/collections", "rel": "parent"}, {"href": "https://openeofed.dataspace.copernicus.eu/openeo/1.2/collections/SENTINEL3_SYNERGY_VG10", "rel": "self"}], "stac_extensions": ["https://stac-extensions.github.io/datacube/v2.2.0/schema.json", "https://stac-extensions.github.io/eo/v1.1.0/schema.json"], "stac_version": "0.9.0", "title": "Sentinel-3 Level 2 Synergy 1 km VEGETATION-Like 10-daily synthesis TOC reflectance and NDVI  - V1"}, {"description": "FAPAR Level-3 product at 10m resolution. Covers selected areas globally. This FAPAR is derived directly from ESA L2A products. The FAPAR quantifies the fraction of the solar radiation absorbed by live leaves for the photosynthesis activity. Then, it refers only to the green and alive elements of the canopy. The FAPAR depends on the canopy structure, vegetation element optical properties, atmospheric conditions, and angular configuration. \n\nFAPAR is recognized as an Essential Climate Variable (ECV) by the Global Climate Observing System (GCOS).", "extent": {"spatial": {"bbox": [[-180, -56, 180, 83]]}, "temporal": {"interval": [["2015-07-06T00:00:00Z", null]]}}, "id": "TERRASCOPE_S2_FAPAR_V2", "keywords": ["VITO", "TERRASCOPE", "COPERNICUS", "ESA", "Orthoimagery", "Sentinel-2", "MSI", "Level-3", "Radiometry", "Plant Resource", "FAPAR"], "license": "proprietary", "links": [{"href": "https://sentinel.esa.int/documents/247904/690755/Sentinel_Data_Legal_Notice", "rel": "license"}, {"href": "https://services.terrascope.be/catalogue/description?collection=urn:eop:VITO:TERRASCOPE_S2_FAPAR_V2", "rel": "alternate"}, {"href": "https://viewer.terrascope.be/?language=nl&bbox=0.9339867511378304,50.14520994379217,6.207424251137831,51.77292299745045&overlay=false&bgLayer=MapBox&date=2019-02-25T03:17:15.000Z&layer=CGS_S2_FAPAR", "rel": "alternate", "title": "Terrascope Viewer"}, {"href": "https://services.terrascope.be/wmts/v2", "rel": "wmts", "wmts:layer": "CGS_S2_FAPAR"}, {"href": "https://openeofed.dataspace.copernicus.eu/openeo/1.2/collections", "rel": "root"}, {"href": "https://openeofed.dataspace.copernicus.eu/openeo/1.2/collections", "rel": "parent"}, {"href": "https://openeofed.dataspace.copernicus.eu/openeo/1.2/collections/TERRASCOPE_S2_FAPAR_V2", "rel": "self"}], "providers": [{"name": "VITO, on behalf of the Belgian Science Policy Office (BELSPO).", "roles": ["producer", "licensor"], "url": "https://terrascope.be"}], "stac_extensions": ["https://stac-extensions.github.io/datacube/v2.2.0/schema.json", "https://stac-extensions.github.io/eo/v1.1.0/schema.json"], "stac_version": "0.9.0", "title": "Sentinel-2 FAPAR, last 2 years over Europe + selected areas, by Terrascope."}, {"description": "NDVI Level-3 product at 10m resolution. Covers selected areas globally. This NDVI is derived directly from ESA L2A products.", "extent": {"spatial": {"bbox": [[-180, -56, 180, 83]]}, "temporal": {"interval": [["2015-07-06T00:00:00Z", null]]}}, "id": "TERRASCOPE_S2_NDVI_V2", "keywords": ["VITO", "TERRASCOPE", "COPERNICUS", "ESA", "Orthoimagery", "Sentinel-2", "MSI", "Level-3", "Radiometry", "Plant Resource", "NDVI"], "license": "proprietary", "links": [{"href": "https://sentinel.esa.int/documents/247904/690755/Sentinel_Data_Legal_Notice", "rel": "license"}, {"href": "https://services.terrascope.be/catalogue/description?collection=urn:eop:VITO:TERRASCOPE_S2_NDVI_V2", "rel": "alternate"}, {"href": "https://viewer.terrascope.be/?language=nl&bbox=0.9339867511378304,50.14520994379217,6.207424251137831,51.77292299745045&overlay=false&bgLayer=MapBox&date=2019-02-25T03:17:15.000Z&layer=CGS_S2_NDVI", "rel": "alternate"}, {"href": "https://services.terrascope.be/wmts/v2", "rel": "wmts", "wmts:layer": "CGS_S2_NDVI"}, {"href": "https://openeofed.dataspace.copernicus.eu/openeo/1.2/collections", "rel": "root"}, {"href": "https://openeofed.dataspace.copernicus.eu/openeo/1.2/collections", "rel": "parent"}, {"href": "https://openeofed.dataspace.copernicus.eu/openeo/1.2/collections/TERRASCOPE_S2_NDVI_V2", "rel": "self"}], "providers": [{"name": "VITO, on behalf of the Belgian Science Policy Office (BELSPO).", "roles": ["producer", "licensor"], "url": "https://terrascope.be"}], "stac_extensions": ["https://stac-extensions.github.io/datacube/v2.2.0/schema.json", "https://stac-extensions.github.io/eo/v1.1.0/schema.json"], "stac_version": "0.9.0", "title": "Sentinel-2 NDVI last 2 years over Europe + selected areas, by Terrascope."}, {"description": "Leaf area index Level-3 product at 10m resolution. Covers selected areas globally. This LAI is derived directly from ESA L2A products.", "extent": {"spatial": {"bbox": [[-180, -56, 180, 83]]}, "temporal": {"interval": [["2015-07-06T00:00:00Z", null]]}}, "id": "TERRASCOPE_S2_LAI_V2", "keywords": ["VITO", "TERRASCOPE", "COPERNICUS", "ESA", "Orthoimagery", "Sentinel-2", "MSI", "Level-3", "Radiometry", "Plant Resource", "LAI"], "license": "proprietary", "links": [{"href": "https://sentinel.esa.int/documents/247904/690755/Sentinel_Data_Legal_Notice", "rel": "license"}, {"href": "https://services.terrascope.be/catalogue/description?collection=urn:eop:VITO:TERRASCOPE_S2_LAI_V2", "rel": "alternate"}, {"href": "https://docs.terrascope.be/#/DataProducts/Sentinel-2/Biopar/Biopar?id=vegetation-indicators", "rel": "alternate", "title": "Product documentation"}, {"href": "https://viewer.terrascope.be/?language=nl&bbox=0.9339867511378304,50.14520994379217,6.207424251137831,51.77292299745045&overlay=false&bgLayer=MapBox&date=2019-02-25T03:17:15.000Z&layer=CGS_S2_LAI", "rel": "alternate"}, {"href": "https://services.terrascope.be/wmts/v2", "rel": "wmts", "wmts:layer": "CGS_S2_LAI"}, {"href": "https://openeofed.dataspace.copernicus.eu/openeo/1.2/collections", "rel": "root"}, {"href": "https://openeofed.dataspace.copernicus.eu/openeo/1.2/collections", "rel": "parent"}, {"href": "https://openeofed.dataspace.copernicus.eu/openeo/1.2/collections/TERRASCOPE_S2_LAI_V2", "rel": "self"}], "providers": [{"name": "VITO, on behalf of the Belgian Science Policy Office (BELSPO).", "roles": ["producer", "licensor"], "url": "https://terrascope.be"}], "stac_extensions": ["https://stac-extensions.github.io/datacube/v2.2.0/schema.json", "https://stac-extensions.github.io/eo/v1.1.0/schema.json"], "stac_version": "0.9.0", "title": "Sentinel-2 LAI last 2 years over Europe + selected areas, by Terrascope."}, {"description": "PROBA-V S10-TOC \u2013 10-daily global composites, Top-Of-Canopy, 300m resolution (Collection 2)", "extent": {"spatial": {"bbox": [[-180.0014881, -64.9985119, 179.9985119, 75.0014881]]}, "temporal": {"interval": [["2013-10-11T00:00:00Z", "2021-10-21T00:00:00Z"]]}}, "id": "PROBAV_L3_S10_TOC_333M", "keywords": ["VITO", "TERRASCOPE", "ESA", "Orthoimagery", "PROBA-V", "Level-3", "Radiometry", "Environment", "TOC"], "license": "proprietary", "links": [{"href": "https://services.terrascope.be/wmts/v2", "rel": "wmts", "wmts:layer": "PROBAV_L3_S10_TOC_333M_RADIOMETRY"}, {"href": "https://openeofed.dataspace.copernicus.eu/openeo/1.2/collections", "rel": "root"}, {"href": "https://openeofed.dataspace.copernicus.eu/openeo/1.2/collections", "rel": "parent"}, {"href": "https://openeofed.dataspace.copernicus.eu/openeo/1.2/collections/PROBAV_L3_S10_TOC_333M", "rel": "self"}], "providers": [{"name": "VITO, on behalf of the Belgian Science Policy Office (BELSPO).", "roles": ["producer", "licensor"], "url": "http://proba-v.vgt.vito.be"}], "stac_extensions": ["https://stac-extensions.github.io/datacube/v2.2.0/schema.json", "https://stac-extensions.github.io/eo/v1.1.0/schema.json"], "stac_version": "0.9.0", "title": "PROBA-V S10 TOC 300 m COG: Decadal synthesis of S1's as Maximum Value Compositing (MVC), COG format - Collection 2"}, {"description": "PROBA-V S5-TOC \u2013 5-daily global composites, Top-Of-Canopy, 100m resolution (Collection 2)", "extent": {"spatial": {"bbox": [[-179.999, -56, 179.999, 75]]}, "temporal": {"interval": [["2013-10-16T00:00:00Z", "2020-06-30T00:00:00Z"]]}}, "id": "PROBAV_L3_S5_TOC_100M", "keywords": ["VITO", "TERRASCOPE", "ESA", "Orthoimagery", "PROBA-V", "Level-3", "Radiometry", "Environment", "TOC"], "license": "proprietary", "links": [{"href": "https://services.terrascope.be/wmts/v2", "rel": "wmts", "wmts:layer": "PROBAV_L3_S5_TOC_100M_RADIOMETRY"}, {"href": "https://openeofed.dataspace.copernicus.eu/openeo/1.2/collections", "rel": "root"}, {"href": "https://openeofed.dataspace.copernicus.eu/openeo/1.2/collections", "rel": "parent"}, {"href": "https://openeofed.dataspace.copernicus.eu/openeo/1.2/collections/PROBAV_L3_S5_TOC_100M", "rel": "self"}], "providers": [{"name": "VITO, on behalf of the Belgian Science Policy Office (BELSPO).", "roles": ["producer", "licensor"], "url": "http://proba-v.vgt.vito.be"}], "stac_extensions": ["https://stac-extensions.github.io/datacube/v2.2.0/schema.json", "https://stac-extensions.github.io/eo/v1.1.0/schema.json"], "stac_version": "0.9.0", "title": "PROBA-V S5 TOC 100 m COG: Data corrected for atmospheric effects with the SMAC (Simplified Method for Atmosheric Corrections) algorithm, COG format - Collection 2"}, {"description": "PROBA-V S1-TOC \u2013 daily global composites, Top-Of-Canopy, 100m resolution (Collection 2)", "extent": {"spatial": {"bbox": [[-179.999, -56, 179.999, 75]]}, "temporal": {"interval": [["2014-03-12T00:00:00Z", "2021-10-31T00:00:00Z"]]}}, "id": "PROBAV_L3_S1_TOC_100M", "keywords": ["VITO", "TERRASCOPE", "ESA", "Orthoimagery", "PROBA-V", "Level-3", "Radiometry", "Environment", "TOC"], "license": "proprietary", "links": [{"href": "https://services.terrascope.be/wmts/v2", "rel": "wmts", "wmts:layer": "PROBAV_S1_TOC_100M_COG_V2"}, {"href": "https://openeofed.dataspace.copernicus.eu/openeo/1.2/collections", "rel": "root"}, {"href": "https://openeofed.dataspace.copernicus.eu/openeo/1.2/collections", "rel": "parent"}, {"href": "https://openeofed.dataspace.copernicus.eu/openeo/1.2/collections/PROBAV_L3_S1_TOC_100M", "rel": "self"}], "providers": [{"name": "VITO, on behalf of the Belgian Science Policy Office (BELSPO).", "roles": ["producer", "licensor"], "url": "http://proba-v.vgt.vito.be"}], "stac_extensions": ["https://stac-extensions.github.io/datacube/v2.2.0/schema.json", "https://stac-extensions.github.io/eo/v1.1.0/schema.json"], "stac_version": "0.9.0", "title": "PROBA-V S1 TOC 100 m COG: Data corrected for atmospheric effects with the SMAC (Simplified Method for Atmosheric Corrections) algorithm, COG format - Collection 2"}, {"description": "PROBA-V S1-TOC \u2013 daily global composites, Top-Of-Canopy, 333m resolution (Collection 2)", "extent": {"spatial": {"bbox": [[-179.999, -56, 179.999, 75]]}, "temporal": {"interval": [["2013-10-15T00:00:00Z", "2021-10-31T00:00:00Z"]]}}, "id": "PROBAV_L3_S1_TOC_333M", "keywords": ["VITO", "TERRASCOPE", "ESA", "Orthoimagery", "PROBA-V", "Level-3", "Radiometry", "Environment", "TOC"], "license": "proprietary", "links": [{"href": "https://services.terrascope.be/wmts/v2", "rel": "wmts", "wmts:layer": "PROBAV_S1_TOC_333M_COG_V2"}, {"href": "https://openeofed.dataspace.copernicus.eu/openeo/1.2/collections", "rel": "root"}, {"href": "https://openeofed.dataspace.copernicus.eu/openeo/1.2/collections", "rel": "parent"}, {"href": "https://openeofed.dataspace.copernicus.eu/openeo/1.2/collections/PROBAV_L3_S1_TOC_333M", "rel": "self"}], "providers": [{"name": "VITO, on behalf of the Belgian Science Policy Office (BELSPO).", "roles": ["producer", "licensor"], "url": "http://proba-v.vgt.vito.be"}], "stac_extensions": ["https://stac-extensions.github.io/datacube/v2.2.0/schema.json", "https://stac-extensions.github.io/eo/v1.1.0/schema.json"], "stac_version": "0.9.0", "title": "PROBA-V S1 TOC 300 m COG: Data corrected for atmospheric effects with the SMAC (Simplified Method for Atmosheric Corrections) algorithm, COG format - Collection 2"}, {"description": "Contains binned Level-2 TROPOMI NO2 retrievals. The L3 binning algorithm weighs individual pixels with the overlap area of the pixel and the Level-3 grid cell. The weighing and count vectors are used to apply this weighted average consistently, see http://stcorp.github.io/harp/doc/html/libharp_product.html? ", "extent": {"spatial": {"bbox": [[-180.0, -89.0, 180.0, 89.0]]}, "temporal": {"interval": [["2018-07-01T00:00:00Z", null]]}}, "id": "TERRASCOPE_S5P_L3_NO2_TD", "keywords": ["VITO", "TERRASCOPE", "COPERNICUS", "ESA", "Orthoimagery", "Sentinel-5P", "TROPOMI", "Level-3", "Atmospheric Components", "NO2", "Day"], "license": "proprietary", "links": [{"href": "https://sentinel.esa.int/documents/247904/690755/Sentinel_Data_Legal_Notice", "rel": "license"}, {"href": "https://services.terrascope.be/wmts/v2", "rel": "wmts", "wmts:layer": "TERRASCOPE_S5P_L3_NO2_TD_V2"}, {"href": "https://services.terrascope.be/collectioncatalogue/srv/eng/catalog.search#/metadata/urn:eop:VITO:TERRASCOPE_S5P_L3_NO2_TD_V2", "rel": "alternate", "title": "Collection Catalogue Entry"}, {"href": "https://services.terrascope.be/catalogue/catalogue/description.geojson?collection=urn:eop:VITO:TERRASCOPE_S5P_L3_NO2_TD_V2", "rel": "alternate", "title": "OpenSearch entry point"}, {"href": "https://openeofed.dataspace.copernicus.eu/openeo/1.2/collections", "rel": "root"}, {"href": "https://openeofed.dataspace.copernicus.eu/openeo/1.2/collections", "rel": "parent"}, {"href": "https://openeofed.dataspace.copernicus.eu/openeo/1.2/collections/TERRASCOPE_S5P_L3_NO2_TD", "rel": "self"}], "stac_extensions": ["https://stac-extensions.github.io/datacube/v2.2.0/schema.json", "https://stac-extensions.github.io/eo/v1.1.0/schema.json"], "stac_version": "0.9.0", "title": "Sentinel-5P Level-3 NO2 Daily Product - V2"}, {"description": "Monthly NO2 composites, based on Sentinel-5p data.", "extent": {"spatial": {"bbox": [[-180.0, -89.0, 180.0, 89.0]]}, "temporal": {"interval": [["2018-07-01T00:00:00Z", null]]}}, "id": "TERRASCOPE_S5P_L3_NO2_TM", "keywords": ["VITO", "TERRASCOPE", "COPERNICUS", "ESA", "Orthoimagery", "Sentinel-5P", "TROPOMI", "Level-3", "Atmospheric Components", "NO2", "Month"], "license": "proprietary", "links": [{"href": "https://sentinel.esa.int/documents/247904/690755/Sentinel_Data_Legal_Notice", "rel": "license"}, {"href": "https://services.terrascope.be/wmts/v2", "rel": "wmts", "wmts:layer": "TERRASCOPE_S5P_L3_NO2_TM_V2"}, {"href": "https://services.terrascope.be/collectioncatalogue/srv/eng/catalog.search#/metadata/urn:eop:VITO:TERRASCOPE_S5P_L3_NO2_TM_V2", "rel": "alternate", "title": "Collection Catalogue Entry"}, {"href": "https://services.terrascope.be/catalogue/catalogue/description.geojson?collection=urn:eop:VITO:TERRASCOPE_S5P_L3_NO2_TM_V2", "rel": "alternate", "title": "OpenSearch entry point"}, {"href": "https://openeofed.dataspace.copernicus.eu/openeo/1.2/collections", "rel": "root"}, {"href": "https://openeofed.dataspace.copernicus.eu/openeo/1.2/collections", "rel": "parent"}, {"href": "https://openeofed.dataspace.copernicus.eu/openeo/1.2/collections/TERRASCOPE_S5P_L3_NO2_TM", "rel": "self"}], "providers": [{"name": "VITO, on behalf of the Belgian Science Policy Office (BELSPO).", "roles": ["producer", "licensor"], "url": "https://terrascope.be"}], "stac_extensions": ["https://stac-extensions.github.io/datacube/v2.2.0/schema.json", "https://stac-extensions.github.io/eo/v1.1.0/schema.json"], "stac_version": "0.9.0", "title": "Sentinel-5P Level-3 NO2 Monthly Product V2"}, {"description": "Yearly NO2 composites, based on Sentinel-5p data.", "extent": {"spatial": {"bbox": [[-180, -89, 180, 89]]}, "temporal": {"interval": [["2019-01-01T00:00:00Z", null]]}}, "id": "TERRASCOPE_S5P_L3_NO2_TY", "keywords": ["VITO", "TERRASCOPE", "COPERNICUS", "ESA", "Orthoimagery", "Sentinel-5P", "TROPOMI", "Level-3", "Atmospheric Components", "NO2", "Year"], "license": "proprietary", "links": [{"href": "https://sentinel.esa.int/documents/247904/690755/Sentinel_Data_Legal_Notice", "rel": "license"}, {"href": "https://services.terrascope.be/wmts/v2", "rel": "wmts", "wmts:layer": "TERRASCOPE_S5P_L3_NO2_TY_V2"}, {"href": "https://services.terrascope.be/collectioncatalogue/srv/eng/catalog.search#/metadata/urn:eop:VITO:TERRASCOPE_S5P_L3_NO2_TY_V2", "rel": "alternate", "title": "Collection Catalogue Entry"}, {"href": "https://services.terrascope.be/catalogue/catalogue/description.geojson?collection=urn:eop:VITO:TERRASCOPE_S5P_L3_NO2_TY_V2", "rel": "alternate", "title": "OpenSearch entry point"}, {"href": "https://openeofed.dataspace.copernicus.eu/openeo/1.2/collections", "rel": "root"}, {"href": "https://openeofed.dataspace.copernicus.eu/openeo/1.2/collections", "rel": "parent"}, {"href": "https://openeofed.dataspace.copernicus.eu/openeo/1.2/collections/TERRASCOPE_S5P_L3_NO2_TY", "rel": "self"}], "providers": [{"name": "VITO, on behalf of the Belgian Science Policy Office (BELSPO).", "roles": ["producer", "licensor"], "url": "https://terrascope.be"}], "stac_extensions": ["https://stac-extensions.github.io/datacube/v2.2.0/schema.json", "https://stac-extensions.github.io/eo/v1.1.0/schema.json"], "stac_version": "0.9.0", "title": "Sentinel-5P Level-3 NO2 Yearly Product - V2"}, {"description": "Sentinel-5P daily carbon monoxide binned into a 0.05\u00b0x0.05\u00b0 grid.\n\nCarbon monoxide (CO) is an important atmospheric trace gas for our understanding of tropospheric chemistry. In certain urban areas, it is a major atmospheric pollutant. Its main sources are fossil fuel combustion, biomass burning, and atmospheric oxidation of methane (CH4) and other hydrocarbons. While fossil fuel combustion is the main CO source at northern mid-latitudes, isoprene and biomass burning oxidation play an important role in the tropics.", "extent": {"spatial": {"bbox": [[-180.0, -89.0, 180.0, 89.0]]}, "temporal": {"interval": [["2018-07-01T00:00:00Z", null]]}}, "id": "TERRASCOPE_S5P_L3_CO_TD", "keywords": ["VITO", "TERRASCOPE", "COPERNICUS", "ESA", "Orthoimagery", "Sentinel-5P", "TROPOMI", "Level-3", "Atmospheric Components", "CO", "Day"], "license": "proprietary", "links": [{"href": "https://sentinel.esa.int/documents/247904/690755/Sentinel_Data_Legal_Notice", "rel": "license"}, {"href": "https://services.terrascope.be/wmts/v2", "rel": "wmts", "wmts:layer": "TERRASCOPE_S5P_L3_CO_TD_V2"}, {"href": "https://services.terrascope.be/collectioncatalogue/srv/eng/catalog.search#/metadata/urn:eop:VITO:TERRASCOPE_S5P_L3_CO_TD_V2", "rel": "alternate", "title": "Collection Catalogue Entry"}, {"href": "https://services.terrascope.be/catalogue/catalogue/description.geojson?collection=urn:eop:VITO:TERRASCOPE_S5P_L3_CO_TD_V2", "rel": "alternate", "title": "OpenSearch entry point"}, {"href": "https://openeofed.dataspace.copernicus.eu/openeo/1.2/collections", "rel": "root"}, {"href": "https://openeofed.dataspace.copernicus.eu/openeo/1.2/collections", "rel": "parent"}, {"href": "https://openeofed.dataspace.copernicus.eu/openeo/1.2/collections/TERRASCOPE_S5P_L3_CO_TD", "rel": "self"}], "stac_extensions": ["https://stac-extensions.github.io/datacube/v2.2.0/schema.json", "https://stac-extensions.github.io/eo/v1.1.0/schema.json"], "stac_version": "0.9.0", "title": "Sentinel-5P Level-3 CO Daily Product - V2"}, {"description": "Sentinel-5P monthly carbon monoxide binned into a 0.05\u00b0x0.05\u00b0 grid.\n\nCarbon monoxide (CO) is an important atmospheric trace gas for our understanding of tropospheric chemistry. In certain urban areas, it is a major atmospheric pollutant. Its main sources are fossil fuel combustion, biomass burning, and atmospheric oxidation of methane (CH4) and other hydrocarbons. While fossil fuel combustion is the main CO source at northern mid-latitudes, isoprene and biomass burning oxidation play an important role in the tropics.", "extent": {"spatial": {"bbox": [[-180.0, -89.0, 180.0, 89.0]]}, "temporal": {"interval": [["2018-07-01T00:00:00Z", null]]}}, "id": "TERRASCOPE_S5P_L3_CO_TM", "keywords": ["VITO", "TERRASCOPE", "COPERNICUS", "ESA", "Orthoimagery", "Sentinel-5P", "TROPOMI", "Level-3", "Atmospheric Components", "CO", "Month"], "license": "proprietary", "links": [{"href": "https://sentinel.esa.int/documents/247904/690755/Sentinel_Data_Legal_Notice", "rel": "license"}, {"href": "https://services.terrascope.be/wmts/v2", "rel": "wmts", "wmts:layer": "TERRASCOPE_S5P_L3_CO_TM_V2"}, {"href": "https://services.terrascope.be/collectioncatalogue/srv/eng/catalog.search#/metadata/urn:eop:VITO:TERRASCOPE_S5P_L3_CO_TM_V2", "rel": "alternate", "title": "Collection Catalogue Entry"}, {"href": "https://services.terrascope.be/catalogue/catalogue/description.geojson?collection=urn:eop:VITO:TERRASCOPE_S5P_L3_CO_TM_V2", "rel": "alternate", "title": "OpenSearch entry point"}, {"href": "https://openeofed.dataspace.copernicus.eu/openeo/1.2/collections", "rel": "root"}, {"href": "https://openeofed.dataspace.copernicus.eu/openeo/1.2/collections", "rel": "parent"}, {"href": "https://openeofed.dataspace.copernicus.eu/openeo/1.2/collections/TERRASCOPE_S5P_L3_CO_TM", "rel": "self"}], "providers": [{"name": "VITO, on behalf of the Belgian Science Policy Office (BELSPO).", "roles": ["producer", "licensor"], "url": "https://terrascope.be"}], "stac_extensions": ["https://stac-extensions.github.io/datacube/v2.2.0/schema.json", "https://stac-extensions.github.io/eo/v1.1.0/schema.json"], "stac_version": "0.9.0", "title": "Sentinel-5P Level-3 CO Monthly Product - V2"}, {"description": "Contains binned Level-2 TROPOMI CO retrievals. The L3 binning algorithm weighs individual pixels with the overlap area of the pixel and the Level-3 grid cell. The weighing and count vectors are used to apply this weighted average consistently, see http://stcorp.github.io/harp/doc/html/libharp_product.html? ", "extent": {"spatial": {"bbox": [[-180.0, -89.0, 180.0, 89.0]]}, "temporal": {"interval": [["2018-07-01T00:00:00Z", null]]}}, "id": "TERRASCOPE_S5P_L3_CO_TY", "keywords": ["VITO", "TERRASCOPE", "COPERNICUS", "ESA", "Orthoimagery", "Sentinel-5P", "TROPOMI", "Level-3", "Atmospheric Components", "CO", "Year"], "license": "proprietary", "links": [{"href": "https://sentinel.esa.int/documents/247904/690755/Sentinel_Data_Legal_Notice", "rel": "license"}, {"href": "https://services.terrascope.be/wmts/v2", "rel": "wmts", "wmts:layer": "TERRASCOPE_S5P_L3_CO_TY_V2"}, {"href": "https://services.terrascope.be/collectioncatalogue/srv/eng/catalog.search#/metadata/urn:eop:VITO:TERRASCOPE_S5P_L3_CO_TY_V2", "rel": "alternate", "title": "Collection Catalogue Entry"}, {"href": "https://services.terrascope.be/catalogue/catalogue/description.geojson?collection=urn:eop:VITO:TERRASCOPE_S5P_L3_CO_TY_V2", "rel": "alternate", "title": "OpenSearch entry point"}, {"href": "https://openeofed.dataspace.copernicus.eu/openeo/1.2/collections", "rel": "root"}, {"href": "https://openeofed.dataspace.copernicus.eu/openeo/1.2/collections", "rel": "parent"}, {"href": "https://openeofed.dataspace.copernicus.eu/openeo/1.2/collections/TERRASCOPE_S5P_L3_CO_TY", "rel": "self"}], "stac_extensions": ["https://stac-extensions.github.io/datacube/v2.2.0/schema.json", "https://stac-extensions.github.io/eo/v1.1.0/schema.json"], "stac_version": "0.9.0", "title": "Sentinel-5P Level-3 CO Yearly Product - V2"}, {"description": "Contains binned Level-2 TROPOMI HCHO retrievals. The L3 binning algorithm weighs individual pixels with the overlap area of the pixel and the Level-3 grid cell. The weighing and count vectors are used to apply this weighted average consistently, see http://stcorp.github.io/harp/doc/html/libharp_product.html? ", "extent": {"spatial": {"bbox": [[-180.0, -89.0, 180.0, 89.0]]}, "temporal": {"interval": [["2018-07-01T00:00:00Z", null]]}}, "id": "TERRASCOPE_S5P_L3_HCHO_TD", "keywords": ["VITO", "TERRASCOPE", "COPERNICUS", "ESA", "Orthoimagery", "Sentinel-5P", "TROPOMI", "Level-3", "Atmospheric Components", "HCHO", "Day"], "license": "proprietary", "links": [{"href": "https://sentinel.esa.int/documents/247904/690755/Sentinel_Data_Legal_Notice", "rel": "license"}, {"href": "https://services.terrascope.be/wmts/v2", "rel": "wmts", "wmts:layer": "TERRASCOPE_S5P_L3_HCHO_TD_V2"}, {"href": "https://openeofed.dataspace.copernicus.eu/openeo/1.2/collections", "rel": "root"}, {"href": "https://openeofed.dataspace.copernicus.eu/openeo/1.2/collections", "rel": "parent"}, {"href": "https://openeofed.dataspace.copernicus.eu/openeo/1.2/collections/TERRASCOPE_S5P_L3_HCHO_TD", "rel": "self"}], "providers": [{"name": "VITO, on behalf of the Belgian Science Policy Office (BELSPO).", "roles": ["producer", "licensor"], "url": "https://terrascope.be"}], "stac_extensions": ["https://stac-extensions.github.io/datacube/v2.2.0/schema.json", "https://stac-extensions.github.io/eo/v1.1.0/schema.json"], "stac_version": "0.9.0", "title": "Sentinel-5P Level-3 HCHO Daily Product - V2"}, {"description": "Contains binned Level-2 TROPOMI HCHO retrievals. The L3 binning algorithm weighs individual pixels with the overlap area of the pixel and the Level-3 grid cell. The weighing and count vectors are used to apply this weighted average consistently, see http://stcorp.github.io/harp/doc/html/libharp_product.html? ", "extent": {"spatial": {"bbox": [[-180.0, -90, 180.0, 90]]}, "temporal": {"interval": [["2018-07-01T00:00:00Z", null]]}}, "id": "TERRASCOPE_S5P_L3_HCHO_TM", "keywords": ["VITO", "TERRASCOPE", "COPERNICUS", "ESA", "Orthoimagery", "Sentinel-5P", "TROPOMI", "Level-3", "Atmospheric Components", "HCHO", "Month"], "license": "proprietary", "links": [{"href": "https://sentinel.esa.int/documents/247904/690755/Sentinel_Data_Legal_Notice", "rel": "license"}, {"href": "https://services.terrascope.be/wmts/v2", "rel": "wmts", "wmts:layer": "TERRASCOPE_S5P_L3_HCHO_TM_V2"}, {"href": "https://openeofed.dataspace.copernicus.eu/openeo/1.2/collections", "rel": "root"}, {"href": "https://openeofed.dataspace.copernicus.eu/openeo/1.2/collections", "rel": "parent"}, {"href": "https://openeofed.dataspace.copernicus.eu/openeo/1.2/collections/TERRASCOPE_S5P_L3_HCHO_TM", "rel": "self"}], "providers": [{"name": "VITO, on behalf of the Belgian Science Policy Office (BELSPO).", "roles": ["producer", "licensor"], "url": "https://terrascope.be"}], "stac_extensions": ["https://stac-extensions.github.io/datacube/v2.2.0/schema.json", "https://stac-extensions.github.io/eo/v1.1.0/schema.json"], "stac_version": "0.9.0", "title": "Sentinel-5P Level-3 HCHO Monthly Product - V2"}, {"description": "Contains binned Level-2 TROPOMI HCHO retrievals. The L3 binning algorithm weighs individual pixels with the overlap area of the pixel and the Level-3 grid cell. The weighing and count vectors are used to apply this weighted average consistently, see http://stcorp.github.io/harp/doc/html/libharp_product.html? ", "extent": {"spatial": {"bbox": [[-180.0, -89.0, 180.0, 89.0]]}, "temporal": {"interval": [["2018-07-01T00:00:00Z", null]]}}, "id": "TERRASCOPE_S5P_L3_HCHO_TY", "keywords": ["VITO", "TERRASCOPE", "COPERNICUS", "ESA", "Orthoimagery", "Sentinel-5P", "TROPOMI", "Level-3", "Atmospheric Components", "HCHO", "Year"], "license": "proprietary", "links": [{"href": "https://sentinel.esa.int/documents/247904/690755/Sentinel_Data_Legal_Notice", "rel": "license"}, {"href": "https://services.terrascope.be/wmts/v2", "rel": "wmts", "wmts:layer": "TERRASCOPE_S5P_L3_HCHO_TY_V2"}, {"href": "https://openeofed.dataspace.copernicus.eu/openeo/1.2/collections", "rel": "root"}, {"href": "https://openeofed.dataspace.copernicus.eu/openeo/1.2/collections", "rel": "parent"}, {"href": "https://openeofed.dataspace.copernicus.eu/openeo/1.2/collections/TERRASCOPE_S5P_L3_HCHO_TY", "rel": "self"}], "providers": [{"name": "VITO, on behalf of the Belgian Science Policy Office (BELSPO).", "roles": ["producer", "licensor"], "url": "https://terrascope.be"}], "stac_extensions": ["https://stac-extensions.github.io/datacube/v2.2.0/schema.json", "https://stac-extensions.github.io/eo/v1.1.0/schema.json"], "stac_version": "0.9.0", "title": "Sentinel-5P Level-3 HCHO Yearly Product - V2"}, {"description": "Contains binned Level-2 TROPOMI CH4 retrievals. The L3 binning algorithm weighs individual pixels with the overlap area of the pixel and the Level-3 grid cell. The weighing and count vectors are used to apply this weighted average consistently, see http://stcorp.github.io/harp/doc/html/libharp_product.html? ", "extent": {"spatial": {"bbox": [[-180.0, -89.0, 180.0, 89.0]]}, "temporal": {"interval": [["2018-07-01T00:00:00Z", null]]}}, "id": "TERRASCOPE_S5P_L3_CH4_TD", "keywords": ["VITO", "TERRASCOPE", "COPERNICUS", "ESA", "Orthoimagery", "Sentinel-5P", "TROPOMI", "Level-3", "Atmospheric Components", "CH4", "Day"], "license": "proprietary", "links": [{"href": "https://sentinel.esa.int/documents/247904/690755/Sentinel_Data_Legal_Notice", "rel": "license"}, {"href": "https://services.terrascope.be/wmts/v2", "rel": "wmts", "wmts:layer": "TERRASCOPE_S5P_L3_CH4_TD_V2"}, {"href": "https://openeofed.dataspace.copernicus.eu/openeo/1.2/collections", "rel": "root"}, {"href": "https://openeofed.dataspace.copernicus.eu/openeo/1.2/collections", "rel": "parent"}, {"href": "https://openeofed.dataspace.copernicus.eu/openeo/1.2/collections/TERRASCOPE_S5P_L3_CH4_TD", "rel": "self"}], "providers": [{"name": "VITO, on behalf of the Belgian Science Policy Office (BELSPO).", "roles": ["producer", "licensor"], "url": "https://terrascope.be"}], "stac_extensions": ["https://stac-extensions.github.io/datacube/v2.2.0/schema.json", "https://stac-extensions.github.io/eo/v1.1.0/schema.json"], "stac_version": "0.9.0", "title": "Sentinel-5P Level-3 CH4 Daily Product - V2"}, {"description": "Contains binned Level-2 TROPOMI CH4 retrievals. The L3 binning algorithm weighs individual pixels with the overlap area of the pixel and the Level-3 grid cell. The weighing and count vectors are used to apply this weighted average consistently, see http://stcorp.github.io/harp/doc/html/libharp_product.html? ", "extent": {"spatial": {"bbox": [[-180.0, -89.0, 180.0, 89.0]]}, "temporal": {"interval": [["2018-07-01T00:00:00Z", null]]}}, "id": "TERRASCOPE_S5P_L3_CH4_TM", "keywords": ["VITO", "TERRASCOPE", "COPERNICUS", "ESA", "Orthoimagery", "Sentinel-5P", "TROPOMI", "Level-3", "Atmospheric Components", "CH4", "Month"], "license": "proprietary", "links": [{"href": "https://sentinel.esa.int/documents/247904/690755/Sentinel_Data_Legal_Notice", "rel": "license"}, {"href": "https://services.terrascope.be/wmts/v2", "rel": "wmts", "wmts:layer": "TERRASCOPE_S5P_L3_CH4_TM_V2"}, {"href": "https://openeofed.dataspace.copernicus.eu/openeo/1.2/collections", "rel": "root"}, {"href": "https://openeofed.dataspace.copernicus.eu/openeo/1.2/collections", "rel": "parent"}, {"href": "https://openeofed.dataspace.copernicus.eu/openeo/1.2/collections/TERRASCOPE_S5P_L3_CH4_TM", "rel": "self"}], "providers": [{"name": "VITO, on behalf of the Belgian Science Policy Office (BELSPO).", "roles": ["producer", "licensor"], "url": "https://terrascope.be"}], "stac_extensions": ["https://stac-extensions.github.io/datacube/v2.2.0/schema.json", "https://stac-extensions.github.io/eo/v1.1.0/schema.json"], "stac_version": "0.9.0", "title": "Sentinel-5P Level-3 CH4 Monthly Product - V2"}, {"description": "Contains binned Level-2 TROPOMI CH4 retrievals. The L3 binning algorithm weighs individual pixels with the overlap area of the pixel and the Level-3 grid cell. The weighing and count vectors are used to apply this weighted average consistently, see http://stcorp.github.io/harp/doc/html/libharp_product.html? ", "extent": {"spatial": {"bbox": [[-180.0, -89.0, 180.0, 89.0]]}, "temporal": {"interval": [["2018-07-01T00:00:00Z", null]]}}, "id": "TERRASCOPE_S5P_L3_CH4_TY", "keywords": ["VITO", "TERRASCOPE", "COPERNICUS", "ESA", "Orthoimagery", "Sentinel-5P", "TROPOMI", "Level-3", "Atmospheric Components", "CH4", "Year"], "license": "proprietary", "links": [{"href": "https://sentinel.esa.int/documents/247904/690755/Sentinel_Data_Legal_Notice", "rel": "license"}, {"href": "https://services.terrascope.be/wmts/v2", "rel": "wmts", "wmts:layer": "TERRASCOPE_S5P_L3_CH4_TY_V2"}, {"href": "https://openeofed.dataspace.copernicus.eu/openeo/1.2/collections", "rel": "root"}, {"href": "https://openeofed.dataspace.copernicus.eu/openeo/1.2/collections", "rel": "parent"}, {"href": "https://openeofed.dataspace.copernicus.eu/openeo/1.2/collections/TERRASCOPE_S5P_L3_CH4_TY", "rel": "self"}], "providers": [{"name": "VITO, on behalf of the Belgian Science Policy Office (BELSPO).", "roles": ["producer", "licensor"], "url": "https://terrascope.be"}], "stac_extensions": ["https://stac-extensions.github.io/datacube/v2.2.0/schema.json", "https://stac-extensions.github.io/eo/v1.1.0/schema.json"], "stac_version": "0.9.0", "title": "Sentinel-5P Level-3 CH4 Yearly Product - V2"}, {"description": "Contains binned Level-2 TROPOMI NO2 retrievals using CAMS. The L3 binning algorithm weighs individual pixels with the overlap area of the pixel and the Level-3 grid cell. The weighing and count vectors are used to apply this weighted average consistently, see http://stcorp.github.io/harp/doc/html/libharp_product.html? ", "extent": {"spatial": {"bbox": [[-25.0, 30.0, 45.0, 72.0]]}, "temporal": {"interval": [["2018-07-01T00:00:00Z", null]]}}, "id": "TERRASCOPE_S5P_L3_NO2_CAMS_TD", "keywords": ["VITO", "TERRASCOPE", "COPERNICUS", "ESA", "Orthoimagery", "Sentinel-5P", "TROPOMI", "Level-3", "Atmospheric Components", "NO2", "CAMS", "Day"], "license": "proprietary", "links": [{"href": "https://sentinel.esa.int/documents/247904/690755/Sentinel_Data_Legal_Notice", "rel": "license"}, {"href": "https://services.terrascope.be/wmts/v2", "rel": "wmts", "wmts:layer": "TERRASCOPE_S5P_L3_NO2_CAMS_TD_V2"}, {"href": "https://openeofed.dataspace.copernicus.eu/openeo/1.2/collections", "rel": "root"}, {"href": "https://openeofed.dataspace.copernicus.eu/openeo/1.2/collections", "rel": "parent"}, {"href": "https://openeofed.dataspace.copernicus.eu/openeo/1.2/collections/TERRASCOPE_S5P_L3_NO2_CAMS_TD", "rel": "self"}], "providers": [{"name": "VITO, on behalf of the Belgian Science Policy Office (BELSPO).", "roles": ["producer", "licensor"], "url": "https://terrascope.be"}], "stac_extensions": ["https://stac-extensions.github.io/datacube/v2.2.0/schema.json", "https://stac-extensions.github.io/eo/v1.1.0/schema.json"], "stac_version": "0.9.0", "title": "Sentinel-5P Level-3 NO2 from CAMS Daily Product - V2"}, {"description": "Contains binned Level-2 TROPOMI NO2 retrievals using CAMS. The L3 binning algorithm weighs individual pixels with the overlap area of the pixel and the Level-3 grid cell. The weighing and count vectors are used to apply this weighted average consistently, see http://stcorp.github.io/harp/doc/html/libharp_product.html? ", "extent": {"spatial": {"bbox": [[-25.0, 30.0, 45.0, 72.0]]}, "temporal": {"interval": [["2018-07-01T00:00:00Z", null]]}}, "id": "TERRASCOPE_S5P_L3_NO2_CAMS_TM", "keywords": ["VITO", "TERRASCOPE", "COPERNICUS", "ESA", "Orthoimagery", "Sentinel-5P", "TROPOMI", "Level-3", "Atmospheric Components", "NO2", "CAMS", "Month"], "license": "proprietary", "links": [{"href": "https://sentinel.esa.int/documents/247904/690755/Sentinel_Data_Legal_Notice", "rel": "license"}, {"href": "https://services.terrascope.be/wmts/v2", "rel": "wmts", "wmts:layer": "TERRASCOPE_S5P_L3_NO2_CAMS_TM_V2"}, {"href": "https://openeofed.dataspace.copernicus.eu/openeo/1.2/collections", "rel": "root"}, {"href": "https://openeofed.dataspace.copernicus.eu/openeo/1.2/collections", "rel": "parent"}, {"href": "https://openeofed.dataspace.copernicus.eu/openeo/1.2/collections/TERRASCOPE_S5P_L3_NO2_CAMS_TM", "rel": "self"}], "providers": [{"name": "VITO, on behalf of the Belgian Science Policy Office (BELSPO).", "roles": ["producer", "licensor"], "url": "https://terrascope.be"}], "stac_extensions": ["https://stac-extensions.github.io/datacube/v2.2.0/schema.json", "https://stac-extensions.github.io/eo/v1.1.0/schema.json"], "stac_version": "0.9.0", "title": "Sentinel-5P Level-3 NO2 from CAMS Monthly Product - V2"}, {"description": "Contains binned Level-2 TROPOMI NO2 retrievals using CAMS a-priori for Europe. The L3 binning algorithm weighs individual pixels with the overlap area of the pixel and the Level-3 grid cell. The weighing and count vectors are used to apply this weighted average consistently, see http://stcorp.github.io/harp/doc/html/libharp_product.html? ", "extent": {"spatial": {"bbox": [[-25.0, 30.0, 45.0, 72.0]]}, "temporal": {"interval": [["2018-07-01T00:00:00Z", null]]}}, "id": "TERRASCOPE_S5P_L3_NO2_CAMS_TY", "keywords": ["VITO", "TERRASCOPE", "COPERNICUS", "ESA", "Orthoimagery", "Sentinel-5P", "TROPOMI", "Level-3", "Atmospheric Components", "NO2", "CAMS", "Year"], "license": "proprietary", "links": [{"href": "https://sentinel.esa.int/documents/247904/690755/Sentinel_Data_Legal_Notice", "rel": "license"}, {"href": "https://services.terrascope.be/wmts/v2", "rel": "wmts", "wmts:layer": "TERRASCOPE_S5P_L3_NO2_CAMS_TY_V2"}, {"href": "https://openeofed.dataspace.copernicus.eu/openeo/1.2/collections", "rel": "root"}, {"href": "https://openeofed.dataspace.copernicus.eu/openeo/1.2/collections", "rel": "parent"}, {"href": "https://openeofed.dataspace.copernicus.eu/openeo/1.2/collections/TERRASCOPE_S5P_L3_NO2_CAMS_TY", "rel": "self"}], "providers": [{"name": "VITO, on behalf of the Belgian Science Policy Office (BELSPO).", "roles": ["producer", "licensor"], "url": "https://terrascope.be"}], "stac_extensions": ["https://stac-extensions.github.io/datacube/v2.2.0/schema.json", "https://stac-extensions.github.io/eo/v1.1.0/schema.json"], "stac_version": "0.9.0", "title": "Sentinel-5P Level-3 NO2 from CAMS Yearly Product - V2"}, {"description": "NO2 surface concentrations [micrograms/m^3] based on Sentinel-5P/TROPOMI Level-2 data. ", "extent": {"spatial": {"bbox": [[-5.0, 42.0, 9.0, 54.0]]}, "temporal": {"interval": [["2018-07-01T00:00:00Z", null]]}}, "id": "TERRASCOPE_S5P_L3_NO2_SURFACE_TD", "keywords": ["VITO", "TERRASCOPE", "COPERNICUS", "ESA", "Orthoimagery", "Sentinel-5P", "TROPOMI", "Level-3", "Atmospheric Components", "NO2", "SURFACE", "Day"], "license": "proprietary", "links": [{"href": "https://sentinel.esa.int/documents/247904/690755/Sentinel_Data_Legal_Notice", "rel": "license"}, {"href": "https://services.terrascope.be/wmts/v2", "rel": "wmts", "wmts:layer": "TERRASCOPE_S5P_L3_NO2_SURFACE_TD_V2"}, {"href": "https://openeofed.dataspace.copernicus.eu/openeo/1.2/collections", "rel": "root"}, {"href": "https://openeofed.dataspace.copernicus.eu/openeo/1.2/collections", "rel": "parent"}, {"href": "https://openeofed.dataspace.copernicus.eu/openeo/1.2/collections/TERRASCOPE_S5P_L3_NO2_SURFACE_TD", "rel": "self"}], "providers": [{"name": "VITO, on behalf of the Belgian Science Policy Office (BELSPO).", "roles": ["producer", "licensor"], "url": "https://terrascope.be"}], "stac_extensions": ["https://stac-extensions.github.io/datacube/v2.2.0/schema.json", "https://stac-extensions.github.io/eo/v1.1.0/schema.json"], "stac_version": "0.9.0", "title": "Sentinel-5P Level-3 NO2 Surface Daily Product - V2"}, {"description": "NO2 surface concentrations [micrograms/m^3] based on Sentinel-5P/TROPOMI Level-2 data.", "extent": {"spatial": {"bbox": [[-5.0, 42.0, 9.0, 54.0]]}, "temporal": {"interval": [["2018-07-01T00:00:00Z", null]]}}, "id": "TERRASCOPE_S5P_L3_NO2_SURFACE_TM", "keywords": ["VITO", "TERRASCOPE", "COPERNICUS", "ESA", "Orthoimagery", "Sentinel-5P", "TROPOMI", "Level-3", "Atmospheric Components", "NO2", "SURFACE", "Month"], "license": "proprietary", "links": [{"href": "https://sentinel.esa.int/documents/247904/690755/Sentinel_Data_Legal_Notice", "rel": "license"}, {"href": "https://services.terrascope.be/wmts/v2", "rel": "wmts", "wmts:layer": "TERRASCOPE_S5P_L3_NO2_SURFACE_TM_V2"}, {"href": "https://openeofed.dataspace.copernicus.eu/openeo/1.2/collections", "rel": "root"}, {"href": "https://openeofed.dataspace.copernicus.eu/openeo/1.2/collections", "rel": "parent"}, {"href": "https://openeofed.dataspace.copernicus.eu/openeo/1.2/collections/TERRASCOPE_S5P_L3_NO2_SURFACE_TM", "rel": "self"}], "providers": [{"name": "VITO, on behalf of the Belgian Science Policy Office (BELSPO).", "roles": ["producer", "licensor"], "url": "https://terrascope.be"}], "stac_extensions": ["https://stac-extensions.github.io/datacube/v2.2.0/schema.json", "https://stac-extensions.github.io/eo/v1.1.0/schema.json"], "stac_version": "0.9.0", "title": "Sentinel-5P Level-3 NO2 Surface Monthly Product - V2"}, {"description": "NO2 surface concentrations [micrograms/m^3] based on Sentinel-5P/TROPOMI Level-2 data. ", "extent": {"spatial": {"bbox": [[-5.0, 42.0, 9.0, 54.0]]}, "temporal": {"interval": [["2018-07-01T00:00:00Z", null]]}}, "id": "TERRASCOPE_S5P_L3_NO2_SURFACE_TY", "keywords": ["VITO", "TERRASCOPE", "COPERNICUS", "ESA", "Orthoimagery", "Sentinel-5P", "TROPOMI", "Level-3", "Atmospheric Components", "NO2", "SURFACE", "Year"], "license": "proprietary", "links": [{"href": "https://sentinel.esa.int/documents/247904/690755/Sentinel_Data_Legal_Notice", "rel": "license"}, {"href": "https://services.terrascope.be/wmts/v2", "rel": "wmts", "wmts:layer": "TERRASCOPE_S5P_L3_NO2_SURFACE_TY_V2"}, {"href": "https://openeofed.dataspace.copernicus.eu/openeo/1.2/collections", "rel": "root"}, {"href": "https://openeofed.dataspace.copernicus.eu/openeo/1.2/collections", "rel": "parent"}, {"href": "https://openeofed.dataspace.copernicus.eu/openeo/1.2/collections/TERRASCOPE_S5P_L3_NO2_SURFACE_TY", "rel": "self"}], "providers": [{"name": "VITO, on behalf of the Belgian Science Policy Office (BELSPO).", "roles": ["producer", "licensor"], "url": "https://terrascope.be"}], "stac_extensions": ["https://stac-extensions.github.io/datacube/v2.2.0/schema.json", "https://stac-extensions.github.io/eo/v1.1.0/schema.json"], "stac_version": "0.9.0", "title": "Sentinel-5P Level-3 NO2 Surface Yearly Product - V2"}, {"description": "Contains binned Level-2 Sulfur Dioxide (SO2) vertical column products using COvariance-Based Retrieval Algorithm (COBRA) retrievals. The L3 binning algorithm weighs individual pixels with the overlap area of the pixel and the Level-3 grid cell. The weighing and count vectors are used to apply this weighted average consistently, see http://stcorp.github.io/harp/doc/html/libharp_product.html? ", "extent": {"spatial": {"bbox": [[-180.0, -89.0, 180.0, 89.0]]}, "temporal": {"interval": [["2018-07-01T00:00:00Z", null]]}}, "id": "TERRASCOPE_S5P_L3_SO2CBR_TD", "keywords": ["VITO", "TERRASCOPE", "COPERNICUS", "ESA", "Orthoimagery", "Sentinel-5P", "TROPOMI", "Level-3", "Atmospheric Components", "SO2CBR", "SO2", "Sulfur Dioxide", "COBRA", "Day"], "license": "proprietary", "links": [{"href": "https://sentinel.esa.int/documents/247904/690755/Sentinel_Data_Legal_Notice", "rel": "license"}, {"href": "https://services.terrascope.be/wmts/v2", "rel": "wmts", "wmts:layer": "TERRASCOPE_S5P_L3_SO2CBR_TD_V2"}, {"href": "https://openeofed.dataspace.copernicus.eu/openeo/1.2/collections", "rel": "root"}, {"href": "https://openeofed.dataspace.copernicus.eu/openeo/1.2/collections", "rel": "parent"}, {"href": "https://openeofed.dataspace.copernicus.eu/openeo/1.2/collections/TERRASCOPE_S5P_L3_SO2CBR_TD", "rel": "self"}], "providers": [{"name": "VITO, on behalf of the Belgian Science Policy Office (BELSPO).", "roles": ["producer", "licensor"], "url": "https://terrascope.be"}], "stac_extensions": ["https://stac-extensions.github.io/datacube/v2.2.0/schema.json", "https://stac-extensions.github.io/eo/v1.1.0/schema.json"], "stac_version": "0.9.0", "title": "Sentinel-5P Level-3 SO2CBR Daily Product, version 2"}, {"description": "Contains binned Level-2 Sulfur Dioxide (SO2) vertical column products using COvariance-Based Retrieval Algorithm (COBRA) retrievals. The L3 binning algorithm weighs individual pixels with the overlap area of the pixel and the Level-3 grid cell. The weighing and count vectors are used to apply this weighted average consistently, see http://stcorp.github.io/harp/doc/html/libharp_product.html? ", "extent": {"spatial": {"bbox": [[-180.0, -89.0, 180.0, 89.0]]}, "temporal": {"interval": [["2018-07-01T00:00:00Z", null]]}}, "id": "TERRASCOPE_S5P_L3_SO2CBR_TM", "keywords": ["VITO", "TERRASCOPE", "COPERNICUS", "ESA", "Orthoimagery", "Sentinel-5P", "TROPOMI", "Level-3", "Atmospheric Components", "SO2CBR", "SO2", "Sulfur Dioxide", "COBRA", "Month"], "license": "proprietary", "links": [{"href": "https://sentinel.esa.int/documents/247904/690755/Sentinel_Data_Legal_Notice", "rel": "license"}, {"href": "https://services.terrascope.be/wmts/v2", "rel": "wmts", "wmts:layer": "TERRASCOPE_S5P_L3_SO2CBR_TM_V2"}, {"href": "https://openeofed.dataspace.copernicus.eu/openeo/1.2/collections", "rel": "root"}, {"href": "https://openeofed.dataspace.copernicus.eu/openeo/1.2/collections", "rel": "parent"}, {"href": "https://openeofed.dataspace.copernicus.eu/openeo/1.2/collections/TERRASCOPE_S5P_L3_SO2CBR_TM", "rel": "self"}], "providers": [{"name": "VITO, on behalf of the Belgian Science Policy Office (BELSPO).", "roles": ["producer", "licensor"], "url": "https://terrascope.be"}], "stac_extensions": ["https://stac-extensions.github.io/datacube/v2.2.0/schema.json", "https://stac-extensions.github.io/eo/v1.1.0/schema.json"], "stac_version": "0.9.0", "title": "Sentinel-5P Level-3 SO2CBR Monthly Product, version 2"}, {"description": "Contains binned Level-2 Sulfur Dioxide (SO2) vertical column products using COvariance-Based Retrieval Algorithm (COBRA) retrievals. The L3 binning algorithm weighs individual pixels with the overlap area of the pixel and the Level-3 grid cell. The weighing and count vectors are used to apply this weighted average consistently, see http://stcorp.github.io/harp/doc/html/libharp_product.html? ", "extent": {"spatial": {"bbox": [[-180.0, -89.0, 180.0, 89.0]]}, "temporal": {"interval": [["2018-07-01T00:00:00Z", null]]}}, "id": "TERRASCOPE_S5P_L3_SO2CBR_TY", "keywords": ["VITO", "TERRASCOPE", "COPERNICUS", "ESA", "Orthoimagery", "Sentinel-5P", "TROPOMI", "Level-3", "Atmospheric Components", "SO2CBR", "SO2", "Sulfur Dioxide", "COBRA", "Year"], "license": "proprietary", "links": [{"href": "https://sentinel.esa.int/documents/247904/690755/Sentinel_Data_Legal_Notice", "rel": "license"}, {"href": "https://services.terrascope.be/wmts/v2", "rel": "wmts", "wmts:layer": "TERRASCOPE_S5P_L3_SO2CBR_TY_V2"}, {"href": "https://openeofed.dataspace.copernicus.eu/openeo/1.2/collections", "rel": "root"}, {"href": "https://openeofed.dataspace.copernicus.eu/openeo/1.2/collections", "rel": "parent"}, {"href": "https://openeofed.dataspace.copernicus.eu/openeo/1.2/collections/TERRASCOPE_S5P_L3_SO2CBR_TY", "rel": "self"}], "providers": [{"name": "VITO, on behalf of the Belgian Science Policy Office (BELSPO).", "roles": ["producer", "licensor"], "url": "https://terrascope.be"}], "stac_extensions": ["https://stac-extensions.github.io/datacube/v2.2.0/schema.json", "https://stac-extensions.github.io/eo/v1.1.0/schema.json"], "stac_version": "0.9.0", "title": "Sentinel-5P Level-3 SO2CBR Yearly Product, version 2"}, {"description": "The WorldCover product will be released per 3 x 3 degree tile.", "extent": {"spatial": {"bbox": [[-180.0, -90.0, 180.0, 90.0]]}, "temporal": {"interval": [["2020-01-01T00:00:00Z", "2020-12-31T00:00:00Z"]]}}, "id": "ESA_WORLDCOVER_10M_2020_V1", "keywords": ["VITO", "COPERNICUS", "ESA", "Land Cover", "Sentinel-1", "Sentinel-2", "Environment", "WorldCover"], "license": "https://creativecommons.org/licenses/by/4.0/", "links": [{"href": "https://creativecommons.org/licenses/by/4.0/", "rel": "license"}, {"href": "https://services.terrascope.be/catalogue/description?collection=urn:eop:VITO:ESA_WorldCover_10m_2020_V1", "rel": "alternate", "title": "EO OpenSearch catalog"}, {"href": "https://viewer.esa-worldcover.org/worldcover", "rel": "alternate", "title": "Product Viewer"}, {"href": "https://services.terrascope.be/wmts/v2", "rel": "wmts", "wmts:layer": "WORLDCOVER_2020_MAP"}, {"href": "https://openeofed.dataspace.copernicus.eu/openeo/1.2/collections", "rel": "root"}, {"href": "https://openeofed.dataspace.copernicus.eu/openeo/1.2/collections", "rel": "parent"}, {"href": "https://openeofed.dataspace.copernicus.eu/openeo/1.2/collections/ESA_WORLDCOVER_10M_2020_V1", "rel": "self"}], "providers": [{"name": "VITO", "roles": ["producer"], "url": "https://remotesensing.vito.be/"}], "stac_extensions": ["https://stac-extensions.github.io/datacube/v2.2.0/schema.json", "https://stac-extensions.github.io/eo/v1.1.0/schema.json"], "stac_version": "0.9.0", "title": "ESA WorldCover 2020 products 10 meter COG format  "}, {"description": "Global NDVI long term statistics (1999-2017) at 1km resolution, 10-daily. This collection uses 2017 as the year to represent long term statistics.", "extent": {"spatial": {"bbox": [[-180.00446428571428, -59.9955357, 179.9955357, 80.0044643]]}, "temporal": {"interval": [["2017-01-01T00:00:00Z", "2018-01-01T00:00:00Z"]]}}, "id": "CGLS_NDVI_LTS_V2_GLOBAL", "license": "free", "links": [{"href": "https://land.copernicus.eu/global/products/ndvi", "rel": "alternate", "title": "Product web page."}, {"href": "https://openeofed.dataspace.copernicus.eu/openeo/1.2/collections", "rel": "root"}, {"href": "https://openeofed.dataspace.copernicus.eu/openeo/1.2/collections", "rel": "parent"}, {"href": "https://openeofed.dataspace.copernicus.eu/openeo/1.2/collections/CGLS_NDVI_LTS_V2_GLOBAL", "rel": "self"}], "stac_extensions": ["https://stac-extensions.github.io/datacube/v2.2.0/schema.json", "https://stac-extensions.github.io/eo/v1.1.0/schema.json"], "stac_version": "0.9.0", "title": "Copernicus Global Land NDVI Long term statistics product V2, 1km resolution, 10-daily"}, {"description": "Global NDVI long term statistics (1999-2019) at 1km resolution, 10-daily. This collection uses 2017 as the year to represent long term statistics.", "extent": {"spatial": {"bbox": [[-180.00446428571428, -59.9955357, 179.9955357, 80.0044643]]}, "temporal": {"interval": [["2017-01-01T00:00:00Z", "2018-01-01T00:00:00Z"]]}}, "id": "CGLS_NDVI_LTS_V3_GLOBAL", "license": "free", "links": [{"href": "https://land.copernicus.eu/global/products/ndvi", "rel": "alternate", "title": "Product web page."}, {"href": "https://openeofed.dataspace.copernicus.eu/openeo/1.2/collections", "rel": "root"}, {"href": "https://openeofed.dataspace.copernicus.eu/openeo/1.2/collections", "rel": "parent"}, {"href": "https://openeofed.dataspace.copernicus.eu/openeo/1.2/collections/CGLS_NDVI_LTS_V3_GLOBAL", "rel": "self"}], "stac_extensions": ["https://stac-extensions.github.io/datacube/v2.2.0/schema.json", "https://stac-extensions.github.io/eo/v1.1.0/schema.json"], "stac_version": "0.9.0", "title": "Copernicus Global Land NDVI Long term statistics product V3, 1km resolution, 10-daily"}, {"description": "Surface Soil Moisture at 1km resolution over Europe, daily. Surface Soil Moisture (SSM) is the relative water content of the top few centimetres soil, describing how wet or dry the soil is in its topmost layer, expressed in percent saturation. It is measured by satellite radar sensors and allows insights in local precipitation impacts and soil conditions.", "extent": {"spatial": {"bbox": [[-11.0, 35.0, 50.0, 72.0]]}, "temporal": {"interval": [["2014-10-03T00:00:00Z", null]]}}, "id": "CGLS_SSM_V1_EUROPE", "license": "free", "links": [{"href": "https://land.copernicus.eu/global/products/ssm", "rel": "alternate", "title": "Product web page."}, {"href": "https://openeofed.dataspace.copernicus.eu/openeo/1.2/collections", "rel": "root"}, {"href": "https://openeofed.dataspace.copernicus.eu/openeo/1.2/collections", "rel": "parent"}, {"href": "https://openeofed.dataspace.copernicus.eu/openeo/1.2/collections/CGLS_SSM_V1_EUROPE", "rel": "self"}], "stac_extensions": ["https://stac-extensions.github.io/datacube/v2.2.0/schema.json", "https://stac-extensions.github.io/eo/v1.1.0/schema.json"], "stac_version": "0.9.0", "title": "Copernicus Land Surface Soil Moisture product V1 over Europe, 1km resolution, daily"}, {"description": "Global FAPAR at 1km resolution, 10-daily. The FAPAR quantifies the fraction of the solar radiation absorbed by live leaves for the photosynthesis activity. Then, it refers only to the green and alive elements of the canopy. The FAPAR depends on the canopy structure, vegetation element optical properties, atmospheric conditions, and angular configuration. To overcome this latter dependency, a daily integrated FAPAR value is assessed.\n\nFAPAR is recognized as an Essential Climate Variable (ECV) by the Global Climate Observing System (GCOS).", "extent": {"spatial": {"bbox": [[-180.00446428571428, -59.9955357, 179.9955357, 80.0044643]]}, "temporal": {"interval": [["1999-01-01T00:00:00Z", "2020-06-30T00:00:00Z"]]}}, "id": "CGLS_FAPAR_V2_GLOBAL", "license": "free", "links": [{"href": "https://land.copernicus.eu/global/products/fapar", "rel": "alternate", "title": "Product web page."}, {"href": "https://openeofed.dataspace.copernicus.eu/openeo/1.2/collections", "rel": "root"}, {"href": "https://openeofed.dataspace.copernicus.eu/openeo/1.2/collections", "rel": "parent"}, {"href": "https://openeofed.dataspace.copernicus.eu/openeo/1.2/collections/CGLS_FAPAR_V2_GLOBAL", "rel": "self"}], "stac_extensions": ["https://stac-extensions.github.io/datacube/v2.2.0/schema.json", "https://stac-extensions.github.io/eo/v1.1.0/schema.json"], "stac_version": "0.9.0", "title": "Copernicus Global Land FAPAR product V2, 1km resolution, 10-daily"}, {"description": "Global LAI at 1km resolution, 10-daily. The Leaf Area Index is defined as half the total area of green elements of the canopy per unit horizontal ground area. The satellite-derived value corresponds to the total green LAI of all the canopy layers, including the understory which may represent a very significant contribution, particularly for forests. Practically, the LAI quantifies the thickness of the vegetation cover.", "extent": {"spatial": {"bbox": [[-180.00446428571428, -59.9955357, 179.9955357, 80.0044643]]}, "temporal": {"interval": [["1999-01-01T00:00:00Z", "2020-06-30T00:00:00Z"]]}}, "id": "CGLS_LAI_V2_GLOBAL", "license": "free", "links": [{"href": "https://land.copernicus.eu/global/products/lai", "rel": "alternate", "title": "Product web page."}, {"href": "https://openeofed.dataspace.copernicus.eu/openeo/1.2/collections", "rel": "root"}, {"href": "https://openeofed.dataspace.copernicus.eu/openeo/1.2/collections", "rel": "parent"}, {"href": "https://openeofed.dataspace.copernicus.eu/openeo/1.2/collections/CGLS_LAI_V2_GLOBAL", "rel": "self"}], "stac_extensions": ["https://stac-extensions.github.io/datacube/v2.2.0/schema.json", "https://stac-extensions.github.io/eo/v1.1.0/schema.json"], "stac_version": "0.9.0", "title": "Copernicus Global Land LAI product V2, 1km resolution, 10-daily"}, {"description": "Global FCOVER at 1km resolution, 10-daily. ", "extent": {"spatial": {"bbox": [[-180.00446428571428, -59.9955357, 179.9955357, 80.0044643]]}, "temporal": {"interval": [["1999-01-01T00:00:00Z", "2020-06-30T00:00:00Z"]]}}, "id": "CGLS_FCOVER_V2_GLOBAL", "license": "free", "links": [{"href": "https://land.copernicus.eu/global/products/fcover", "rel": "alternate", "title": "Product web page."}, {"href": "https://openeofed.dataspace.copernicus.eu/openeo/1.2/collections", "rel": "root"}, {"href": "https://openeofed.dataspace.copernicus.eu/openeo/1.2/collections", "rel": "parent"}, {"href": "https://openeofed.dataspace.copernicus.eu/openeo/1.2/collections/CGLS_FCOVER_V2_GLOBAL", "rel": "self"}], "stac_extensions": ["https://stac-extensions.github.io/datacube/v2.2.0/schema.json", "https://stac-extensions.github.io/eo/v1.1.0/schema.json"], "stac_version": "0.9.0", "title": "Copernicus Global Land FCOVER product V2, 1km resolution, 10-daily"}, {"description": "Global NDVI at 300m resolution, 10-daily. The Normalized Difference Vegetation Index (NDVI) is an indicator of the greenness of the biomes. As such, it is closely linked to the FAPAR.", "extent": {"spatial": {"bbox": [[-180.0014880952381, -59.9985119, 179.9985119, 80.00148809523809]]}, "temporal": {"interval": [["2014-01-01T00:00:00Z", "2021-01-01T00:00:00Z"]]}}, "id": "CGLS_NDVI300_V1_GLOBAL", "license": "free", "links": [{"href": "https://land.copernicus.eu/global/products/ndvi", "rel": "alternate", "title": "Product web page."}, {"href": "https://openeofed.dataspace.copernicus.eu/openeo/1.2/collections", "rel": "root"}, {"href": "https://openeofed.dataspace.copernicus.eu/openeo/1.2/collections", "rel": "parent"}, {"href": "https://openeofed.dataspace.copernicus.eu/openeo/1.2/collections/CGLS_NDVI300_V1_GLOBAL", "rel": "self"}], "stac_extensions": ["https://stac-extensions.github.io/datacube/v2.2.0/schema.json", "https://stac-extensions.github.io/eo/v1.1.0/schema.json"], "stac_version": "0.9.0", "title": "Copernicus Global Land NDVI product V1, 300m resolution, 10-daily"}, {"description": "Global NDVI at 1km resolution, 10-daily. The Normalized Difference Vegetation Index (NDVI) is an indicator of the greenness of the biomes. As such, it is closely linked to the FAPAR.", "extent": {"spatial": {"bbox": [[-180.00446428571428, -59.9955357, 179.9955357, 80.0044643]]}, "temporal": {"interval": [["1999-01-01T00:00:00Z", "2020-06-21T00:00:00Z"]]}}, "id": "CGLS_NDVI_V3_GLOBAL", "license": "free", "links": [{"href": "https://land.copernicus.eu/global/products/ndvi", "rel": "alternate", "title": "Product web page."}, {"href": "https://openeofed.dataspace.copernicus.eu/openeo/1.2/collections", "rel": "root"}, {"href": "https://openeofed.dataspace.copernicus.eu/openeo/1.2/collections", "rel": "parent"}, {"href": "https://openeofed.dataspace.copernicus.eu/openeo/1.2/collections/CGLS_NDVI_V3_GLOBAL", "rel": "self"}], "stac_extensions": ["https://stac-extensions.github.io/datacube/v2.2.0/schema.json", "https://stac-extensions.github.io/eo/v1.1.0/schema.json"], "stac_version": "0.9.0", "title": "Copernicus Global Land NDVI product V3, 1km resolution, 10-daily"}, {"description": "Global NDVI at 1km resolution, 10-daily. The Normalized Difference Vegetation Index (NDVI) is an indicator of the greenness of the biomes. As such, it is closely linked to the FAPAR.", "extent": {"spatial": {"bbox": [[-180.00446428571428, -59.9955357, 179.9955357, 80.0044643]]}, "temporal": {"interval": [["1998-04-01T00:00:00Z", "2021-01-01T00:00:00Z"]]}}, "id": "CGLS_NDVI_V2_GLOBAL", "license": "free", "links": [{"href": "https://land.copernicus.eu/global/products/ndvi", "rel": "alternate", "title": "Product web page."}, {"href": "https://openeofed.dataspace.copernicus.eu/openeo/1.2/collections", "rel": "root"}, {"href": "https://openeofed.dataspace.copernicus.eu/openeo/1.2/collections", "rel": "parent"}, {"href": "https://openeofed.dataspace.copernicus.eu/openeo/1.2/collections/CGLS_NDVI_V2_GLOBAL", "rel": "self"}], "stac_extensions": ["https://stac-extensions.github.io/datacube/v2.2.0/schema.json", "https://stac-extensions.github.io/eo/v1.1.0/schema.json"], "stac_version": "0.9.0", "title": "Copernicus Global Land NDVI product V2, 1km resolution, 10-daily"}, {"description": "Soil Water Index at 1km resolution over Europe, daily. The Soil Water Index quantifies the moisture condition at various depths in the soil. It is mainly driven by the precipitation via the process of infiltration. Soil moisture is a very heterogeneous variable and varies on small scales with soil properties and drainage patterns. Satellite measurements integrate over relative large-scale areas, with the presence of vegetation adding complexity to the interpretation.", "extent": {"spatial": {"bbox": [[-11.0, 35.0, 50.0, 72.0]]}, "temporal": {"interval": [["2015-01-01T00:00:00Z", null]]}}, "id": "CGLS_SWI_V1_EUROPE", "license": "free", "links": [{"href": "https://land.copernicus.eu/global/products/swi", "rel": "alternate", "title": "Product web page."}, {"href": "https://openeofed.dataspace.copernicus.eu/openeo/1.2/collections", "rel": "root"}, {"href": "https://openeofed.dataspace.copernicus.eu/openeo/1.2/collections", "rel": "parent"}, {"href": "https://openeofed.dataspace.copernicus.eu/openeo/1.2/collections/CGLS_SWI_V1_EUROPE", "rel": "self"}], "stac_extensions": ["https://stac-extensions.github.io/datacube/v2.2.0/schema.json", "https://stac-extensions.github.io/eo/v1.1.0/schema.json"], "stac_version": "0.9.0", "title": "Copernicus Land Soil Water Index product V1 over Europe, 1km resolution, daily"}, {"description": "This dataset provides daily surface meteorological data at 0.1\u00b0x0.1\u00b0 spatial resolution for the period from 2015 to present as input for agro-ecological studies. This dataset is based on the hourly ECMWF ERA5 data at surface level and is referred to as AgERA5. Acquisition and pre-processing of the original ERA5 data is a complex and specialized job. By providing the AgERA5 dataset, users are freed from this work and can directly start with meaningful input for their analyses and modelling. To this end, the variables provided in this dataset match the input needs of most agro-ecological models.\n\nData were aggregated to daily time steps at the local time zone and corrected towards a finer topography at a 0.1\u00b0 spatial resolution. The correction to the 0.1\u00b0 grid was realized by applying grid and variable-specific regression equations to the ERA5 dataset interpolated at 0.1\u00b0 grid. The equations were trained on ECMWF's operational high-resolution atmospheric model (HRES) at a 0.1\u00b0 resolution. This way the data is tuned to the finer topography, finer land use pattern and finer land-sea delineation of the ECMWF HRES model.\n\nThe data was produced on behalf of the Copernicus Climate Change Service.\n\nThis dataset is marked as experimental because the integration in this backend has not yet been fully validated. Use with caution.", "extent": {"spatial": {"bbox": [[-180.05, -90.05, 179.95, 90.05]]}, "temporal": {"interval": [["2015-01-01T00:00:00Z", null]]}}, "id": "AGERA5", "license": "proprietary", "links": [{"href": "https://cds.climate.copernicus.eu/cdsapp#!/dataset/sis-agrometeorological-indicators", "rel": "alternate", "title": "Product web page."}, {"href": "https://openeofed.dataspace.copernicus.eu/openeo/1.2/collections", "rel": "root"}, {"href": "https://openeofed.dataspace.copernicus.eu/openeo/1.2/collections", "rel": "parent"}, {"href": "https://openeofed.dataspace.copernicus.eu/openeo/1.2/collections/AGERA5", "rel": "self"}], "stac_extensions": ["https://stac-extensions.github.io/datacube/v2.2.0/schema.json", "https://stac-extensions.github.io/eo/v1.1.0/schema.json"], "stac_version": "0.9.0", "title": "ECMWF AGERA5 meteo dataset"}]}</script>
    </openeo-collections>
    
</div>
</div>
</div>
</section>
<section id="variables" class="level2">
<h2 class="anchored" data-anchor-id="variables">Variables</h2>
<p>For this tutorial we will use the following datasets/variables:</p>
<p>Target:</p>
<table class="caption-top table">
<thead>
<tr class="header">
<th>Variable name</th>
<th>Collection</th>
<th>Band Name</th>
<th>Spatial resolution</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Sun-Induced Flourescence</td>
<td><a href="https://raw.githubusercontent.com/dpabon/SIF_downscaling_CDSE/refs/heads/main/data/SIF_20180629.json">Dong Li SIF</a></td>
<td><code>SIF</code></td>
<td>5 km</td>
</tr>
</tbody>
</table>
<p>Currently there are two SIF gridded products derived from Sentinel-5p that are availables:</p>
<ol type="1">
<li><p><a href="https://data-portal.s5p-pal.com/products/troposif.html">S5P-PAL SIF</a>. This product is generated by the Sentinel-5P Product Algorithm Laboratory (S5P-PAL) and contains modified Copernicus Sentinel data processed by S[&amp;]T. Unfortunately, the current (at least at: 2025-12-01) STAC dissemination only include plain netcdf files and not cloud optimized data format. Currently the <a href="https://atmospherevirtuallab.org/">Atmosphere Virtual Lab project</a> is working in provided zarr datacubes for the L3 products, including SIF.</p></li>
<li><p><a href="https://www.sciencedirect.com/science/article/pii/S0034425725003918#da0005">Dong LI SIF</a>. This product uses an artificial neural network to retrieve SIF from Sentinel-5p observations. Thanks to Dong Li for provinding us with a <a href="https://github.com/dpabon/SIF_downscaling_CDSE/blob/main/data/SIF_20180629.tif">gridded example of the product</a> and the <a href="https://github.com/dpabon/SIF_downscaling_CDSE/blob/main/data/SIF_20180629.json">stac item</a> necessary to ingest the product in the openEO-CDSE infrastructure. This files can be found in the data directory of the <a href="https://github.com/dpabon/SIF_downscaling_CDSE">repository</a>.</p></li>
</ol>
<p>Predictors:</p>
<div id="tbl-predictors" class="quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-tbl figure">
<figcaption class="quarto-float-caption-top quarto-float-caption quarto-float-tbl" id="tbl-predictors-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Table&nbsp;1: SIF predictors
</figcaption>
<div aria-describedby="tbl-predictors-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<table class="caption-top table">
<colgroup>
<col style="width: 25%">
<col style="width: 25%">
<col style="width: 25%">
<col style="width: 25%">
</colgroup>
<thead>
<tr class="header">
<th>Variable name</th>
<th>Collection</th>
<th>Band Name</th>
<th>Spatial resolution</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Land Surface Temperature</td>
<td><code>SENTINEL3_SLSTR_L2_LST</code></td>
<td><code>LST</code></td>
<td>1 km</td>
</tr>
<tr class="even">
<td>Terrestrial Chlorophyll Index</td>
<td><code>SENTINEL3_OLCI_L2_LAND</code></td>
<td><code>OTCI</code></td>
<td>300 m</td>
</tr>
<tr class="odd">
<td>Integrated Water Vapour</td>
<td><code>SENTINEL3_OLCI_L2_LAND</code></td>
<td><code>IWV</code></td>
<td>300 m</td>
</tr>
</tbody>
</table>
</div>
</figure>
</div>
<section id="creating-openeo-datacubes-for-the-variables" class="level3">
<h3 class="anchored" data-anchor-id="creating-openeo-datacubes-for-the-variables">Creating openEO datacubes for the variables</h3>
<div id="16026d5c" class="cell" data-execution_count="7">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb6"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Testing SIF - Dong Li</span></span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a>cube_SIF_original_median <span class="op">=</span> connection.load_stac(</span>
<span id="cb6-4"><a href="#cb6-4" aria-hidden="true" tabindex="-1"></a>    <span class="st">"https://raw.githubusercontent.com/dpabon/SIF_downscaling_CDSE/refs/heads/main/data/SIF_20180629.json"</span>,</span>
<span id="cb6-5"><a href="#cb6-5" aria-hidden="true" tabindex="-1"></a>    bands<span class="op">=</span>[<span class="st">"SIF"</span>],</span>
<span id="cb6-6"><a href="#cb6-6" aria-hidden="true" tabindex="-1"></a>    spatial_extent<span class="op">=</span>spatial_extent_prototype,</span>
<span id="cb6-7"><a href="#cb6-7" aria-hidden="true" tabindex="-1"></a>    temporal_extent<span class="op">=</span>temporal_extent_prototype,</span>
<span id="cb6-8"><a href="#cb6-8" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb6-9"><a href="#cb6-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-10"><a href="#cb6-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-11"><a href="#cb6-11" aria-hidden="true" tabindex="-1"></a>cube_LST <span class="op">=</span> connection.load_collection(</span>
<span id="cb6-12"><a href="#cb6-12" aria-hidden="true" tabindex="-1"></a>    <span class="st">"SENTINEL3_SLSTR_L2_LST"</span>,</span>
<span id="cb6-13"><a href="#cb6-13" aria-hidden="true" tabindex="-1"></a>    spatial_extent<span class="op">=</span>spatial_extent_prototype,</span>
<span id="cb6-14"><a href="#cb6-14" aria-hidden="true" tabindex="-1"></a>    temporal_extent<span class="op">=</span>temporal_extent_prototype,</span>
<span id="cb6-15"><a href="#cb6-15" aria-hidden="true" tabindex="-1"></a>    bands<span class="op">=</span>[<span class="st">"LST"</span>],</span>
<span id="cb6-16"><a href="#cb6-16" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb6-17"><a href="#cb6-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-18"><a href="#cb6-18" aria-hidden="true" tabindex="-1"></a>cube_LST_qc <span class="op">=</span> connection.load_collection(</span>
<span id="cb6-19"><a href="#cb6-19" aria-hidden="true" tabindex="-1"></a>    <span class="st">"SENTINEL3_SLSTR_L2_LST"</span>,</span>
<span id="cb6-20"><a href="#cb6-20" aria-hidden="true" tabindex="-1"></a>    spatial_extent<span class="op">=</span>spatial_extent_prototype,</span>
<span id="cb6-21"><a href="#cb6-21" aria-hidden="true" tabindex="-1"></a>    temporal_extent<span class="op">=</span>temporal_extent_prototype,</span>
<span id="cb6-22"><a href="#cb6-22" aria-hidden="true" tabindex="-1"></a>    bands<span class="op">=</span>[<span class="st">"confidence_in"</span>],</span>
<span id="cb6-23"><a href="#cb6-23" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb6-24"><a href="#cb6-24" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-25"><a href="#cb6-25" aria-hidden="true" tabindex="-1"></a>red <span class="op">=</span> connection.load_collection(</span>
<span id="cb6-26"><a href="#cb6-26" aria-hidden="true" tabindex="-1"></a>    <span class="st">"SENTINEL3_OLCI_L2_LAND"</span>,</span>
<span id="cb6-27"><a href="#cb6-27" aria-hidden="true" tabindex="-1"></a>    spatial_extent<span class="op">=</span>spatial_extent_prototype,</span>
<span id="cb6-28"><a href="#cb6-28" aria-hidden="true" tabindex="-1"></a>    temporal_extent<span class="op">=</span>temporal_extent_prototype,</span>
<span id="cb6-29"><a href="#cb6-29" aria-hidden="true" tabindex="-1"></a>    bands<span class="op">=</span>[<span class="st">"RC681"</span>],</span>
<span id="cb6-30"><a href="#cb6-30" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb6-31"><a href="#cb6-31" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-32"><a href="#cb6-32" aria-hidden="true" tabindex="-1"></a>nir <span class="op">=</span> connection.load_collection(</span>
<span id="cb6-33"><a href="#cb6-33" aria-hidden="true" tabindex="-1"></a>    <span class="st">"SENTINEL3_OLCI_L2_LAND"</span>,</span>
<span id="cb6-34"><a href="#cb6-34" aria-hidden="true" tabindex="-1"></a>    spatial_extent<span class="op">=</span>spatial_extent_prototype,</span>
<span id="cb6-35"><a href="#cb6-35" aria-hidden="true" tabindex="-1"></a>    temporal_extent<span class="op">=</span>temporal_extent_prototype,</span>
<span id="cb6-36"><a href="#cb6-36" aria-hidden="true" tabindex="-1"></a>    bands<span class="op">=</span>[<span class="st">"RC865"</span>],</span>
<span id="cb6-37"><a href="#cb6-37" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb6-38"><a href="#cb6-38" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-39"><a href="#cb6-39" aria-hidden="true" tabindex="-1"></a>cube_NIRv <span class="op">=</span> ((nir <span class="op">-</span> red) <span class="op">/</span> (nir <span class="op">+</span> red)) <span class="op">*</span> nir</span>
<span id="cb6-40"><a href="#cb6-40" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-41"><a href="#cb6-41" aria-hidden="true" tabindex="-1"></a>cube_NIRv <span class="op">=</span> cube_NIRv.rename_labels(dimension<span class="op">=</span><span class="st">"bands"</span>, target<span class="op">=</span>[<span class="st">"NIRv"</span>])</span>
<span id="cb6-42"><a href="#cb6-42" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-43"><a href="#cb6-43" aria-hidden="true" tabindex="-1"></a>cube_OLCI_qc <span class="op">=</span> connection.load_collection(</span>
<span id="cb6-44"><a href="#cb6-44" aria-hidden="true" tabindex="-1"></a>    <span class="st">"SENTINEL3_OLCI_L2_LAND"</span>,</span>
<span id="cb6-45"><a href="#cb6-45" aria-hidden="true" tabindex="-1"></a>    spatial_extent<span class="op">=</span>spatial_extent_prototype,</span>
<span id="cb6-46"><a href="#cb6-46" aria-hidden="true" tabindex="-1"></a>    temporal_extent<span class="op">=</span>temporal_extent_prototype,</span>
<span id="cb6-47"><a href="#cb6-47" aria-hidden="true" tabindex="-1"></a>    bands<span class="op">=</span>[<span class="st">"LQSF"</span>],</span>
<span id="cb6-48"><a href="#cb6-48" aria-hidden="true" tabindex="-1"></a>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
</section>
<section id="masking-clouds" class="level3">
<h3 class="anchored" data-anchor-id="masking-clouds">Masking clouds</h3>
<div id="7eaa9374" class="cell" data-execution_count="8">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb7"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a>mask <span class="op">=</span> cube_LST_qc <span class="op">&gt;</span> <span class="dv">5000</span></span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a>cube_LST_masked <span class="op">=</span> cube_LST.mask(mask)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<div id="68a47628" class="cell" data-execution_count="9">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb8"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a>mask_olci <span class="op">=</span> cube_OLCI_qc <span class="op">&gt;</span> <span class="dv">10000</span></span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true" tabindex="-1"></a>cube_NIRv_masked <span class="op">=</span> cube_NIRv.mask(mask_olci)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<p>If we call one of the cubes we can see the process graph that is created by openEO:</p>
<div id="91291a5b" class="cell" data-execution_count="10">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb9"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a>cube_LST_masked</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-display" data-execution_count="9">

    <script>
    if (!window.customElements || !window.customElements.get('openeo-model-builder')) {
        var el = document.createElement('script');
        el.src = "https://cdn.jsdelivr.net/npm/@openeo/vue-components@2/assets/openeo.min.js";
        document.head.appendChild(el);

        var font = document.createElement('font');
        font.as = "font";
        font.type = "font/woff2";
        font.crossOrigin = true;
        font.href = "https://use.fontawesome.com/releases/v5.13.0/webfonts/fa-solid-900.woff2"
        document.head.appendChild(font);
    }
    </script>
    <openeo-model-builder>
        <script type="application/json">{"id": "16a87d311470491a84a638ed094e0719", "explicit-zoom": true, "height": "400px", "value": {"process_graph": {"loadcollection1": {"process_id": "load_collection", "arguments": {"bands": ["LST"], "id": "SENTINEL3_SLSTR_L2_LST", "spatial_extent": {"west": -6.921387, "east": -1.889648, "south": 37.230328, "north": 40.229218}, "temporal_extent": ["2023-06-23", "2023-06-30"]}}, "loadcollection2": {"process_id": "load_collection", "arguments": {"bands": ["confidence_in"], "id": "SENTINEL3_SLSTR_L2_LST", "spatial_extent": {"west": -6.921387, "east": -1.889648, "south": 37.230328, "north": 40.229218}, "temporal_extent": ["2023-06-23", "2023-06-30"]}}, "apply1": {"process_id": "apply", "arguments": {"data": {"from_node": "loadcollection2"}, "process": {"process_graph": {"gt1": {"process_id": "gt", "arguments": {"x": {"from_parameter": "x"}, "y": 5000}, "result": true}}}}}, "mask1": {"process_id": "mask", "arguments": {"data": {"from_node": "loadcollection1"}, "mask": {"from_node": "apply1"}}, "result": true}}}}</script>
    </openeo-model-builder>
    
</div>
</div>
</section>
</section>
<section id="reducing-the-time-dimension" class="level2">
<h2 class="anchored" data-anchor-id="reducing-the-time-dimension">Reducing the time dimension</h2>
<p>For this analysis we will compute a composite of the area of interest using all the observations during the time period for all the variables except SIF that is already one time step observation.</p>
<div id="d0112345" class="cell" data-execution_count="11">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb10"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="co"># cube_SIF_original_median = cube_SIF_original_median.reduce_temporal(reducer="median")</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<div id="771fd810" class="cell" data-execution_count="12">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb11"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a>cube_LST_median <span class="op">=</span> cube_LST_masked.reduce_temporal(reducer<span class="op">=</span><span class="st">"median"</span>)</span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-3"><a href="#cb11-3" aria-hidden="true" tabindex="-1"></a>cube_NIRv_median <span class="op">=</span> cube_NIRv_masked.reduce_temporal(reducer<span class="op">=</span><span class="st">"median"</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<div id="23d93179" class="cell" data-execution_count="13">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb12"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a>cube_LST_median</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-display" data-execution_count="12">

    <script>
    if (!window.customElements || !window.customElements.get('openeo-model-builder')) {
        var el = document.createElement('script');
        el.src = "https://cdn.jsdelivr.net/npm/@openeo/vue-components@2/assets/openeo.min.js";
        document.head.appendChild(el);

        var font = document.createElement('font');
        font.as = "font";
        font.type = "font/woff2";
        font.crossOrigin = true;
        font.href = "https://use.fontawesome.com/releases/v5.13.0/webfonts/fa-solid-900.woff2"
        document.head.appendChild(font);
    }
    </script>
    <openeo-model-builder>
        <script type="application/json">{"id": "68408694dcb54c29aea1ff858271b66e", "explicit-zoom": true, "height": "400px", "value": {"process_graph": {"loadcollection1": {"process_id": "load_collection", "arguments": {"bands": ["LST"], "id": "SENTINEL3_SLSTR_L2_LST", "spatial_extent": {"west": -6.921387, "east": -1.889648, "south": 37.230328, "north": 40.229218}, "temporal_extent": ["2023-06-23", "2023-06-30"]}}, "loadcollection2": {"process_id": "load_collection", "arguments": {"bands": ["confidence_in"], "id": "SENTINEL3_SLSTR_L2_LST", "spatial_extent": {"west": -6.921387, "east": -1.889648, "south": 37.230328, "north": 40.229218}, "temporal_extent": ["2023-06-23", "2023-06-30"]}}, "apply1": {"process_id": "apply", "arguments": {"data": {"from_node": "loadcollection2"}, "process": {"process_graph": {"gt1": {"process_id": "gt", "arguments": {"x": {"from_parameter": "x"}, "y": 5000}, "result": true}}}}}, "mask1": {"process_id": "mask", "arguments": {"data": {"from_node": "loadcollection1"}, "mask": {"from_node": "apply1"}}}, "reducedimension1": {"process_id": "reduce_dimension", "arguments": {"data": {"from_node": "mask1"}, "dimension": "t", "reducer": {"process_graph": {"median1": {"process_id": "median", "arguments": {"data": {"from_parameter": "data"}}, "result": true}}}}, "result": true}}}}</script>
    </openeo-model-builder>
    
</div>
</div>
</section>
<section id="inspecting-the-variables" class="level2">
<h2 class="anchored" data-anchor-id="inspecting-the-variables">Inspecting the variables</h2>
<p>Then we will inspect the products, for that we need to execute the processors for each cube, save it locally, open and plot.</p>
<div id="bb163d82" class="cell" data-execution_count="14">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb13"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a><span class="co"># cube_SIF_original_median.execute_batch(outputfile="data/cube_SIF_median.tif")</span></span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a><span class="co"># cube_LST_median.execute_batch(outputfile="data/cube_LST_median.tif")</span></span>
<span id="cb13-3"><a href="#cb13-3" aria-hidden="true" tabindex="-1"></a><span class="co"># cube_NIRv_median.execute_batch(outputfile="data/cube_NIRv_median.tif")</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<div id="cadce70c" class="cell" data-execution_count="15">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb14"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a>cube_sif_local <span class="op">=</span> rio.open_rasterio(</span>
<span id="cb14-2"><a href="#cb14-2" aria-hidden="true" tabindex="-1"></a>    filename<span class="op">=</span><span class="st">"data/cube_SIF_median.tif"</span>, mask_and_scale<span class="op">=</span><span class="va">True</span></span>
<span id="cb14-3"><a href="#cb14-3" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb14-4"><a href="#cb14-4" aria-hidden="true" tabindex="-1"></a>cube_lst_local <span class="op">=</span> rio.open_rasterio(filename<span class="op">=</span><span class="st">"data/cube_LST_median.tif"</span>)</span>
<span id="cb14-5"><a href="#cb14-5" aria-hidden="true" tabindex="-1"></a>cube_nirv_local <span class="op">=</span> rio.open_rasterio(filename<span class="op">=</span><span class="st">"data/cube_NIRv_median.tif"</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<div id="5fc10a63" class="cell" data-execution_count="16">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb15"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a>fig, axs <span class="op">=</span> plt.subplots(nrows<span class="op">=</span><span class="dv">3</span>, figsize<span class="op">=</span>(<span class="dv">6</span>, <span class="dv">15</span>))</span>
<span id="cb15-2"><a href="#cb15-2" aria-hidden="true" tabindex="-1"></a>cube_sif_local.plot(ax<span class="op">=</span>axs[<span class="dv">0</span>])</span>
<span id="cb15-3"><a href="#cb15-3" aria-hidden="true" tabindex="-1"></a>axs[<span class="dv">0</span>].set_title(<span class="st">"SIF"</span>)</span>
<span id="cb15-4"><a href="#cb15-4" aria-hidden="true" tabindex="-1"></a>cube_lst_local.plot(ax<span class="op">=</span>axs[<span class="dv">1</span>])</span>
<span id="cb15-5"><a href="#cb15-5" aria-hidden="true" tabindex="-1"></a>axs[<span class="dv">1</span>].set_title(<span class="st">"LST"</span>)</span>
<span id="cb15-6"><a href="#cb15-6" aria-hidden="true" tabindex="-1"></a>cube_nirv_local.plot(ax<span class="op">=</span>axs[<span class="dv">2</span>])</span>
<span id="cb15-7"><a href="#cb15-7" aria-hidden="true" tabindex="-1"></a>axs[<span class="dv">2</span>].set_title(<span class="st">"NIRv"</span>)</span>
<span id="cb15-8"><a href="#cb15-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-9"><a href="#cb15-9" aria-hidden="true" tabindex="-1"></a>plt.tight_layout()</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="openEO_sif_downscaling_documented_and_plots_files/figure-html/cell-17-output-1.png" width="563" height="1428" class="figure-img"></p>
</figure>
</div>
</div>
</div>
<div class="callout callout-style-default callout-important callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Important
</div>
</div>
<div class="callout-body-container callout-body">
<p>The LST composite looks heavily influenced by the orbits. For sure it can be betterfor example <a href="https://docs.terrascope.be/DataProducts/Sentinel-3/ProductsOverview.html">Terrascope Sentinel-3 Level 3 Land Surface Temperature daily synthesis product</a></p>
<p>OR maybe Sentinel-3 SYN SLSTR bands</p>
</div>
</div>
</section>
<section id="spatial-resampling-to-match-the-sif-resolution-product" class="level2">
<h2 class="anchored" data-anchor-id="spatial-resampling-to-match-the-sif-resolution-product">Spatial resampling to match the SIF resolution product</h2>
<div id="59081f4b" class="cell" data-execution_count="17">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb16"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a>cube_LST_median_low <span class="op">=</span> cube_LST_median.resample_cube_spatial(</span>
<span id="cb16-2"><a href="#cb16-2" aria-hidden="true" tabindex="-1"></a>    target<span class="op">=</span>cube_SIF_original_median, method<span class="op">=</span><span class="st">"med"</span></span>
<span id="cb16-3"><a href="#cb16-3" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb16-4"><a href="#cb16-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-5"><a href="#cb16-5" aria-hidden="true" tabindex="-1"></a>cube_NIRv_median_low <span class="op">=</span> cube_NIRv_median.resample_cube_spatial(</span>
<span id="cb16-6"><a href="#cb16-6" aria-hidden="true" tabindex="-1"></a>    target<span class="op">=</span>cube_SIF_original_median, method<span class="op">=</span><span class="st">"med"</span></span>
<span id="cb16-7"><a href="#cb16-7" aria-hidden="true" tabindex="-1"></a>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<p>Merging all the cubes at low resolution (SIF original resolution)</p>
<div id="7718a651" class="cell" data-execution_count="18">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb17"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a>dataset_SIF_low <span class="op">=</span> cube_SIF_original_median.merge_cubes(cube_LST_median_low)</span>
<span id="cb17-2"><a href="#cb17-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-3"><a href="#cb17-3" aria-hidden="true" tabindex="-1"></a>dataset_SIF_low <span class="op">=</span> dataset_SIF_low.merge_cubes(cube_NIRv_median_low)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<p>Adding two dummy variables to the datacube to match the number of oputput parameters of the optimization function.</p>
<div id="cbf996d8" class="cell" data-execution_count="19">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb18"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a>dataset_SIF_low <span class="op">=</span> dataset_SIF_low.merge_cubes(</span>
<span id="cb18-2"><a href="#cb18-2" aria-hidden="true" tabindex="-1"></a>    other<span class="op">=</span>cube_SIF_original_median.rename_labels(dimension<span class="op">=</span><span class="st">"bands"</span>, target<span class="op">=</span>[<span class="st">"dummy_1"</span>])</span>
<span id="cb18-3"><a href="#cb18-3" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb18-4"><a href="#cb18-4" aria-hidden="true" tabindex="-1"></a>dataset_SIF_low <span class="op">=</span> dataset_SIF_low.merge_cubes(</span>
<span id="cb18-5"><a href="#cb18-5" aria-hidden="true" tabindex="-1"></a>    other<span class="op">=</span>cube_SIF_original_median.rename_labels(dimension<span class="op">=</span><span class="st">"bands"</span>, target<span class="op">=</span>[<span class="st">"dummy_2"</span>])</span>
<span id="cb18-6"><a href="#cb18-6" aria-hidden="true" tabindex="-1"></a>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<div id="d949c766" class="cell" data-execution_count="20">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb19"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a><span class="co"># dataset_SIF_low.execute_batch(outputfile="data/sif_predictors_cube_low.nc")</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<p>Lets check the cube after resampling</p>
<div id="6d4ae32a" class="cell" data-execution_count="21">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb20"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a>dataset_sif_low_local <span class="op">=</span> xr.open_dataset(<span class="st">"data/sif_predictors_cube_low.nc"</span>)</span>
<span id="cb20-2"><a href="#cb20-2" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(dataset_sif_low_local)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>&lt;xarray.Dataset&gt; Size: 31kB
Dimensions:  (t: 1, x: 51, y: 30)
Coordinates:
  * t        (t) datetime64[ns] 8B 2023-06-29
  * x        (x) float64 408B -6.871 -6.771 -6.671 ... -2.071 -1.971 -1.871
  * y        (y) float64 240B 40.18 40.08 39.98 39.88 ... 37.48 37.38 37.28
Data variables:
    crs      |S1 1B ...
    SIF      (t, y, x) float32 6kB ...
    LST      (t, y, x) float32 6kB ...
    NIRv     (t, y, x) float32 6kB ...
    dummy_1  (t, y, x) float32 6kB ...
    dummy_2  (t, y, x) float32 6kB ...
Attributes:
    Conventions:  CF-1.9
    institution:  Copernicus Data Space Ecosystem openEO API - 0.70.0a5.dev20...
    description:  
    title:        </code></pre>
</div>
</div>
<div id="bb239691" class="cell" data-execution_count="22">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb22"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a>fig, axs <span class="op">=</span> plt.subplots(nrows<span class="op">=</span><span class="dv">3</span>, figsize<span class="op">=</span>(<span class="dv">6</span>, <span class="dv">15</span>))</span>
<span id="cb22-2"><a href="#cb22-2" aria-hidden="true" tabindex="-1"></a>dataset_sif_low_local[<span class="st">"SIF"</span>].plot(ax<span class="op">=</span>axs[<span class="dv">0</span>])</span>
<span id="cb22-3"><a href="#cb22-3" aria-hidden="true" tabindex="-1"></a>axs[<span class="dv">0</span>].set_title(<span class="st">"SIF"</span>)</span>
<span id="cb22-4"><a href="#cb22-4" aria-hidden="true" tabindex="-1"></a>dataset_sif_low_local[<span class="st">"LST"</span>].plot(ax<span class="op">=</span>axs[<span class="dv">1</span>])</span>
<span id="cb22-5"><a href="#cb22-5" aria-hidden="true" tabindex="-1"></a>axs[<span class="dv">1</span>].set_title(<span class="st">"LST"</span>)</span>
<span id="cb22-6"><a href="#cb22-6" aria-hidden="true" tabindex="-1"></a>dataset_sif_low_local[<span class="st">"NIRv"</span>].plot(ax<span class="op">=</span>axs[<span class="dv">2</span>])</span>
<span id="cb22-7"><a href="#cb22-7" aria-hidden="true" tabindex="-1"></a>axs[<span class="dv">2</span>].set_title(<span class="st">"NIRv"</span>)</span>
<span id="cb22-8"><a href="#cb22-8" aria-hidden="true" tabindex="-1"></a>plt.tight_layout()</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="openEO_sif_downscaling_documented_and_plots_files/figure-html/cell-23-output-1.png" width="564" height="1428" class="figure-img"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="sif-parameter-optimization-at-low-spatial-resolution" class="level2">
<h2 class="anchored" data-anchor-id="sif-parameter-optimization-at-low-spatial-resolution">SIF parameter optimization at low spatial resolution</h2>
<p>To predict SIF we use the following formulation:</p>
<div id="def-sif" class="theorem definition">
<p><span class="theorem-title"><strong>Definition 1</strong></span> <span class="math display">\[SIF = f(V) \cdot f(T)\]</span></p>
</div>
<p>where <span class="math inline">\(f(V)\)</span> represents the vegetation module and <span class="math inline">\(V\)</span> is a vegation index: <span class="math display">\[f(V) = b_2 \cdot V^{b_1}\]</span></p>
<p><span class="math inline">\(f(T)\)</span> represents the temperature module where <span class="math inline">\(T\)</span> is a variable that represent temperature stress (e.g.&nbsp;air temperature at 2 meters, or land surface temperature)</p>
<p><span class="math display">\[
f(T) = e^{-\frac{(T + b_5)^2}{2b_6^2}}
\]</span></p>
<p>Given the previous formulation we optimize the function using L-BFGS-B and a spatial moving window with 40 observations. The optimization function is defined in <a href="https://github.com/dpabon/SIF_downscaling_CDSE/blob/main/sif_downscaling_openEO_CDSE/udf/udf_parameters_optim_low_res.py">udf_parameters_optim_low_res.py</a>.</p>
<p>First we need to define the boundaries and start values for <span class="math inline">\(b1\)</span>, <span class="math inline">\(b2\)</span>, <span class="math inline">\(b5\)</span> <span class="math inline">\(b6\)</span> parameters:</p>
<div id="130ec08c" class="cell" data-execution_count="23">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb23"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a><span class="co"># the order for each variable follows: b1,b2,b3,b4,b5,b6</span></span>
<span id="cb23-2"><a href="#cb23-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-3"><a href="#cb23-3" aria-hidden="true" tabindex="-1"></a>param_min <span class="op">=</span> [<span class="dv">0</span>, <span class="fl">0.1</span>, <span class="op">-</span><span class="dv">310</span>, <span class="dv">1</span>]</span>
<span id="cb23-4"><a href="#cb23-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-5"><a href="#cb23-5" aria-hidden="true" tabindex="-1"></a>param_ini <span class="op">=</span> [<span class="dv">1</span>, <span class="dv">2</span>, <span class="op">-</span><span class="dv">295</span>, <span class="dv">10</span>]</span>
<span id="cb23-6"><a href="#cb23-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-7"><a href="#cb23-7" aria-hidden="true" tabindex="-1"></a>param_max <span class="op">=</span> [<span class="fl">1.5</span>, <span class="dv">5</span>, <span class="op">-</span><span class="dv">290</span>, <span class="dv">50</span>]</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<p>To apply the optimization function in the data cube we define an openEO User Define Function using:</p>
<div id="ec443ee1" class="cell" data-execution_count="24">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb24"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a>my_udf <span class="op">=</span> openeo.UDF.from_file(</span>
<span id="cb24-2"><a href="#cb24-2" aria-hidden="true" tabindex="-1"></a>    <span class="st">"src/udf/udf_parameters_optim_low_res.py"</span>,</span>
<span id="cb24-3"><a href="#cb24-3" aria-hidden="true" tabindex="-1"></a>    context<span class="op">=</span>{</span>
<span id="cb24-4"><a href="#cb24-4" aria-hidden="true" tabindex="-1"></a>        <span class="st">"param_ini"</span>: param_ini,</span>
<span id="cb24-5"><a href="#cb24-5" aria-hidden="true" tabindex="-1"></a>        <span class="st">"param_min"</span>: param_min,</span>
<span id="cb24-6"><a href="#cb24-6" aria-hidden="true" tabindex="-1"></a>        <span class="st">"param_max"</span>: param_max,</span>
<span id="cb24-7"><a href="#cb24-7" aria-hidden="true" tabindex="-1"></a>        <span class="st">"min_obs"</span>: <span class="dv">25</span>,</span>
<span id="cb24-8"><a href="#cb24-8" aria-hidden="true" tabindex="-1"></a>        <span class="st">"window_size_lat"</span>: <span class="dv">6</span>,</span>
<span id="cb24-9"><a href="#cb24-9" aria-hidden="true" tabindex="-1"></a>        <span class="st">"window_size_lon"</span>: <span class="dv">7</span>,</span>
<span id="cb24-10"><a href="#cb24-10" aria-hidden="true" tabindex="-1"></a>    },</span>
<span id="cb24-11"><a href="#cb24-11" aria-hidden="true" tabindex="-1"></a>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<p>Notice that the size of the moving window is set using <code>window_size_lat</code> and <code>window_size_lon</code>.</p>
<p>Then we can apply our function to the data cube using:</p>
<div id="c8b3141f" class="cell" data-execution_count="25">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb25"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb25-1"><a href="#cb25-1" aria-hidden="true" tabindex="-1"></a>parameters_cube_low <span class="op">=</span> dataset_SIF_low.apply_neighborhood(</span>
<span id="cb25-2"><a href="#cb25-2" aria-hidden="true" tabindex="-1"></a>    process<span class="op">=</span>my_udf,</span>
<span id="cb25-3"><a href="#cb25-3" aria-hidden="true" tabindex="-1"></a>    size<span class="op">=</span>[</span>
<span id="cb25-4"><a href="#cb25-4" aria-hidden="true" tabindex="-1"></a>        {<span class="st">"dimension"</span>: <span class="st">"x"</span>, <span class="st">"value"</span>: <span class="dv">512</span>, <span class="st">"unit"</span>: <span class="st">"px"</span>},</span>
<span id="cb25-5"><a href="#cb25-5" aria-hidden="true" tabindex="-1"></a>        {<span class="st">"dimension"</span>: <span class="st">"y"</span>, <span class="st">"value"</span>: <span class="dv">512</span>, <span class="st">"unit"</span>: <span class="st">"px"</span>},</span>
<span id="cb25-6"><a href="#cb25-6" aria-hidden="true" tabindex="-1"></a>    ],</span>
<span id="cb25-7"><a href="#cb25-7" aria-hidden="true" tabindex="-1"></a>    overlap<span class="op">=</span>[</span>
<span id="cb25-8"><a href="#cb25-8" aria-hidden="true" tabindex="-1"></a>        {<span class="st">"dimension"</span>: <span class="st">"x"</span>, <span class="st">"value"</span>: <span class="dv">0</span>, <span class="st">"unit"</span>: <span class="st">"px"</span>},</span>
<span id="cb25-9"><a href="#cb25-9" aria-hidden="true" tabindex="-1"></a>        {<span class="st">"dimension"</span>: <span class="st">"y"</span>, <span class="st">"value"</span>: <span class="dv">0</span>, <span class="st">"unit"</span>: <span class="st">"px"</span>},</span>
<span id="cb25-10"><a href="#cb25-10" aria-hidden="true" tabindex="-1"></a>    ],</span>
<span id="cb25-11"><a href="#cb25-11" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb25-12"><a href="#cb25-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-13"><a href="#cb25-13" aria-hidden="true" tabindex="-1"></a><span class="co"># changing the name of the ouput</span></span>
<span id="cb25-14"><a href="#cb25-14" aria-hidden="true" tabindex="-1"></a>output_bands <span class="op">=</span> [<span class="st">"b1"</span>, <span class="st">"b2"</span>, <span class="st">"b5"</span>, <span class="st">"b6"</span>]</span>
<span id="cb25-15"><a href="#cb25-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-16"><a href="#cb25-16" aria-hidden="true" tabindex="-1"></a>parameters_cube_low_rename <span class="op">=</span> parameters_cube_low.rename_labels(<span class="st">"bands"</span>, output_bands)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<p>and see the process graph:</p>
<div id="97cdf4ea" class="cell" data-execution_count="26">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb26"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb26-1"><a href="#cb26-1" aria-hidden="true" tabindex="-1"></a>parameters_cube_low_rename</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-display" data-execution_count="24">

    <script>
    if (!window.customElements || !window.customElements.get('openeo-model-builder')) {
        var el = document.createElement('script');
        el.src = "https://cdn.jsdelivr.net/npm/@openeo/vue-components@2/assets/openeo.min.js";
        document.head.appendChild(el);

        var font = document.createElement('font');
        font.as = "font";
        font.type = "font/woff2";
        font.crossOrigin = true;
        font.href = "https://use.fontawesome.com/releases/v5.13.0/webfonts/fa-solid-900.woff2"
        document.head.appendChild(font);
    }
    </script>
    <openeo-model-builder>
        <script type="application/json">{"id": "9b35f7b029cc4721b49f90f5cb094584", "explicit-zoom": true, "height": "400px", "value": {"process_graph": {"loadstac1": {"process_id": "load_stac", "arguments": {"bands": ["SIF"], "spatial_extent": {"west": -6.921387, "east": -1.889648, "south": 37.230328, "north": 40.229218}, "temporal_extent": ["2023-06-23", "2023-06-30"], "url": "https://raw.githubusercontent.com/dpabon/SIF_downscaling_CDSE/refs/heads/main/data/SIF_20180629.json"}}, "loadcollection1": {"process_id": "load_collection", "arguments": {"bands": ["LST"], "id": "SENTINEL3_SLSTR_L2_LST", "spatial_extent": {"west": -6.921387, "east": -1.889648, "south": 37.230328, "north": 40.229218}, "temporal_extent": ["2023-06-23", "2023-06-30"]}}, "loadcollection2": {"process_id": "load_collection", "arguments": {"bands": ["confidence_in"], "id": "SENTINEL3_SLSTR_L2_LST", "spatial_extent": {"west": -6.921387, "east": -1.889648, "south": 37.230328, "north": 40.229218}, "temporal_extent": ["2023-06-23", "2023-06-30"]}}, "apply1": {"process_id": "apply", "arguments": {"data": {"from_node": "loadcollection2"}, "process": {"process_graph": {"gt1": {"process_id": "gt", "arguments": {"x": {"from_parameter": "x"}, "y": 5000}, "result": true}}}}}, "mask1": {"process_id": "mask", "arguments": {"data": {"from_node": "loadcollection1"}, "mask": {"from_node": "apply1"}}}, "reducedimension1": {"process_id": "reduce_dimension", "arguments": {"data": {"from_node": "mask1"}, "dimension": "t", "reducer": {"process_graph": {"median1": {"process_id": "median", "arguments": {"data": {"from_parameter": "data"}}, "result": true}}}}}, "resamplecubespatial1": {"process_id": "resample_cube_spatial", "arguments": {"data": {"from_node": "reducedimension1"}, "method": "med", "target": {"from_node": "loadstac1"}}}, "mergecubes1": {"process_id": "merge_cubes", "arguments": {"cube1": {"from_node": "loadstac1"}, "cube2": {"from_node": "resamplecubespatial1"}}}, "loadcollection3": {"process_id": "load_collection", "arguments": {"bands": ["RC865"], "id": "SENTINEL3_OLCI_L2_LAND", "spatial_extent": {"west": -6.921387, "east": -1.889648, "south": 37.230328, "north": 40.229218}, "temporal_extent": ["2023-06-23", "2023-06-30"]}}, "loadcollection4": {"process_id": "load_collection", "arguments": {"bands": ["RC681"], "id": "SENTINEL3_OLCI_L2_LAND", "spatial_extent": {"west": -6.921387, "east": -1.889648, "south": 37.230328, "north": 40.229218}, "temporal_extent": ["2023-06-23", "2023-06-30"]}}, "mergecubes2": {"process_id": "merge_cubes", "arguments": {"cube1": {"from_node": "loadcollection3"}, "cube2": {"from_node": "loadcollection4"}, "overlap_resolver": {"process_graph": {"subtract1": {"process_id": "subtract", "arguments": {"x": {"from_parameter": "x"}, "y": {"from_parameter": "y"}}, "result": true}}}}}, "mergecubes3": {"process_id": "merge_cubes", "arguments": {"cube1": {"from_node": "loadcollection3"}, "cube2": {"from_node": "loadcollection4"}, "overlap_resolver": {"process_graph": {"add1": {"process_id": "add", "arguments": {"x": {"from_parameter": "x"}, "y": {"from_parameter": "y"}}, "result": true}}}}}, "mergecubes4": {"process_id": "merge_cubes", "arguments": {"cube1": {"from_node": "mergecubes2"}, "cube2": {"from_node": "mergecubes3"}, "overlap_resolver": {"process_graph": {"divide1": {"process_id": "divide", "arguments": {"x": {"from_parameter": "x"}, "y": {"from_parameter": "y"}}, "result": true}}}}}, "mergecubes5": {"process_id": "merge_cubes", "arguments": {"cube1": {"from_node": "mergecubes4"}, "cube2": {"from_node": "loadcollection3"}, "overlap_resolver": {"process_graph": {"multiply1": {"process_id": "multiply", "arguments": {"x": {"from_parameter": "x"}, "y": {"from_parameter": "y"}}, "result": true}}}}}, "renamelabels1": {"process_id": "rename_labels", "arguments": {"data": {"from_node": "mergecubes5"}, "dimension": "bands", "target": ["NIRv"]}}, "loadcollection5": {"process_id": "load_collection", "arguments": {"bands": ["LQSF"], "id": "SENTINEL3_OLCI_L2_LAND", "spatial_extent": {"west": -6.921387, "east": -1.889648, "south": 37.230328, "north": 40.229218}, "temporal_extent": ["2023-06-23", "2023-06-30"]}}, "apply2": {"process_id": "apply", "arguments": {"data": {"from_node": "loadcollection5"}, "process": {"process_graph": {"gt2": {"process_id": "gt", "arguments": {"x": {"from_parameter": "x"}, "y": 10000}, "result": true}}}}}, "mask2": {"process_id": "mask", "arguments": {"data": {"from_node": "renamelabels1"}, "mask": {"from_node": "apply2"}}}, "reducedimension2": {"process_id": "reduce_dimension", "arguments": {"data": {"from_node": "mask2"}, "dimension": "t", "reducer": {"process_graph": {"median2": {"process_id": "median", "arguments": {"data": {"from_parameter": "data"}}, "result": true}}}}}, "resamplecubespatial2": {"process_id": "resample_cube_spatial", "arguments": {"data": {"from_node": "reducedimension2"}, "method": "med", "target": {"from_node": "loadstac1"}}}, "mergecubes6": {"process_id": "merge_cubes", "arguments": {"cube1": {"from_node": "mergecubes1"}, "cube2": {"from_node": "resamplecubespatial2"}}}, "renamelabels2": {"process_id": "rename_labels", "arguments": {"data": {"from_node": "loadstac1"}, "dimension": "bands", "target": ["dummy_1"]}}, "mergecubes7": {"process_id": "merge_cubes", "arguments": {"cube1": {"from_node": "mergecubes6"}, "cube2": {"from_node": "renamelabels2"}}}, "renamelabels3": {"process_id": "rename_labels", "arguments": {"data": {"from_node": "loadstac1"}, "dimension": "bands", "target": ["dummy_2"]}}, "mergecubes8": {"process_id": "merge_cubes", "arguments": {"cube1": {"from_node": "mergecubes7"}, "cube2": {"from_node": "renamelabels3"}}}, "applyneighborhood1": {"process_id": "apply_neighborhood", "arguments": {"data": {"from_node": "mergecubes8"}, "overlap": [{"dimension": "x", "value": 0, "unit": "px"}, {"dimension": "y", "value": 0, "unit": "px"}], "process": {"process_graph": {"runudf1": {"process_id": "run_udf", "arguments": {"context": {"param_ini": [1, 2, -295, 10], "param_min": [0, 0.1, -310, 1], "param_max": [1.5, 5, -290, 50], "min_obs": 25, "window_size_lat": 6, "window_size_lon": 7}, "data": {"from_parameter": "data"}, "runtime": "Python", "udf": "import xarray\nimport numpy as np\nfrom scipy.optimize import minimize\nfrom openeo.udf.debug import inspect\n\n\ndef apply_datacube(cube: xarray.DataArray, context: dict) -> xarray.DataArray:\n    input_cube_local = cube.to_dataset(dim=\"bands\")  #\n    inspect(input_cube_local, message=\"local dataset: \")\n    inspect(context[\"param_ini\"], message=\"context param_ini\")\n\n    param_ini = np.array(context[\"param_ini\"])\n    param_min = np.array(context[\"param_min\"])\n    param_max = np.array(context[\"param_max\"])\n    param_bounds = np.array([param_min, param_max])\n    min_obs = context[\"min_obs\"]\n    window_size_lat = context[\"window_size_lat\"]\n    window_size_lon = context[\"window_size_lon\"]\n\n    # Nested functions, not elegant but looks like the correct way when defining openEO.UDF\n\n    def vegetation(vi, b1, b2):\n        # Ensure inputs are numpy arrays for vectorized operations\n        vi_np = np.asarray(vi)\n        veg = b2 * np.power(vi_np, b1)\n        return veg\n\n    def temperature(lst, b5, b6):\n        # Gaussian function, ensure b6 (std dev) is positive\n        lst_np = np.asarray(lst)\n        temp = np.exp(-0.5 * np.power((lst_np + b5) / b6, 2))\n        return temp\n\n    def sif_model(vi, lst, params):\n        # Calculates SIF based on the model components.\n        b1, b2, b5, b6 = params\n        sif_pred = vegetation(vi, b1, b2) * temperature(lst, b5, b6)\n        return sif_pred\n\n    def cost_function(params, vi, lst, sif_observed):\n        # Least squares cost function for optimization.\n        sif_pred = sif_model(vi, lst, params)\n\n        # Calculate sum of squares, ignoring NaNs\n        cost = np.nansum((sif_pred - sif_observed) ** 2)\n\n        return cost\n\n    # From xarray apply_ufunc\n    def optimize_params_window(sif_w, ogvi_w, lst_w, param_ini, param_bounds, min_obs):\n        \"\"\"\n        Wrapper function to optimize SIF parameters for a single window.\n        Designed to be used with apply_ufunc or iteration.\n        Assumes input arrays (sif_w, etc.) are 2D numpy arrays (window data).\n        \"\"\"\n        # Flatten the window arrays and filter out NaNs\n        # Important: Filter consistently across all variables\n        mask = ~np.isnan(sif_w) & ~np.isnan(ogvi_w) & ~np.isnan(lst_w)\n        n_valid = np.sum(mask)\n\n        if n_valid < min_obs:\n            # Not enough valid observations in the window\n            return np.full(len(param_ini), np.nan, dtype=np.float32)\n\n        sif_obs_f = sif_w[mask]\n        vi_f = ogvi_w[mask]\n        lst_f = lst_w[mask]\n\n        # Define bounds for L-BFGS-B\n        bounds_scipy = list(zip(*param_bounds))  # [(min1, max1), (min2, max2), ...]\n\n        result = minimize(\n            cost_function,\n            x0=param_ini,\n            args=(vi_f, lst_f, sif_obs_f),\n            method=\"L-BFGS-B\",\n            bounds=bounds_scipy,\n            options={\"maxiter\": 1000, \"ftol\": 1e-7, \"gtol\": 1e-5},\n        )  # Adjust options as needed\n\n        optimized_params = np.array(np.clip(result.x, param_bounds[0], param_bounds[1]))\n        # print(optimized_params.dtype)\n        # print(optimized_params.size)\n        # print(optimized_params.shape)\n        return optimized_params\n\n    # Preparing output xarray.Datarray\n\n    # get the coodinates of the datacube\n    # processing data\n\n    SIF_w = input_cube_local[\"SIF\"]\n\n    VI_w = input_cube_local[\"NIRv\"]\n\n    LST_w = input_cube_local[\"LST\"]\n\n    output_bands = [\"b1\", \"b2\", \"b5\", \"b6\"]\n\n    parameters_cube = xarray.apply_ufunc(\n        optimize_params_window,  # Function to apply\n        # Input arrays:\n        SIF_w.rolling(x=window_size_lat, y=window_size_lon, center=True).construct(\n            x=\"lat_roll\", y=\"lon_roll\"\n        ),\n        VI_w.rolling(x=window_size_lat, y=window_size_lon, center=True).construct(\n            x=\"lat_roll\", y=\"lon_roll\"\n        ),\n        LST_w.rolling(x=window_size_lat, y=window_size_lon, center=True).construct(\n            x=\"lat_roll\", y=\"lon_roll\"\n        ),\n        # Keyword arguments for the function:\n        kwargs={\n            \"param_ini\": param_ini,\n            \"param_bounds\": param_bounds,\n            \"min_obs\": min_obs,\n        },\n        # Define input core dimensions (the window dimensions):\n        input_core_dims=[\n            [\"lat_roll\", \"lon_roll\"],\n            [\"lat_roll\", \"lon_roll\"],\n            [\"lat_roll\", \"lon_roll\"],\n        ],\n        # Define output core dimensions (the parameters dimension):\n        output_core_dims=[[\"bands\"]],\n        dask_gufunc_kwargs={\"output_sizes\": {\"bands\": 4}},\n        # Specify the parameters dimension coordinates:\n        dask=\"parallelized\",  # Enable Dask parallelization\n        output_dtypes=[np.float64],  # Specify output data type\n        vectorize=True,\n        # Add a new dimension 'parameters' to the output\n        exclude_dims=set((\"lat_roll\", \"lon_roll\")),  # Exclude window dims from output\n    ).rename(\"optimized_parameters\")\n\n    parameters_cube = parameters_cube.assign_coords({\"bands\": output_bands})\n\n    return parameters_cube\n"}, "result": true}}}, "size": [{"dimension": "x", "value": 512, "unit": "px"}, {"dimension": "y", "value": 512, "unit": "px"}]}}, "renamelabels4": {"process_id": "rename_labels", "arguments": {"data": {"from_node": "applyneighborhood1"}, "dimension": "bands", "target": ["b1", "b2", "b5", "b6"]}, "result": true}}}}</script>
    </openeo-model-builder>
    
</div>
</div>
<p>Now we will download the cube the optimized parameters to have a look and spatially upsample to match the Sentinel-3 cube at high resolution.</p>
<div id="55f7c8dd" class="cell" data-execution_count="27">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb27"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb27-1"><a href="#cb27-1" aria-hidden="true" tabindex="-1"></a><span class="co">"""</span></span>
<span id="cb27-2"><a href="#cb27-2" aria-hidden="true" tabindex="-1"></a><span class="co">parameters_cube_low_rename.execute_batch(outputfile="data/results_parameters_optim_low_resolution.tif")</span></span>
<span id="cb27-3"><a href="#cb27-3" aria-hidden="true" tabindex="-1"></a><span class="co">"""</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
</section>
<section id="checking-parameter-optimization-results" class="level2">
<h2 class="anchored" data-anchor-id="checking-parameter-optimization-results">Checking parameter optimization results</h2>
<div id="23515b25" class="cell" data-execution_count="28">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb28"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb28-1"><a href="#cb28-1" aria-hidden="true" tabindex="-1"></a>parameters_cube_local <span class="op">=</span> rio.open_rasterio(</span>
<span id="cb28-2"><a href="#cb28-2" aria-hidden="true" tabindex="-1"></a>    <span class="st">"data/results_parameters_optim_low_resolution.tif"</span></span>
<span id="cb28-3"><a href="#cb28-3" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb28-4"><a href="#cb28-4" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(parameters_cube_local)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>&lt;xarray.DataArray (band: 4, y: 30, x: 51)&gt; Size: 49kB
[6120 values with dtype=float64]
Coordinates:
  * band         (band) int64 32B 1 2 3 4
  * x            (x) float64 408B -6.871 -6.771 -6.671 ... -2.071 -1.971 -1.871
  * y            (y) float64 240B 40.18 40.08 39.98 39.88 ... 37.48 37.38 37.28
    spatial_ref  int64 8B 0
Attributes:
    institution:          Copernicus Data Space Ecosystem openEO API - 0.70.0...
    PROCESSING_SOFTWARE:  0.70.0a5
    AREA_OR_POINT:        Area
    _FillValue:           nan
    scale_factor:         1.0
    add_offset:           0.0
    long_name:            ('b1', 'b2', 'b5', 'b6')</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning 1: TIFFReadDirectory:Sum of Photometric type-related color channels and ExtraSamples doesn't match SamplesPerPixel. Defining non-color channels as ExtraSamples.</code></pre>
</div>
</div>
<div id="bb3dafe6" class="cell" data-execution_count="29">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb31"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb31-1"><a href="#cb31-1" aria-hidden="true" tabindex="-1"></a><span class="co"># plt.clf()</span></span>
<span id="cb31-2"><a href="#cb31-2" aria-hidden="true" tabindex="-1"></a>fig, axs <span class="op">=</span> plt.subplots(nrows<span class="op">=</span><span class="dv">2</span>, ncols<span class="op">=</span><span class="dv">2</span>, figsize<span class="op">=</span>(<span class="dv">8</span>, <span class="dv">6</span>))</span>
<span id="cb31-3"><a href="#cb31-3" aria-hidden="true" tabindex="-1"></a>axs <span class="op">=</span> axs.flatten()</span>
<span id="cb31-4"><a href="#cb31-4" aria-hidden="true" tabindex="-1"></a>counter <span class="op">=</span> <span class="dv">0</span></span>
<span id="cb31-5"><a href="#cb31-5" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> i <span class="kw">in</span> [<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">5</span>, <span class="dv">6</span>]:</span>
<span id="cb31-6"><a href="#cb31-6" aria-hidden="true" tabindex="-1"></a>    parameters_cube_local.isel(band<span class="op">=</span>counter).plot(ax<span class="op">=</span>axs[counter])</span>
<span id="cb31-7"><a href="#cb31-7" aria-hidden="true" tabindex="-1"></a>    axs[counter].set_title(<span class="ss">f"b</span><span class="sc">{</span>i<span class="sc">}</span><span class="ss">"</span>)</span>
<span id="cb31-8"><a href="#cb31-8" aria-hidden="true" tabindex="-1"></a>    counter <span class="op">+=</span> <span class="dv">1</span></span>
<span id="cb31-9"><a href="#cb31-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb31-10"><a href="#cb31-10" aria-hidden="true" tabindex="-1"></a>plt.tight_layout()</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="openEO_sif_downscaling_documented_and_plots_files/figure-html/cell-30-output-1.png" width="755" height="564" class="figure-img"></p>
</figure>
</div>
</div>
</div>
<p>.</p>
</section>
<section id="upsampling-the-parameters-cube" class="level1">
<h1>Upsampling the parameters cube</h1>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Note
</div>
</div>
<div class="callout-body-container callout-body">
<p>Until openEO team solve the upsampling issue. For details see <a href="https://forum.dataspace.copernicus.eu/t/how-to-spatial-upsampling-when-using-resample-cube-spatial/4358/6">CDSE discusion forum</a> We need to make a workaround to upsample the parameters cube.</p>
</div>
</div>
<p>This is a temporary solution</p>
<div id="541b73d7" class="cell" data-execution_count="30">
<details class="code-fold">
<summary>Code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb32"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb32-1"><a href="#cb32-1" aria-hidden="true" tabindex="-1"></a>parameters_low <span class="op">=</span> rio.open_rasterio(<span class="st">"data/results_parameters_optim_low_resolution.tif"</span>)</span>
<span id="cb32-2"><a href="#cb32-2" aria-hidden="true" tabindex="-1"></a>parameters_low</span>
<span id="cb32-3"><a href="#cb32-3" aria-hidden="true" tabindex="-1"></a>parameters_low <span class="op">=</span> parameters_low.rename(</span>
<span id="cb32-4"><a href="#cb32-4" aria-hidden="true" tabindex="-1"></a>    new_name_or_name_dict<span class="op">=</span>{<span class="st">"x"</span>: <span class="st">"longitude"</span>, <span class="st">"y"</span>: <span class="st">"latitude"</span>}</span>
<span id="cb32-5"><a href="#cb32-5" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb32-6"><a href="#cb32-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-7"><a href="#cb32-7" aria-hidden="true" tabindex="-1"></a><span class="co"># LST high resolution local</span></span>
<span id="cb32-8"><a href="#cb32-8" aria-hidden="true" tabindex="-1"></a>lst_high <span class="op">=</span> rio.open_rasterio(<span class="st">"data/cube_LST_median.tif"</span>)</span>
<span id="cb32-9"><a href="#cb32-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-10"><a href="#cb32-10" aria-hidden="true" tabindex="-1"></a>lst_high <span class="op">=</span> lst_high.rename(new_name_or_name_dict<span class="op">=</span>{<span class="st">"x"</span>: <span class="st">"longitude"</span>, <span class="st">"y"</span>: <span class="st">"latitude"</span>})</span>
<span id="cb32-11"><a href="#cb32-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-12"><a href="#cb32-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-13"><a href="#cb32-13" aria-hidden="true" tabindex="-1"></a>regridder <span class="op">=</span> xe.Regridder(</span>
<span id="cb32-14"><a href="#cb32-14" aria-hidden="true" tabindex="-1"></a>    parameters_low, lst_high, method<span class="op">=</span><span class="st">"patch"</span>, extrap_method<span class="op">=</span><span class="st">"nearest_s2d"</span></span>
<span id="cb32-15"><a href="#cb32-15" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb32-16"><a href="#cb32-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-17"><a href="#cb32-17" aria-hidden="true" tabindex="-1"></a>parameters_high <span class="op">=</span> regridder(parameters_low)</span>
<span id="cb32-18"><a href="#cb32-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-19"><a href="#cb32-19" aria-hidden="true" tabindex="-1"></a>parameters_high <span class="op">=</span> parameters_high.rename(</span>
<span id="cb32-20"><a href="#cb32-20" aria-hidden="true" tabindex="-1"></a>    new_name_or_name_dict<span class="op">=</span>{<span class="st">"longitude"</span>: <span class="st">"x"</span>, <span class="st">"latitude"</span>: <span class="st">"y"</span>}</span>
<span id="cb32-21"><a href="#cb32-21" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb32-22"><a href="#cb32-22" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-23"><a href="#cb32-23" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-24"><a href="#cb32-24" aria-hidden="true" tabindex="-1"></a><span class="co"># parameters_high = parameters_low.rio.reproject_match(lst_high)</span></span>
<span id="cb32-25"><a href="#cb32-25" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-26"><a href="#cb32-26" aria-hidden="true" tabindex="-1"></a><span class="co"># Saving the resample raster</span></span>
<span id="cb32-27"><a href="#cb32-27" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-28"><a href="#cb32-28" aria-hidden="true" tabindex="-1"></a>parameters_high.rio.to_raster(<span class="st">"data/results_paramaters_high_resolution.tif"</span>)</span>
<span id="cb32-29"><a href="#cb32-29" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-30"><a href="#cb32-30" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-31"><a href="#cb32-31" aria-hidden="true" tabindex="-1"></a>output_path <span class="op">=</span> <span class="st">"https://github.com/dpabon/SIF_downscaling_CDSE/raw/refs/heads/main/data/results_paramaters_high_resolution.tif"</span></span>
<span id="cb32-32"><a href="#cb32-32" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-33"><a href="#cb32-33" aria-hidden="true" tabindex="-1"></a><span class="co"># Get metadata from the raster</span></span>
<span id="cb32-34"><a href="#cb32-34" aria-hidden="true" tabindex="-1"></a>bbox <span class="op">=</span> <span class="bu">list</span>(parameters_high.rio.bounds())  <span class="co"># [minx, miny, maxx, maxy]</span></span>
<span id="cb32-35"><a href="#cb32-35" aria-hidden="true" tabindex="-1"></a>epsg <span class="op">=</span> <span class="st">"4326"</span></span>
<span id="cb32-36"><a href="#cb32-36" aria-hidden="true" tabindex="-1"></a>shape <span class="op">=</span> [parameters_high.rio.height, parameters_high.rio.width]</span>
<span id="cb32-37"><a href="#cb32-37" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-38"><a href="#cb32-38" aria-hidden="true" tabindex="-1"></a><span class="co"># Create geometry from bbox</span></span>
<span id="cb32-39"><a href="#cb32-39" aria-hidden="true" tabindex="-1"></a>geom <span class="op">=</span> mapping(box(<span class="op">*</span>bbox))</span>
<span id="cb32-40"><a href="#cb32-40" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-41"><a href="#cb32-41" aria-hidden="true" tabindex="-1"></a><span class="co"># Create the STAC item</span></span>
<span id="cb32-42"><a href="#cb32-42" aria-hidden="true" tabindex="-1"></a>item <span class="op">=</span> pystac.Item(</span>
<span id="cb32-43"><a href="#cb32-43" aria-hidden="true" tabindex="-1"></a>    <span class="bu">id</span><span class="op">=</span><span class="st">"results_parameters_high_resolution"</span>,</span>
<span id="cb32-44"><a href="#cb32-44" aria-hidden="true" tabindex="-1"></a>    geometry<span class="op">=</span>geom,</span>
<span id="cb32-45"><a href="#cb32-45" aria-hidden="true" tabindex="-1"></a>    bbox<span class="op">=</span>bbox,</span>
<span id="cb32-46"><a href="#cb32-46" aria-hidden="true" tabindex="-1"></a>    datetime<span class="op">=</span>datetime.strptime(temporal_extent_prototype[<span class="dv">0</span>], <span class="st">"%Y-%m-</span><span class="sc">%d</span><span class="st">"</span>),</span>
<span id="cb32-47"><a href="#cb32-47" aria-hidden="true" tabindex="-1"></a>    properties<span class="op">=</span>{},</span>
<span id="cb32-48"><a href="#cb32-48" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb32-49"><a href="#cb32-49" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-50"><a href="#cb32-50" aria-hidden="true" tabindex="-1"></a><span class="co"># Add projection extension</span></span>
<span id="cb32-51"><a href="#cb32-51" aria-hidden="true" tabindex="-1"></a>proj_ext <span class="op">=</span> ProjectionExtension.ext(item, add_if_missing<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb32-52"><a href="#cb32-52" aria-hidden="true" tabindex="-1"></a>proj_ext.epsg <span class="op">=</span> epsg</span>
<span id="cb32-53"><a href="#cb32-53" aria-hidden="true" tabindex="-1"></a>proj_ext.shape <span class="op">=</span> shape</span>
<span id="cb32-54"><a href="#cb32-54" aria-hidden="true" tabindex="-1"></a>proj_ext.bbox <span class="op">=</span> bbox</span>
<span id="cb32-55"><a href="#cb32-55" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-56"><a href="#cb32-56" aria-hidden="true" tabindex="-1"></a><span class="co"># Add EO extension</span></span>
<span id="cb32-57"><a href="#cb32-57" aria-hidden="true" tabindex="-1"></a>EOExtension.ext(item, add_if_missing<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb32-58"><a href="#cb32-58" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-59"><a href="#cb32-59" aria-hidden="true" tabindex="-1"></a><span class="co"># Add the asset</span></span>
<span id="cb32-60"><a href="#cb32-60" aria-hidden="true" tabindex="-1"></a>item.add_asset(</span>
<span id="cb32-61"><a href="#cb32-61" aria-hidden="true" tabindex="-1"></a>    key<span class="op">=</span><span class="st">"parameters"</span>,</span>
<span id="cb32-62"><a href="#cb32-62" aria-hidden="true" tabindex="-1"></a>    asset<span class="op">=</span>pystac.Asset(</span>
<span id="cb32-63"><a href="#cb32-63" aria-hidden="true" tabindex="-1"></a>        href<span class="op">=</span>output_path,  <span class="co"># or use an absolute path / URL</span></span>
<span id="cb32-64"><a href="#cb32-64" aria-hidden="true" tabindex="-1"></a>        title<span class="op">=</span><span class="st">"Optimized Parameters High Resolution"</span>,</span>
<span id="cb32-65"><a href="#cb32-65" aria-hidden="true" tabindex="-1"></a>        media_type<span class="op">=</span><span class="st">"image/tiff; application=geotiff"</span>,</span>
<span id="cb32-66"><a href="#cb32-66" aria-hidden="true" tabindex="-1"></a>        extra_fields<span class="op">=</span>{<span class="st">"eo:bands"</span>: [{<span class="st">"name"</span>: <span class="ss">f"b</span><span class="sc">{</span>i<span class="sc">}</span><span class="ss">"</span>} <span class="cf">for</span> i <span class="kw">in</span> [<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">5</span>, <span class="dv">6</span>]]},</span>
<span id="cb32-67"><a href="#cb32-67" aria-hidden="true" tabindex="-1"></a>    ),</span>
<span id="cb32-68"><a href="#cb32-68" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb32-69"><a href="#cb32-69" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-70"><a href="#cb32-70" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-71"><a href="#cb32-71" aria-hidden="true" tabindex="-1"></a><span class="co"># Save as JSON</span></span>
<span id="cb32-72"><a href="#cb32-72" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-73"><a href="#cb32-73" aria-hidden="true" tabindex="-1"></a><span class="cf">with</span> <span class="bu">open</span>(<span class="st">"data/results_parameters_high_resolution.json"</span>, <span class="st">"w"</span>) <span class="im">as</span> f:</span>
<span id="cb32-74"><a href="#cb32-74" aria-hidden="true" tabindex="-1"></a>    json.dump(item.to_dict(), f, indent<span class="op">=</span><span class="dv">2</span>)</span>
<span id="cb32-75"><a href="#cb32-75" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-76"><a href="#cb32-76" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(item.to_dict())</span>
<span id="cb32-77"><a href="#cb32-77" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-78"><a href="#cb32-78" aria-hidden="true" tabindex="-1"></a><span class="co"># pushing changes to the remote repo to access from openEO again</span></span>
<span id="cb32-79"><a href="#cb32-79" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-80"><a href="#cb32-80" aria-hidden="true" tabindex="-1"></a>git_commit <span class="op">=</span> [<span class="st">"git"</span>, <span class="st">"commit"</span>, <span class="st">"-m"</span>, <span class="st">'"Upsampling of parameters updated"'</span>, <span class="st">"-a"</span>]</span>
<span id="cb32-81"><a href="#cb32-81" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-82"><a href="#cb32-82" aria-hidden="true" tabindex="-1"></a>subprocess.run(git_commit)</span>
<span id="cb32-83"><a href="#cb32-83" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-84"><a href="#cb32-84" aria-hidden="true" tabindex="-1"></a>git_push <span class="op">=</span> [<span class="st">"git"</span>, <span class="st">"push"</span>]</span>
<span id="cb32-85"><a href="#cb32-85" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-86"><a href="#cb32-86" aria-hidden="true" tabindex="-1"></a>subprocess.run(git_push)</span>
<span id="cb32-87"><a href="#cb32-87" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-88"><a href="#cb32-88" aria-hidden="true" tabindex="-1"></a><span class="co"># plotting the resampled parameters</span></span>
<span id="cb32-89"><a href="#cb32-89" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-90"><a href="#cb32-90" aria-hidden="true" tabindex="-1"></a>fig, axs <span class="op">=</span> plt.subplots(nrows<span class="op">=</span><span class="dv">2</span>, ncols<span class="op">=</span><span class="dv">2</span>, figsize<span class="op">=</span>(<span class="dv">8</span>, <span class="dv">8</span>))</span>
<span id="cb32-91"><a href="#cb32-91" aria-hidden="true" tabindex="-1"></a>axs <span class="op">=</span> axs.flatten()</span>
<span id="cb32-92"><a href="#cb32-92" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-93"><a href="#cb32-93" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> i <span class="kw">in</span> <span class="bu">range</span>(<span class="dv">4</span>):</span>
<span id="cb32-94"><a href="#cb32-94" aria-hidden="true" tabindex="-1"></a>    parameters_high.sel(band<span class="op">=</span>i <span class="op">+</span> <span class="dv">1</span>).plot(ax<span class="op">=</span>axs[i])</span>
<span id="cb32-95"><a href="#cb32-95" aria-hidden="true" tabindex="-1"></a>    axs[i].set_title(<span class="ss">f"b</span><span class="sc">{</span>i <span class="op">+</span> <span class="dv">1</span><span class="sc">}</span><span class="ss">"</span>)</span>
<span id="cb32-96"><a href="#cb32-96" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-97"><a href="#cb32-97" aria-hidden="true" tabindex="-1"></a>plt.tight_layout()</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
</div>
<p>Once the upsampling functionality is part of openEO one should be able to do:</p>
<div id="b3ed4b9f" class="cell" data-execution_count="31">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb33"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb33-1"><a href="#cb33-1" aria-hidden="true" tabindex="-1"></a><span class="co">"""</span></span>
<span id="cb33-2"><a href="#cb33-2" aria-hidden="true" tabindex="-1"></a><span class="co">parameters_cube_high = parameters_cube_low_rename.resample_cube_spatial(</span></span>
<span id="cb33-3"><a href="#cb33-3" aria-hidden="true" tabindex="-1"></a><span class="co">    target=cube_LST_median</span></span>
<span id="cb33-4"><a href="#cb33-4" aria-hidden="true" tabindex="-1"></a><span class="co">)</span></span>
<span id="cb33-5"><a href="#cb33-5" aria-hidden="true" tabindex="-1"></a><span class="co">"""</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<p>Meanwhile we can use <code>load_stac</code> to load again the parameters cube in openEO.</p>
<div id="6e04b2c8" class="cell" data-execution_count="32">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb34"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb34-1"><a href="#cb34-1" aria-hidden="true" tabindex="-1"></a>parameters_cube_high <span class="op">=</span> connection.load_stac(</span>
<span id="cb34-2"><a href="#cb34-2" aria-hidden="true" tabindex="-1"></a>    <span class="st">"https://raw.githubusercontent.com/dpabon/SIF_downscaling_CDSE/refs/heads/main/data/results_parameters_high_resolution.json"</span>,</span>
<span id="cb34-3"><a href="#cb34-3" aria-hidden="true" tabindex="-1"></a>    spatial_extent<span class="op">=</span>spatial_extent_prototype,</span>
<span id="cb34-4"><a href="#cb34-4" aria-hidden="true" tabindex="-1"></a>    temporal_extent<span class="op">=</span>temporal_extent_prototype,</span>
<span id="cb34-5"><a href="#cb34-5" aria-hidden="true" tabindex="-1"></a>    bands<span class="op">=</span>[<span class="st">"b1"</span>, <span class="st">"b2"</span>, <span class="st">"b5"</span>, <span class="st">"b6"</span>],</span>
<span id="cb34-6"><a href="#cb34-6" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb34-7"><a href="#cb34-7" aria-hidden="true" tabindex="-1"></a>parameters_cube_high</span>
<span id="cb34-8"><a href="#cb34-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb34-9"><a href="#cb34-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb34-10"><a href="#cb34-10" aria-hidden="true" tabindex="-1"></a><span class="co"># parameters_cube_high_median = parameters_cube_high.reduce_temporal("median")</span></span>
<span id="cb34-11"><a href="#cb34-11" aria-hidden="true" tabindex="-1"></a>parameters_cube_high_median <span class="op">=</span> parameters_cube_high</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<section id="resampling-olci-products-at-1-km" class="level2">
<h2 class="anchored" data-anchor-id="resampling-olci-products-at-1-km">Resampling OLCI products at 1 km</h2>
<p>Originally the OLCI products are 300 meters resolution, as Sentinel-3 LST product is at 1 km (<a href="#tbl-predictors" class="quarto-xref">Table&nbsp;1</a>) we need to resample the NIRv cube:</p>
<div id="32987ce1" class="cell" data-execution_count="33">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb35"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb35-1"><a href="#cb35-1" aria-hidden="true" tabindex="-1"></a>cube_NIRv_median_1 <span class="op">=</span> cube_NIRv_median.resample_cube_spatial(</span>
<span id="cb35-2"><a href="#cb35-2" aria-hidden="true" tabindex="-1"></a>    target<span class="op">=</span>cube_LST_median, method<span class="op">=</span><span class="st">"med"</span></span>
<span id="cb35-3"><a href="#cb35-3" aria-hidden="true" tabindex="-1"></a>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<p>Then, we can concatenate all the variables in a single cube for prediction:</p>
<div id="00c72bf9" class="cell" data-execution_count="34">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb36"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb36-1"><a href="#cb36-1" aria-hidden="true" tabindex="-1"></a>cube_to_upscale <span class="op">=</span> parameters_cube_high_median.merge_cubes(cube_LST_median)</span>
<span id="cb36-2"><a href="#cb36-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb36-3"><a href="#cb36-3" aria-hidden="true" tabindex="-1"></a>cube_to_upscale <span class="op">=</span> cube_to_upscale.merge_cubes(cube_NIRv_median_1)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<div id="0f4a5eff" class="cell" data-execution_count="35">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb37"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb37-1"><a href="#cb37-1" aria-hidden="true" tabindex="-1"></a><span class="co"># cube_to_upscale.execute_batch(outputfile="data/sif_predictors_cube_high.nc")</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<p>Checking that everything is in order with the code to upscale</p>
<div id="b16e9258" class="cell" data-execution_count="36">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb38"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb38-1"><a href="#cb38-1" aria-hidden="true" tabindex="-1"></a>cube_to_upscale_local <span class="op">=</span> xr.open_dataset(<span class="st">"data/sif_predictors_cube_high.nc"</span>)</span>
<span id="cb38-2"><a href="#cb38-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb38-3"><a href="#cb38-3" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(cube_to_upscale_local)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>&lt;xarray.Dataset&gt; Size: 9MB
Dimensions:  (t: 1, x: 564, y: 336)
Coordinates:
  * t        (t) datetime64[ns] 8B 2023-06-23
  * x        (x) float64 5kB -6.917 -6.908 -6.899 -6.89 ... -1.908 -1.899 -1.89
  * y        (y) float64 3kB 40.22 40.22 40.21 40.2 ... 37.26 37.25 37.24 37.23
Data variables:
    crs      |S1 1B ...
    b1       (t, y, x) float64 2MB ...
    b2       (t, y, x) float64 2MB ...
    b5       (t, y, x) float64 2MB ...
    b6       (t, y, x) float64 2MB ...
    LST      (t, y, x) float64 2MB ...
    NIRv     (t, y, x) float64 2MB ...
Attributes:
    Conventions:  CF-1.9
    institution:  Copernicus Data Space Ecosystem openEO API - 0.70.0a5.dev20...
    description:  
    title:        </code></pre>
</div>
</div>
</section>
<section id="downscaling-sif" class="level2">
<h2 class="anchored" data-anchor-id="downscaling-sif">Downscaling SIF</h2>
<p>To downscale SIF we will use <a href="#def-sif" class="quarto-xref">Definition&nbsp;1</a>. The code implementation of <a href="#def-sif" class="quarto-xref">Definition&nbsp;1</a> is available at <a href="https://github.com/dpabon/SIF_downscaling_CDSE/blob/main/sif_downscaling_openEO_CDSE/udf/udf_sif_downscaling.py">udf_sif_downscaling.py</a>. Then we can call the <code>udf</code> using:</p>
<div id="bd5a337e" class="cell" data-execution_count="37">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb40"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb40-1"><a href="#cb40-1" aria-hidden="true" tabindex="-1"></a>udf_sif_prediction <span class="op">=</span> openeo.UDF.from_file(</span>
<span id="cb40-2"><a href="#cb40-2" aria-hidden="true" tabindex="-1"></a>    <span class="st">"src/udf/udf_sif_downscaling.py"</span>,</span>
<span id="cb40-3"><a href="#cb40-3" aria-hidden="true" tabindex="-1"></a>    context<span class="op">=</span>{<span class="st">"window_size_lat"</span>: <span class="dv">3</span>, <span class="st">"window_size_lon"</span>: <span class="dv">3</span>},</span>
<span id="cb40-4"><a href="#cb40-4" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb40-5"><a href="#cb40-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb40-6"><a href="#cb40-6" aria-hidden="true" tabindex="-1"></a>sif_downscaled <span class="op">=</span> cube_to_upscale.apply_neighborhood(</span>
<span id="cb40-7"><a href="#cb40-7" aria-hidden="true" tabindex="-1"></a>    udf_sif_prediction,</span>
<span id="cb40-8"><a href="#cb40-8" aria-hidden="true" tabindex="-1"></a>    size<span class="op">=</span>[</span>
<span id="cb40-9"><a href="#cb40-9" aria-hidden="true" tabindex="-1"></a>        {<span class="st">"dimension"</span>: <span class="st">"x"</span>, <span class="st">"value"</span>: <span class="dv">512</span>, <span class="st">"unit"</span>: <span class="st">"px"</span>},</span>
<span id="cb40-10"><a href="#cb40-10" aria-hidden="true" tabindex="-1"></a>        {<span class="st">"dimension"</span>: <span class="st">"y"</span>, <span class="st">"value"</span>: <span class="dv">512</span>, <span class="st">"unit"</span>: <span class="st">"px"</span>},</span>
<span id="cb40-11"><a href="#cb40-11" aria-hidden="true" tabindex="-1"></a>    ],</span>
<span id="cb40-12"><a href="#cb40-12" aria-hidden="true" tabindex="-1"></a>    overlap<span class="op">=</span>[</span>
<span id="cb40-13"><a href="#cb40-13" aria-hidden="true" tabindex="-1"></a>        {<span class="st">"dimension"</span>: <span class="st">"x"</span>, <span class="st">"value"</span>: <span class="dv">0</span>, <span class="st">"unit"</span>: <span class="st">"px"</span>},</span>
<span id="cb40-14"><a href="#cb40-14" aria-hidden="true" tabindex="-1"></a>        {<span class="st">"dimension"</span>: <span class="st">"y"</span>, <span class="st">"value"</span>: <span class="dv">0</span>, <span class="st">"unit"</span>: <span class="st">"px"</span>},</span>
<span id="cb40-15"><a href="#cb40-15" aria-hidden="true" tabindex="-1"></a>    ],</span>
<span id="cb40-16"><a href="#cb40-16" aria-hidden="true" tabindex="-1"></a>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<p>It is not possible to reduce the number of bands using <code>apply_neighborhood</code> then we need to just select the first band:</p>
<div id="c4a4cf7f" class="cell" data-execution_count="38">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb41"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb41-1"><a href="#cb41-1" aria-hidden="true" tabindex="-1"></a><span class="co"># removing bands that are not needed it</span></span>
<span id="cb41-2"><a href="#cb41-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb41-3"><a href="#cb41-3" aria-hidden="true" tabindex="-1"></a>sif_downscaled_renamed <span class="op">=</span> sif_downscaled.rename_labels(</span>
<span id="cb41-4"><a href="#cb41-4" aria-hidden="true" tabindex="-1"></a>    dimension<span class="op">=</span><span class="st">"bands"</span>, source<span class="op">=</span>[<span class="st">"b1"</span>], target<span class="op">=</span>[<span class="st">"SIF"</span>]</span>
<span id="cb41-5"><a href="#cb41-5" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb41-6"><a href="#cb41-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb41-7"><a href="#cb41-7" aria-hidden="true" tabindex="-1"></a>sif_downscaled_renamed <span class="op">=</span> sif_downscaled_renamed.band(<span class="st">"SIF"</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<p>Now we can run everthing and save the results</p>
<div id="a5d56e7f" class="cell" data-execution_count="39">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb42"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb42-1"><a href="#cb42-1" aria-hidden="true" tabindex="-1"></a><span class="co">"""</span></span>
<span id="cb42-2"><a href="#cb42-2" aria-hidden="true" tabindex="-1"></a><span class="co">sif_downscaled_renamed.execute_batch(</span></span>
<span id="cb42-3"><a href="#cb42-3" aria-hidden="true" tabindex="-1"></a><span class="co">    outputfile="data/openeo_sif_downscaled.tif",</span></span>
<span id="cb42-4"><a href="#cb42-4" aria-hidden="true" tabindex="-1"></a><span class="co">    title="SIF_downscaling",</span></span>
<span id="cb42-5"><a href="#cb42-5" aria-hidden="true" tabindex="-1"></a><span class="co">    description="Predicting SIF at high spatial resolution"</span></span>
<span id="cb42-6"><a href="#cb42-6" aria-hidden="true" tabindex="-1"></a><span class="co">)</span></span>
<span id="cb42-7"><a href="#cb42-7" aria-hidden="true" tabindex="-1"></a><span class="co">"""</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-display" data-execution_count="33">
<pre><code>'\nsif_downscaled_renamed.execute_batch(\n    outputfile="data/openeo_sif_downscaled.tif",\n    title="SIF_downscaling",\n    description="Predicting SIF at high spatial resolution"\n)\n'</code></pre>
</div>
</div>
</section>
<section id="comparing-sif-products" class="level2">
<h2 class="anchored" data-anchor-id="comparing-sif-products">Comparing SIF products</h2>
<p>Comparing the original SIF product at 5 km with the Downscaled SIF at 1 km.</p>
<div id="dc09bcc9" class="cell" data-execution_count="40">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb44"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb44-1"><a href="#cb44-1" aria-hidden="true" tabindex="-1"></a>sif_downscaled_local <span class="op">=</span> rio.open_rasterio(<span class="st">"data/openeo_sif_downscaled.tif"</span>)</span>
<span id="cb44-2"><a href="#cb44-2" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(sif_downscaled_local)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>&lt;xarray.DataArray (band: 1, y: 336, x: 564)&gt; Size: 758kB
[189504 values with dtype=float32]
Coordinates:
  * band         (band) int64 8B 1
  * x            (x) float64 5kB -6.917 -6.908 -6.899 ... -1.908 -1.899 -1.89
  * y            (y) float64 3kB 40.22 40.22 40.21 40.2 ... 37.25 37.24 37.23
    spatial_ref  int64 8B 0
Attributes:
    institution:          Copernicus Data Space Ecosystem openEO API - 0.70.0...
    PROCESSING_SOFTWARE:  0.70.0a5
    AREA_OR_POINT:        Area
    _FillValue:           nan
    scale_factor:         1.0
    add_offset:           0.0</code></pre>
</div>
</div>
<div id="734df24e" class="cell" data-execution_count="41">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb46"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb46-1"><a href="#cb46-1" aria-hidden="true" tabindex="-1"></a>fig, axs <span class="op">=</span> plt.subplots(nrows<span class="op">=</span><span class="dv">2</span>, figsize<span class="op">=</span>(<span class="dv">6</span>, <span class="dv">10</span>))</span>
<span id="cb46-2"><a href="#cb46-2" aria-hidden="true" tabindex="-1"></a>cube_sif_local.plot(ax<span class="op">=</span>axs[<span class="dv">0</span>])</span>
<span id="cb46-3"><a href="#cb46-3" aria-hidden="true" tabindex="-1"></a>axs[<span class="dv">0</span>].set_title(<span class="st">"SIF (Original)"</span>)</span>
<span id="cb46-4"><a href="#cb46-4" aria-hidden="true" tabindex="-1"></a>sif_downscaled_local.plot(ax<span class="op">=</span>axs[<span class="dv">1</span>])</span>
<span id="cb46-5"><a href="#cb46-5" aria-hidden="true" tabindex="-1"></a>axs[<span class="dv">1</span>].set_title(<span class="st">"SIF (Downscaled)"</span>)</span>
<span id="cb46-6"><a href="#cb46-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb46-7"><a href="#cb46-7" aria-hidden="true" tabindex="-1"></a>plt.tight_layout()</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="openEO_sif_downscaling_documented_and_plots_files/figure-html/cell-42-output-1.png" width="561" height="948" class="figure-img"></p>
</figure>
</div>
</div>
</div>
<p>To validate the downscaling results lets resample the SIF downscaled and compare it with the original product at 5 km.</p>
<div id="e2e35538" class="cell" data-execution_count="42">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb47"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb47-1"><a href="#cb47-1" aria-hidden="true" tabindex="-1"></a>sif_downscaled_resampled <span class="op">=</span> sif_downscaled_renamed.resample_cube_spatial(</span>
<span id="cb47-2"><a href="#cb47-2" aria-hidden="true" tabindex="-1"></a>    target<span class="op">=</span>cube_SIF_original_median,</span>
<span id="cb47-3"><a href="#cb47-3" aria-hidden="true" tabindex="-1"></a>    method<span class="op">=</span><span class="st">"med"</span>,</span>
<span id="cb47-4"><a href="#cb47-4" aria-hidden="true" tabindex="-1"></a>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<div id="f7f0300d" class="cell" data-execution_count="43">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb48"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb48-1"><a href="#cb48-1" aria-hidden="true" tabindex="-1"></a><span class="co"># sif_downscaled_resampled.execute_batch("data/sif_downscaled_resampled.tif")</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<div id="601a5606" class="cell" data-execution_count="44">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb49"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb49-1"><a href="#cb49-1" aria-hidden="true" tabindex="-1"></a>sif_downscaled_resampled_local <span class="op">=</span> rio.open_rasterio(<span class="st">"data/sif_downscaled_resampled.tif"</span>)</span>
<span id="cb49-2"><a href="#cb49-2" aria-hidden="true" tabindex="-1"></a>sif_downscaled_resampled_local</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-display" data-execution_count="38">
<div><svg style="position: absolute; width: 0; height: 0; overflow: hidden">
<defs>
<symbol id="icon-database" viewbox="0 0 32 32">
<path d="M16 0c-8.837 0-16 2.239-16 5v4c0 2.761 7.163 5 16 5s16-2.239 16-5v-4c0-2.761-7.163-5-16-5z"></path>
<path d="M16 17c-8.837 0-16-2.239-16-5v6c0 2.761 7.163 5 16 5s16-2.239 16-5v-6c0 2.761-7.163 5-16 5z"></path>
<path d="M16 26c-8.837 0-16-2.239-16-5v6c0 2.761 7.163 5 16 5s16-2.239 16-5v-6c0 2.761-7.163 5-16 5z"></path>
</symbol>
<symbol id="icon-file-text2" viewbox="0 0 32 32">
<path d="M28.681 7.159c-0.694-0.947-1.662-2.053-2.724-3.116s-2.169-2.030-3.116-2.724c-1.612-1.182-2.393-1.319-2.841-1.319h-15.5c-1.378 0-2.5 1.121-2.5 2.5v27c0 1.378 1.122 2.5 2.5 2.5h23c1.378 0 2.5-1.122 2.5-2.5v-19.5c0-0.448-0.137-1.23-1.319-2.841zM24.543 5.457c0.959 0.959 1.712 1.825 2.268 2.543h-4.811v-4.811c0.718 0.556 1.584 1.309 2.543 2.268zM28 29.5c0 0.271-0.229 0.5-0.5 0.5h-23c-0.271 0-0.5-0.229-0.5-0.5v-27c0-0.271 0.229-0.5 0.5-0.5 0 0 15.499-0 15.5 0v7c0 0.552 0.448 1 1 1h7v19.5z"></path>
<path d="M23 26h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z"></path>
<path d="M23 22h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z"></path>
<path d="M23 18h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z"></path>
</symbol>
</defs>
</svg>
<style>/* CSS stylesheet for displaying xarray objects in jupyterlab.
 *
 */

:root {
  --xr-font-color0: var(--jp-content-font-color0, rgba(0, 0, 0, 1));
  --xr-font-color2: var(--jp-content-font-color2, rgba(0, 0, 0, 0.54));
  --xr-font-color3: var(--jp-content-font-color3, rgba(0, 0, 0, 0.38));
  --xr-border-color: var(--jp-border-color2, #e0e0e0);
  --xr-disabled-color: var(--jp-layout-color3, #bdbdbd);
  --xr-background-color: var(--jp-layout-color0, white);
  --xr-background-color-row-even: var(--jp-layout-color1, white);
  --xr-background-color-row-odd: var(--jp-layout-color2, #eeeeee);
}

html[theme="dark"],
html[data-theme="dark"],
body[data-theme="dark"],
body.vscode-dark {
  --xr-font-color0: rgba(255, 255, 255, 1);
  --xr-font-color2: rgba(255, 255, 255, 0.54);
  --xr-font-color3: rgba(255, 255, 255, 0.38);
  --xr-border-color: #1f1f1f;
  --xr-disabled-color: #515151;
  --xr-background-color: #111111;
  --xr-background-color-row-even: #111111;
  --xr-background-color-row-odd: #313131;
}

.xr-wrap {
  display: block !important;
  min-width: 300px;
  max-width: 700px;
}

.xr-text-repr-fallback {
  /* fallback to plain text repr when CSS is not injected (untrusted notebook) */
  display: none;
}

.xr-header {
  padding-top: 6px;
  padding-bottom: 6px;
  margin-bottom: 4px;
  border-bottom: solid 1px var(--xr-border-color);
}

.xr-header > div,
.xr-header > ul {
  display: inline;
  margin-top: 0;
  margin-bottom: 0;
}

.xr-obj-type,
.xr-array-name {
  margin-left: 2px;
  margin-right: 10px;
}

.xr-obj-type {
  color: var(--xr-font-color2);
}

.xr-sections {
  padding-left: 0 !important;
  display: grid;
  grid-template-columns: 150px auto auto 1fr 0 20px 0 20px;
}

.xr-section-item {
  display: contents;
}

.xr-section-item input {
  display: inline-block;
  opacity: 0;
  height: 0;
}

.xr-section-item input + label {
  color: var(--xr-disabled-color);
}

.xr-section-item input:enabled + label {
  cursor: pointer;
  color: var(--xr-font-color2);
}

.xr-section-item input:focus + label {
  border: 2px solid var(--xr-font-color0);
}

.xr-section-item input:enabled + label:hover {
  color: var(--xr-font-color0);
}

.xr-section-summary {
  grid-column: 1;
  color: var(--xr-font-color2);
  font-weight: 500;
}

.xr-section-summary > span {
  display: inline-block;
  padding-left: 0.5em;
}

.xr-section-summary-in:disabled + label {
  color: var(--xr-font-color2);
}

.xr-section-summary-in + label:before {
  display: inline-block;
  content: "";
  font-size: 11px;
  width: 15px;
  text-align: center;
}

.xr-section-summary-in:disabled + label:before {
  color: var(--xr-disabled-color);
}

.xr-section-summary-in:checked + label:before {
  content: "";
}

.xr-section-summary-in:checked + label > span {
  display: none;
}

.xr-section-summary,
.xr-section-inline-details {
  padding-top: 4px;
  padding-bottom: 4px;
}

.xr-section-inline-details {
  grid-column: 2 / -1;
}

.xr-section-details {
  display: none;
  grid-column: 1 / -1;
  margin-bottom: 5px;
}

.xr-section-summary-in:checked ~ .xr-section-details {
  display: contents;
}

.xr-array-wrap {
  grid-column: 1 / -1;
  display: grid;
  grid-template-columns: 20px auto;
}

.xr-array-wrap > label {
  grid-column: 1;
  vertical-align: top;
}

.xr-preview {
  color: var(--xr-font-color3);
}

.xr-array-preview,
.xr-array-data {
  padding: 0 5px !important;
  grid-column: 2;
}

.xr-array-data,
.xr-array-in:checked ~ .xr-array-preview {
  display: none;
}

.xr-array-in:checked ~ .xr-array-data,
.xr-array-preview {
  display: inline-block;
}

.xr-dim-list {
  display: inline-block !important;
  list-style: none;
  padding: 0 !important;
  margin: 0;
}

.xr-dim-list li {
  display: inline-block;
  padding: 0;
  margin: 0;
}

.xr-dim-list:before {
  content: "(";
}

.xr-dim-list:after {
  content: ")";
}

.xr-dim-list li:not(:last-child):after {
  content: ",";
  padding-right: 5px;
}

.xr-has-index {
  font-weight: bold;
}

.xr-var-list,
.xr-var-item {
  display: contents;
}

.xr-var-item > div,
.xr-var-item label,
.xr-var-item > .xr-var-name span {
  background-color: var(--xr-background-color-row-even);
  margin-bottom: 0;
}

.xr-var-item > .xr-var-name:hover span {
  padding-right: 5px;
}

.xr-var-list > li:nth-child(odd) > div,
.xr-var-list > li:nth-child(odd) > label,
.xr-var-list > li:nth-child(odd) > .xr-var-name span {
  background-color: var(--xr-background-color-row-odd);
}

.xr-var-name {
  grid-column: 1;
}

.xr-var-dims {
  grid-column: 2;
}

.xr-var-dtype {
  grid-column: 3;
  text-align: right;
  color: var(--xr-font-color2);
}

.xr-var-preview {
  grid-column: 4;
}

.xr-index-preview {
  grid-column: 2 / 5;
  color: var(--xr-font-color2);
}

.xr-var-name,
.xr-var-dims,
.xr-var-dtype,
.xr-preview,
.xr-attrs dt {
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
  padding-right: 10px;
}

.xr-var-name:hover,
.xr-var-dims:hover,
.xr-var-dtype:hover,
.xr-attrs dt:hover {
  overflow: visible;
  width: auto;
  z-index: 1;
}

.xr-var-attrs,
.xr-var-data,
.xr-index-data {
  display: none;
  background-color: var(--xr-background-color) !important;
  padding-bottom: 5px !important;
}

.xr-var-attrs-in:checked ~ .xr-var-attrs,
.xr-var-data-in:checked ~ .xr-var-data,
.xr-index-data-in:checked ~ .xr-index-data {
  display: block;
}

.xr-var-data > table {
  float: right;
}

.xr-var-name span,
.xr-var-data,
.xr-index-name div,
.xr-index-data,
.xr-attrs {
  padding-left: 25px !important;
}

.xr-attrs,
.xr-var-attrs,
.xr-var-data,
.xr-index-data {
  grid-column: 1 / -1;
}

dl.xr-attrs {
  padding: 0;
  margin: 0;
  display: grid;
  grid-template-columns: 125px auto;
}

.xr-attrs dt,
.xr-attrs dd {
  padding: 0;
  margin: 0;
  float: left;
  padding-right: 10px;
  width: auto;
}

.xr-attrs dt {
  font-weight: normal;
  grid-column: 1;
}

.xr-attrs dt:hover span {
  display: inline-block;
  background: var(--xr-background-color);
  padding-right: 10px;
}

.xr-attrs dd {
  grid-column: 2;
  white-space: pre-wrap;
  word-break: break-all;
}

.xr-icon-database,
.xr-icon-file-text2,
.xr-no-icon {
  display: inline-block;
  vertical-align: middle;
  width: 1em;
  height: 1.5em !important;
  stroke-width: 0;
  stroke: currentColor;
  fill: currentColor;
}
</style><pre class="xr-text-repr-fallback">&lt;xarray.DataArray (band: 1, y: 30, x: 51)&gt; Size: 6kB
[1530 values with dtype=float32]
Coordinates:
  * band         (band) int64 8B 1
  * x            (x) float64 408B -6.871 -6.771 -6.671 ... -2.071 -1.971 -1.871
  * y            (y) float64 240B 40.18 40.08 39.98 39.88 ... 37.48 37.38 37.28
    spatial_ref  int64 8B 0
Attributes:
    institution:          Copernicus Data Space Ecosystem openEO API - 0.70.0...
    PROCESSING_SOFTWARE:  0.70.0a5
    AREA_OR_POINT:        Area
    _FillValue:           nan
    scale_factor:         1.0
    add_offset:           0.0</pre><div class="xr-wrap" style="display:none"><div class="xr-header"><div class="xr-obj-type">xarray.DataArray</div><div class="xr-array-name"></div><ul class="xr-dim-list"><li><span class="xr-has-index">band</span>: 1</li><li><span class="xr-has-index">y</span>: 30</li><li><span class="xr-has-index">x</span>: 51</li></ul></div><ul class="xr-sections"><li class="xr-section-item"><div class="xr-array-wrap"><input id="section-d01cdbf3-2739-49f5-ab48-ac1a6a62fad8" class="xr-array-in" type="checkbox" checked=""><label for="section-d01cdbf3-2739-49f5-ab48-ac1a6a62fad8" title="Show/hide data repr"><svg class="icon xr-icon-database"><use href="#icon-database"></use></svg></label><div class="xr-array-preview xr-preview"><span>...</span></div><div class="xr-array-data"><pre>[1530 values with dtype=float32]</pre></div></div></li><li class="xr-section-item"><input id="section-8fec7dda-6ac5-4ec9-a8b7-71ba48235425" class="xr-section-summary-in" type="checkbox" checked=""><label for="section-8fec7dda-6ac5-4ec9-a8b7-71ba48235425" class="xr-section-summary">Coordinates: <span>(4)</span></label><div class="xr-section-inline-details"></div><div class="xr-section-details"><ul class="xr-var-list"><li class="xr-var-item"><div class="xr-var-name"><span class="xr-has-index">band</span></div><div class="xr-var-dims">(band)</div><div class="xr-var-dtype">int64</div><div class="xr-var-preview xr-preview">1</div><input id="attrs-011afb88-3720-4e7f-b2a6-75c5dbb5b9ec" class="xr-var-attrs-in" type="checkbox" disabled=""><label for="attrs-011afb88-3720-4e7f-b2a6-75c5dbb5b9ec" title="Show/Hide attributes"><svg class="icon xr-icon-file-text2"><use href="#icon-file-text2"></use></svg></label><input id="data-ca225fc0-ed42-4b26-bc4c-161e818792ed" class="xr-var-data-in" type="checkbox"><label for="data-ca225fc0-ed42-4b26-bc4c-161e818792ed" title="Show/Hide data repr"><svg class="icon xr-icon-database"><use href="#icon-database"></use></svg></label><div class="xr-var-attrs"><dl class="xr-attrs"></dl></div><div class="xr-var-data"><pre>array([1])</pre></div></li><li class="xr-var-item"><div class="xr-var-name"><span class="xr-has-index">x</span></div><div class="xr-var-dims">(x)</div><div class="xr-var-dtype">float64</div><div class="xr-var-preview xr-preview">-6.871 -6.771 ... -1.971 -1.871</div><input id="attrs-dbc50ee5-ed84-4859-81f8-cc131bf363c5" class="xr-var-attrs-in" type="checkbox" disabled=""><label for="attrs-dbc50ee5-ed84-4859-81f8-cc131bf363c5" title="Show/Hide attributes"><svg class="icon xr-icon-file-text2"><use href="#icon-file-text2"></use></svg></label><input id="data-b16b509a-e43a-4c47-be49-cf2a8c1f34ce" class="xr-var-data-in" type="checkbox"><label for="data-b16b509a-e43a-4c47-be49-cf2a8c1f34ce" title="Show/Hide data repr"><svg class="icon xr-icon-database"><use href="#icon-database"></use></svg></label><div class="xr-var-attrs"><dl class="xr-attrs"></dl></div><div class="xr-var-data"><pre>array([-6.871387, -6.771387, -6.671387, -6.571387, -6.471387, -6.371387,
       -6.271387, -6.171387, -6.071387, -5.971387, -5.871387, -5.771387,
       -5.671387, -5.571387, -5.471387, -5.371387, -5.271387, -5.171387,
       -5.071387, -4.971387, -4.871387, -4.771387, -4.671387, -4.571387,
       -4.471387, -4.371387, -4.271387, -4.171387, -4.071387, -3.971387,
       -3.871387, -3.771387, -3.671387, -3.571387, -3.471387, -3.371387,
       -3.271387, -3.171387, -3.071387, -2.971387, -2.871387, -2.771387,
       -2.671387, -2.571387, -2.471387, -2.371387, -2.271387, -2.171387,
       -2.071387, -1.971387, -1.871387])</pre></div></li><li class="xr-var-item"><div class="xr-var-name"><span class="xr-has-index">y</span></div><div class="xr-var-dims">(y)</div><div class="xr-var-dtype">float64</div><div class="xr-var-preview xr-preview">40.18 40.08 39.98 ... 37.38 37.28</div><input id="attrs-48ecb1dc-3e0b-4a00-9d62-6f1bd977a07d" class="xr-var-attrs-in" type="checkbox" disabled=""><label for="attrs-48ecb1dc-3e0b-4a00-9d62-6f1bd977a07d" title="Show/Hide attributes"><svg class="icon xr-icon-file-text2"><use href="#icon-file-text2"></use></svg></label><input id="data-e202ed02-361e-44af-b8b4-f3add59c461c" class="xr-var-data-in" type="checkbox"><label for="data-e202ed02-361e-44af-b8b4-f3add59c461c" title="Show/Hide data repr"><svg class="icon xr-icon-database"><use href="#icon-database"></use></svg></label><div class="xr-var-attrs"><dl class="xr-attrs"></dl></div><div class="xr-var-data"><pre>array([40.179218, 40.079218, 39.979218, 39.879218, 39.779218, 39.679218,
       39.579218, 39.479218, 39.379218, 39.279218, 39.179218, 39.079218,
       38.979218, 38.879218, 38.779218, 38.679218, 38.579218, 38.479218,
       38.379218, 38.279218, 38.179218, 38.079218, 37.979218, 37.879218,
       37.779218, 37.679218, 37.579218, 37.479218, 37.379218, 37.279218])</pre></div></li><li class="xr-var-item"><div class="xr-var-name"><span>spatial_ref</span></div><div class="xr-var-dims">()</div><div class="xr-var-dtype">int64</div><div class="xr-var-preview xr-preview">0</div><input id="attrs-33bed3a8-9f9c-422d-a83e-feed14b95010" class="xr-var-attrs-in" type="checkbox"><label for="attrs-33bed3a8-9f9c-422d-a83e-feed14b95010" title="Show/Hide attributes"><svg class="icon xr-icon-file-text2"><use href="#icon-file-text2"></use></svg></label><input id="data-e7526d63-3eb3-4e77-9219-98e31a29de6b" class="xr-var-data-in" type="checkbox"><label for="data-e7526d63-3eb3-4e77-9219-98e31a29de6b" title="Show/Hide data repr"><svg class="icon xr-icon-database"><use href="#icon-database"></use></svg></label><div class="xr-var-attrs"><dl class="xr-attrs"><dt><span>crs_wkt :</span></dt><dd>GEOGCS["WGS 84",DATUM["WGS_1984",SPHEROID["WGS 84",6378137,298.257223563,AUTHORITY["EPSG","7030"]],AUTHORITY["EPSG","6326"]],PRIMEM["Greenwich",0,AUTHORITY["EPSG","8901"]],UNIT["degree",0.0174532925199433,AUTHORITY["EPSG","9122"]],AXIS["Latitude",NORTH],AXIS["Longitude",EAST],AUTHORITY["EPSG","4326"]]</dd><dt><span>semi_major_axis :</span></dt><dd>6378137.0</dd><dt><span>semi_minor_axis :</span></dt><dd>6356752.314245179</dd><dt><span>inverse_flattening :</span></dt><dd>298.257223563</dd><dt><span>reference_ellipsoid_name :</span></dt><dd>WGS 84</dd><dt><span>longitude_of_prime_meridian :</span></dt><dd>0.0</dd><dt><span>prime_meridian_name :</span></dt><dd>Greenwich</dd><dt><span>geographic_crs_name :</span></dt><dd>WGS 84</dd><dt><span>horizontal_datum_name :</span></dt><dd>World Geodetic System 1984</dd><dt><span>grid_mapping_name :</span></dt><dd>latitude_longitude</dd><dt><span>spatial_ref :</span></dt><dd>GEOGCS["WGS 84",DATUM["WGS_1984",SPHEROID["WGS 84",6378137,298.257223563,AUTHORITY["EPSG","7030"]],AUTHORITY["EPSG","6326"]],PRIMEM["Greenwich",0,AUTHORITY["EPSG","8901"]],UNIT["degree",0.0174532925199433,AUTHORITY["EPSG","9122"]],AXIS["Latitude",NORTH],AXIS["Longitude",EAST],AUTHORITY["EPSG","4326"]]</dd><dt><span>GeoTransform :</span></dt><dd>-6.921387 0.1 0.0 40.229218 0.0 -0.1</dd></dl></div><div class="xr-var-data"><pre>array(0)</pre></div></li></ul></div></li><li class="xr-section-item"><input id="section-e2b4f307-03b8-4ff8-a4a0-41519287b610" class="xr-section-summary-in" type="checkbox"><label for="section-e2b4f307-03b8-4ff8-a4a0-41519287b610" class="xr-section-summary">Indexes: <span>(3)</span></label><div class="xr-section-inline-details"></div><div class="xr-section-details"><ul class="xr-var-list"><li class="xr-var-item"><div class="xr-index-name"><div>band</div></div><div class="xr-index-preview">PandasIndex</div><input type="checkbox" disabled=""><label></label><input id="index-2d2f352c-6dbd-486a-a380-226ec3372a57" class="xr-index-data-in" type="checkbox"><label for="index-2d2f352c-6dbd-486a-a380-226ec3372a57" title="Show/Hide index repr"><svg class="icon xr-icon-database"><use href="#icon-database"></use></svg></label><div class="xr-index-data"><pre>PandasIndex(Index([1], dtype='int64', name='band'))</pre></div></li><li class="xr-var-item"><div class="xr-index-name"><div>x</div></div><div class="xr-index-preview">PandasIndex</div><input type="checkbox" disabled=""><label></label><input id="index-d7531885-01fa-42ee-8a72-3938fa902cdf" class="xr-index-data-in" type="checkbox"><label for="index-d7531885-01fa-42ee-8a72-3938fa902cdf" title="Show/Hide index repr"><svg class="icon xr-icon-database"><use href="#icon-database"></use></svg></label><div class="xr-index-data"><pre>PandasIndex(Index([          -6.871387,  -6.771387000000001,           -6.671387,
       -6.5713870000000005,           -6.471387,           -6.371387,
        -6.271387000000001,           -6.171387, -6.0713870000000005,
                 -5.971387,           -5.871387,  -5.771387000000001,
                 -5.671387, -5.5713870000000005,           -5.471387,
                 -5.371387,  -5.271387000000001,           -5.171387,
       -5.0713870000000005,           -4.971387,           -4.871387,
        -4.771387000000001,           -4.671387,           -4.571387,
                 -4.471387,           -4.371387,  -4.271387000000001,
                 -4.171387,           -4.071387,           -3.971387,
       -3.8713870000000004, -3.7713870000000003,           -3.671387,
                 -3.571387,           -3.471387, -3.3713870000000004,
       -3.2713870000000003,           -3.171387,           -3.071387,
                 -2.971387, -2.8713870000000004,           -2.771387,
                 -2.671387, -2.5713870000000005,           -2.471387,
       -2.3713870000000004,           -2.271387,           -2.171387,
       -2.0713869999999996,           -1.971387, -1.8713870000000004],
      dtype='float64', name='x'))</pre></div></li><li class="xr-var-item"><div class="xr-index-name"><div>y</div></div><div class="xr-index-preview">PandasIndex</div><input type="checkbox" disabled=""><label></label><input id="index-293b2614-6396-4d17-abeb-fe239f8d3a1d" class="xr-index-data-in" type="checkbox"><label for="index-293b2614-6396-4d17-abeb-fe239f8d3a1d" title="Show/Hide index repr"><svg class="icon xr-icon-database"><use href="#icon-database"></use></svg></label><div class="xr-index-data"><pre>PandasIndex(Index([40.179218000000006, 40.079218000000004,          39.979218,
        39.87921800000001,  39.77921800000001, 39.679218000000006,
       39.579218000000004,          39.479218,  39.37921800000001,
        39.27921800000001, 39.179218000000006, 39.079218000000004,
                38.979218,  38.87921800000001,  38.77921800000001,
       38.679218000000006, 38.579218000000004,          38.479218,
        38.37921800000001,  38.27921800000001, 38.179218000000006,
       38.079218000000004,          37.979218,  37.87921800000001,
        37.77921800000001, 37.679218000000006, 37.579218000000004,
                37.479218,  37.37921800000001,  37.27921800000001],
      dtype='float64', name='y'))</pre></div></li></ul></div></li><li class="xr-section-item"><input id="section-33fed5b2-5bc7-4306-9396-5ac4166fdf26" class="xr-section-summary-in" type="checkbox" checked=""><label for="section-33fed5b2-5bc7-4306-9396-5ac4166fdf26" class="xr-section-summary">Attributes: <span>(6)</span></label><div class="xr-section-inline-details"></div><div class="xr-section-details"><dl class="xr-attrs"><dt><span>institution :</span></dt><dd>Copernicus Data Space Ecosystem openEO API - 0.70.0a5.dev20251125+3116</dd><dt><span>PROCESSING_SOFTWARE :</span></dt><dd>0.70.0a5</dd><dt><span>AREA_OR_POINT :</span></dt><dd>Area</dd><dt><span>_FillValue :</span></dt><dd>nan</dd><dt><span>scale_factor :</span></dt><dd>1.0</dd><dt><span>add_offset :</span></dt><dd>0.0</dd></dl></div></li></ul></div></div>
</div>
</div>
<div id="885f02b0" class="cell" data-execution_count="45">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb50"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb50-1"><a href="#cb50-1" aria-hidden="true" tabindex="-1"></a>fig, axs <span class="op">=</span> plt.subplots(nrows<span class="op">=</span><span class="dv">2</span>, figsize<span class="op">=</span>(<span class="dv">6</span>, <span class="dv">10</span>))</span>
<span id="cb50-2"><a href="#cb50-2" aria-hidden="true" tabindex="-1"></a>cube_sif_local.plot(ax<span class="op">=</span>axs[<span class="dv">0</span>])</span>
<span id="cb50-3"><a href="#cb50-3" aria-hidden="true" tabindex="-1"></a>axs[<span class="dv">0</span>].set_title(<span class="st">"SIF (Original)"</span>)</span>
<span id="cb50-4"><a href="#cb50-4" aria-hidden="true" tabindex="-1"></a>sif_downscaled_resampled_local.plot(ax<span class="op">=</span>axs[<span class="dv">1</span>])</span>
<span id="cb50-5"><a href="#cb50-5" aria-hidden="true" tabindex="-1"></a>axs[<span class="dv">1</span>].set_title(<span class="st">"SIF (Downscaled) resampled"</span>)</span>
<span id="cb50-6"><a href="#cb50-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb50-7"><a href="#cb50-7" aria-hidden="true" tabindex="-1"></a>plt.tight_layout()</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="openEO_sif_downscaling_documented_and_plots_files/figure-html/cell-46-output-1.png" width="561" height="948" class="figure-img"></p>
</figure>
</div>
</div>
</div>
<p>Now lets do <span class="math inline">\(originalSIF - upscaledSIF\)</span></p>
<div id="433c59c3" class="cell" data-execution_count="46">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb51"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb51-1"><a href="#cb51-1" aria-hidden="true" tabindex="-1"></a>plt.clf()</span>
<span id="cb51-2"><a href="#cb51-2" aria-hidden="true" tabindex="-1"></a>differences <span class="op">=</span> cube_sif_local <span class="op">-</span> sif_downscaled_resampled_local</span>
<span id="cb51-3"><a href="#cb51-3" aria-hidden="true" tabindex="-1"></a>differences.plot()</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="openEO_sif_downscaling_documented_and_plots_files/figure-html/cell-47-output-1.png" width="580" height="449" class="figure-img"></p>
</figure>
</div>
</div>
</div>


</section>
</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
  window.document.addEventListener("DOMContentLoaded", function (event) {
    const icon = "";
    const anchorJS = new window.AnchorJS();
    anchorJS.options = {
      placement: 'right',
      icon: icon
    };
    anchorJS.add('.anchored');
    const isCodeAnnotation = (el) => {
      for (const clz of el.classList) {
        if (clz.startsWith('code-annotation-')) {                     
          return true;
        }
      }
      return false;
    }
    const onCopySuccess = function(e) {
      // button target
      const button = e.trigger;
      // don't keep focus
      button.blur();
      // flash "checked"
      button.classList.add('code-copy-button-checked');
      var currentTitle = button.getAttribute("title");
      button.setAttribute("title", "Copied!");
      let tooltip;
      if (window.bootstrap) {
        button.setAttribute("data-bs-toggle", "tooltip");
        button.setAttribute("data-bs-placement", "left");
        button.setAttribute("data-bs-title", "Copied!");
        tooltip = new bootstrap.Tooltip(button, 
          { trigger: "manual", 
            customClass: "code-copy-button-tooltip",
            offset: [0, -8]});
        tooltip.show();    
      }
      setTimeout(function() {
        if (tooltip) {
          tooltip.hide();
          button.removeAttribute("data-bs-title");
          button.removeAttribute("data-bs-toggle");
          button.removeAttribute("data-bs-placement");
        }
        button.setAttribute("title", currentTitle);
        button.classList.remove('code-copy-button-checked');
      }, 1000);
      // clear code selection
      e.clearSelection();
    }
    const getTextToCopy = function(trigger) {
      const outerScaffold = trigger.parentElement.cloneNode(true);
      const codeEl = outerScaffold.querySelector('code');
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
    const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
      text: getTextToCopy
    });
    clipboard.on('success', onCopySuccess);
    if (window.document.getElementById('quarto-embedded-source-code-modal')) {
      const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
        text: getTextToCopy,
        container: window.document.getElementById('quarto-embedded-source-code-modal')
      });
      clipboardModal.on('success', onCopySuccess);
    }
      var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
      var mailtoRegex = new RegExp(/^mailto:/);
        var filterRegex = new RegExp('/' + window.location.host + '/');
      var isInternal = (href) => {
          return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
      }
      // Inspect non-navigation links and adorn them if external
     var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
      for (var i=0; i<links.length; i++) {
        const link = links[i];
        if (!isInternal(link.href)) {
          // undo the damage that might have been done by quarto-nav.js in the case of
          // links that we want to consider external
          if (link.dataset.originalHref !== undefined) {
            link.href = link.dataset.originalHref;
          }
        }
      }
    function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
      const config = {
        allowHTML: true,
        maxWidth: 500,
        delay: 100,
        arrow: false,
        appendTo: function(el) {
            return el.parentElement;
        },
        interactive: true,
        interactiveBorder: 10,
        theme: 'quarto',
        placement: 'bottom-start',
      };
      if (contentFn) {
        config.content = contentFn;
      }
      if (onTriggerFn) {
        config.onTrigger = onTriggerFn;
      }
      if (onUntriggerFn) {
        config.onUntrigger = onUntriggerFn;
      }
      window.tippy(el, config); 
    }
    const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
    for (var i=0; i<noterefs.length; i++) {
      const ref = noterefs[i];
      tippyHover(ref, function() {
        // use id or data attribute instead here
        let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
        try { href = new URL(href).hash; } catch {}
        const id = href.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note) {
          return note.innerHTML;
        } else {
          return "";
        }
      });
    }
    const xrefs = window.document.querySelectorAll('a.quarto-xref');
    const processXRef = (id, note) => {
      // Strip column container classes
      const stripColumnClz = (el) => {
        el.classList.remove("page-full", "page-columns");
        if (el.children) {
          for (const child of el.children) {
            stripColumnClz(child);
          }
        }
      }
      stripColumnClz(note)
      if (id === null || id.startsWith('sec-')) {
        // Special case sections, only their first couple elements
        const container = document.createElement("div");
        if (note.children && note.children.length > 2) {
          container.appendChild(note.children[0].cloneNode(true));
          for (let i = 1; i < note.children.length; i++) {
            const child = note.children[i];
            if (child.tagName === "P" && child.innerText === "") {
              continue;
            } else {
              container.appendChild(child.cloneNode(true));
              break;
            }
          }
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(container);
          }
          return container.innerHTML
        } else {
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(note);
          }
          return note.innerHTML;
        }
      } else {
        // Remove any anchor links if they are present
        const anchorLink = note.querySelector('a.anchorjs-link');
        if (anchorLink) {
          anchorLink.remove();
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        if (note.classList.contains("callout")) {
          return note.outerHTML;
        } else {
          return note.innerHTML;
        }
      }
    }
    for (var i=0; i<xrefs.length; i++) {
      const xref = xrefs[i];
      tippyHover(xref, undefined, function(instance) {
        instance.disable();
        let url = xref.getAttribute('href');
        let hash = undefined; 
        if (url.startsWith('#')) {
          hash = url;
        } else {
          try { hash = new URL(url).hash; } catch {}
        }
        if (hash) {
          const id = hash.replace(/^#\/?/, "");
          const note = window.document.getElementById(id);
          if (note !== null) {
            try {
              const html = processXRef(id, note.cloneNode(true));
              instance.setContent(html);
            } finally {
              instance.enable();
              instance.show();
            }
          } else {
            // See if we can fetch this
            fetch(url.split('#')[0])
            .then(res => res.text())
            .then(html => {
              const parser = new DOMParser();
              const htmlDoc = parser.parseFromString(html, "text/html");
              const note = htmlDoc.getElementById(id);
              if (note !== null) {
                const html = processXRef(id, note);
                instance.setContent(html);
              } 
            }).finally(() => {
              instance.enable();
              instance.show();
            });
          }
        } else {
          // See if we can fetch a full url (with no hash to target)
          // This is a special case and we should probably do some content thinning / targeting
          fetch(url)
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.querySelector('main.content');
            if (note !== null) {
              // This should only happen for chapter cross references
              // (since there is no id in the URL)
              // remove the first header
              if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
                note.children[0].remove();
              }
              const html = processXRef(null, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      }, function(instance) {
      });
    }
        let selectedAnnoteEl;
        const selectorForAnnotation = ( cell, annotation) => {
          let cellAttr = 'data-code-cell="' + cell + '"';
          let lineAttr = 'data-code-annotation="' +  annotation + '"';
          const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
          return selector;
        }
        const selectCodeLines = (annoteEl) => {
          const doc = window.document;
          const targetCell = annoteEl.getAttribute("data-target-cell");
          const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
          const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
          const lines = annoteSpan.getAttribute("data-code-lines").split(",");
          const lineIds = lines.map((line) => {
            return targetCell + "-" + line;
          })
          let top = null;
          let height = null;
          let parent = null;
          if (lineIds.length > 0) {
              //compute the position of the single el (top and bottom and make a div)
              const el = window.document.getElementById(lineIds[0]);
              top = el.offsetTop;
              height = el.offsetHeight;
              parent = el.parentElement.parentElement;
            if (lineIds.length > 1) {
              const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
              const bottom = lastEl.offsetTop + lastEl.offsetHeight;
              height = bottom - top;
            }
            if (top !== null && height !== null && parent !== null) {
              // cook up a div (if necessary) and position it 
              let div = window.document.getElementById("code-annotation-line-highlight");
              if (div === null) {
                div = window.document.createElement("div");
                div.setAttribute("id", "code-annotation-line-highlight");
                div.style.position = 'absolute';
                parent.appendChild(div);
              }
              div.style.top = top - 2 + "px";
              div.style.height = height + 4 + "px";
              div.style.left = 0;
              let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
              if (gutterDiv === null) {
                gutterDiv = window.document.createElement("div");
                gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
                gutterDiv.style.position = 'absolute';
                const codeCell = window.document.getElementById(targetCell);
                const gutter = codeCell.querySelector('.code-annotation-gutter');
                gutter.appendChild(gutterDiv);
              }
              gutterDiv.style.top = top - 2 + "px";
              gutterDiv.style.height = height + 4 + "px";
            }
            selectedAnnoteEl = annoteEl;
          }
        };
        const unselectCodeLines = () => {
          const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
          elementsIds.forEach((elId) => {
            const div = window.document.getElementById(elId);
            if (div) {
              div.remove();
            }
          });
          selectedAnnoteEl = undefined;
        };
          // Handle positioning of the toggle
      window.addEventListener(
        "resize",
        throttle(() => {
          elRect = undefined;
          if (selectedAnnoteEl) {
            selectCodeLines(selectedAnnoteEl);
          }
        }, 10)
      );
      function throttle(fn, ms) {
      let throttle = false;
      let timer;
        return (...args) => {
          if(!throttle) { // first call gets through
              fn.apply(this, args);
              throttle = true;
          } else { // all the others get throttled
              if(timer) clearTimeout(timer); // cancel #2
              timer = setTimeout(() => {
                fn.apply(this, args);
                timer = throttle = false;
              }, ms);
          }
        };
      }
        // Attach click handler to the DT
        const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
        for (const annoteDlNode of annoteDls) {
          annoteDlNode.addEventListener('click', (event) => {
            const clickedEl = event.target;
            if (clickedEl !== selectedAnnoteEl) {
              unselectCodeLines();
              const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
              if (activeEl) {
                activeEl.classList.remove('code-annotation-active');
              }
              selectCodeLines(clickedEl);
              clickedEl.classList.add('code-annotation-active');
            } else {
              // Unselect the line
              unselectCodeLines();
              clickedEl.classList.remove('code-annotation-active');
            }
          });
        }
    const findCites = (el) => {
      const parentEl = el.parentElement;
      if (parentEl) {
        const cites = parentEl.dataset.cites;
        if (cites) {
          return {
            el,
            cites: cites.split(' ')
          };
        } else {
          return findCites(el.parentElement)
        }
      } else {
        return undefined;
      }
    };
    var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
    for (var i=0; i<bibliorefs.length; i++) {
      const ref = bibliorefs[i];
      const citeInfo = findCites(ref);
      if (citeInfo) {
        tippyHover(citeInfo.el, function() {
          var popup = window.document.createElement('div');
          citeInfo.cites.forEach(function(cite) {
            var citeDiv = window.document.createElement('div');
            citeDiv.classList.add('hanging-indent');
            citeDiv.classList.add('csl-entry');
            var biblioDiv = window.document.getElementById('ref-' + cite);
            if (biblioDiv) {
              citeDiv.innerHTML = biblioDiv.innerHTML;
            }
            popup.appendChild(citeDiv);
          });
          return popup.innerHTML;
        });
      }
    }
  });
  </script>
</div> <!-- /content -->




</body></html>